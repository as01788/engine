System.register(["./json-asset-7bb011fd.js","./index-07e0e256.js","./deprecated-229f0693.js","./renderable-component-0ffd84e0.js"],(function(t){"use strict";var e,i,n,r,a,s,o,h,c,l,d,u,_,f,p,g,y,D,E,m,S,v,R,A,b,C,k,M,P,w,T,L,N,B,x,H,F,O,I,z,U,V,W,G,Y,j,X,q,Z;return{setters:[function(t){e=t.ew,i=t.cT,n=t.ej,r=t.P,a=t.ci,s=t.R,o=t.c2,h=t.c4,c=t.cb,l=t.cg,d=t.eq,u=t.gQ,_=t.fT,f=t.gS,p=t.t,g=t.ed,y=t.fU,D=t.er,E=t.fV,m=t.gg,S=t.fW,v=t.eu,R=t.fS,A=t.es,b=t.ey,C=t.d,k=t.dO,M=t.ce,P=t.et,w=t.Q,T=t.bp,L=t.U,N=t.cJ,B=t.W,x=t.ev,H=t.dp,F=t.gT,O=t.bq,I=t.dQ,z=t.gF,U=t.l,V=t.gR,W=t.gG,G=t.g7,Y=t.br},function(t){j=t.d,X=t.D},function(t){q=t.k},function(t){Z=t.R}],execute:function(){t({I:void 0,a:void 0});var Q,K,J,$,tt,et,it,nt,rt,at,st,ot,ht,ct,lt,dt=function(){this.material=null,this.vertexCount=0,this.indicesCount=0},ut=function(t){function r(){for(var e,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))||this).vData=null,e.uvDirty=!0,e.vertDirty=!0,e._data=[],e._indices=[],e._pivotX=0,e._pivotY=0,e._width=0,e._height=0,e.renderScene=null,e.layer=0,e.nodeDirty=!0,e.blendHash=-1,e.passDirty=!0,e.frame=void 0,e.textureHash=0,e.textureDirty=!0,e.hashDirty=!0,e.dataHash=0,e}e(r,t),r.add=function(){return pt.add()},r.remove=function(t){var e=pt.data.indexOf(t);-1!==e&&(pt.data[e].clear(),pt.removeAt(e))};var a=r.prototype;return a.updateNode=function(t){this.renderScene=t.node.scene?t._getRenderScene():null,this.layer=t.node.layer,this.nodeDirty=!1,this.hashDirty=!0},a.updatePass=function(t){this.material=t.getRenderMaterial(0),this.blendHash=t.blendHash,this.passDirty=!1,this.hashDirty=!0},a.updateTexture=function(t){this.frame=t,this.textureHash=t.getHash(),this.textureDirty=!1,this.hashDirty=!0},a.updateHash=function(){var t=" "+this.layer+" "+this.blendHash+" "+this.textureHash;this.dataHash=i(t,666),this.hashDirty=!1},a.updateRenderData=function(t,e){if(this.passDirty&&(this.material=t.getRenderMaterial(0),this.blendHash=t.blendHash,this.passDirty=!1,this.hashDirty=!0),this.nodeDirty&&(this.renderScene=t.node.scene?t._getRenderScene():null,this.layer=t.node.layer,null!==this.renderScene&&(this.nodeDirty=!1),this.hashDirty=!0),this.textureDirty&&(this.frame=e,this.textureHash=e.getHash(),this.textureDirty=!1,this.hashDirty=!0),this.hashDirty){var n=" "+this.layer+" "+this.blendHash+" "+this.textureHash;this.dataHash=i(n,666),this.hashDirty=!1}},a.updateSizeNPivot=function(t,e,i,n){t===this._width&&e===this._height&&i===this._pivotX&&n===this._pivotY||(this._width=t,this._height=e,this._pivotX=i,this._pivotY=n,this.vertDirty=!0)},a.clear=function(){this._data.length=0,this._indices.length=0,this._pivotX=0,this._pivotY=0,this._width=0,this._height=0,this.uvDirty=!0,this.vertDirty=!0,this.material=null,this.vertexCount=0,this.indicesCount=0,this.nodeDirty=!0,this.passDirty=!0,this.textureDirty=!0,this.hashDirty=!0,this.renderScene=null,this.layer=0,this.blendHash=-1,this.frame=null,this.textureHash=0,this.dataHash=0},n(r,[{key:"dataLength",get:function(){return this._data.length},set:function(t){var e=this._data;if(e.length!==t){var i=e.length,n=0;for(n=t;n<i;n++)ft.free(e[n]);for(n=i;n<t;n++)e[n]=ft.alloc();e.length=t}}},{key:"data",get:function(){return this._data}}]),r}(dt),_t=t("M",function(t){function i(e){var i;return void 0===e&&(e=9),(i=t.call(this)||this).vData=void 0,i.iData=void 0,i.vertexStart=0,i.indicesStart=0,i.byteStart=0,i.byteCount=0,i.lastFilledIndices=0,i.lastFilledVertex=0,i._formatByte=void 0,i._formatByte=e*Float32Array.BYTES_PER_ELEMENT,i.vData=new Float32Array(256*e*Float32Array.BYTES_PER_ELEMENT),i.iData=new Uint16Array(1536),i}e(i,t),i.add=function(){return gt.add()},i.remove=function(t){var e=gt.data.indexOf(t);-1!==e&&(gt.data[e].reset(),gt.removeAt(e))};var r=i.prototype;return r.request=function(t,e){var i=this.byteCount+t*this._formatByte;return this.reserve(t,e),this.vertexCount+=t,this.indicesCount+=e,this.byteCount=i,!0},r.reserve=function(t,e){var i=this.byteCount+t*this._formatByte,n=this.indicesCount+e;if(t+this.vertexCount>65535)return!1;var r=this.vData.byteLength,a=this.iData.length,s=this.vData.length,o=this.iData.length;if(i>r||n>a){for(;r<i||a<n;)r=4*(s*=2),a=o*=2;this._reallocBuffer(s,o)}return!0},r.advance=function(t,e){this.vertexCount+=t,this.indicesCount+=e,this.byteCount+=t*this._formatByte},r.reset=function(){this.vertexCount=0,this.indicesCount=0,this.byteCount=0,this.vertexStart=0,this.indicesStart=0,this.byteStart=0,this.lastFilledIndices=0,this.lastFilledVertex=0},r._reallocBuffer=function(t,e){var i=this.vData;this.vData=new Float32Array(t),this.vData.set(i,0);var n=this.iData;this.iData=new Uint16Array(e),this.iData.set(n,0)},n(i,[{key:"formatByte",get:function(){return this._formatByte},set:function(t){this._formatByte=t}},{key:"floatStride",get:function(){return this._formatByte>>2}},{key:"vDataOffset",get:function(){return this.byteCount>>>2}}]),i}(dt)),ft=(function(t){function i(){return t.apply(this,arguments)||this}e(i,t);var n=i.prototype;n._fillQuadBuffer=function(){for(var t=this.iData.length/6,e=this.iData,i=0,n=0;i<t;i++){var r=4*i;e[n++]=r,e[n++]=r+1,e[n++]=r+2,e[n++]=r+1,e[n++]=r+3,e[n++]=r+2}},n._reallocBuffer=function(e,i){t.prototype._reallocBuffer.call(this,e,i),this._fillQuadBuffer()}}(_t),new r((function(){return{x:0,y:0,z:0,u:0,v:0,color:a.WHITE.clone()}}),128)),pt=new s((function(){return new ut}),32),gt=new s((function(){return new _t}),32),yt=new o,Dt=new o,Et=new h,mt=new c,St=new c,vt=new c,Rt=new c(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0),At=new l,bt=t("U",(Q=d("cc.UITransform"),K=E(),J=m(110),$=S(),tt=v(),et=R(),it=v(),nt=R(),Q(rt=K(rt=J(rt=$(rt=u(rt=_((ct=ht=function(t){function i(){var e;return(e=t.call(this)||this)._priority=0,A(e,"_contentSize",st,b(e)),A(e,"_anchorPoint",ot,b(e)),e}e(i,t);var r=i.prototype;return r.__preload=function(){this.node._uiProps.uiTransformComp=this},r.onLoad=function(){this.node.parent&&i.insertChangeMap(this.node.parent)},r.onEnable=function(){this.node.on(f.PARENT_CHANGED,this._parentChanged,this),this._markRenderDataDirty()},r.onDisable=function(){this.node.off(f.PARENT_CHANGED,this._parentChanged,this)},r.onDestroy=function(){this.node._uiProps.uiTransformComp=null},r.setContentSize=function(t,e){var i=this._contentSize;if(void 0===e){if((t=t).width===i.width&&t.height===i.height)return;i.width=t.width,i.height=t.height}else{if(t===i.width&&e===i.height)return;i.width=t,i.height=e}this.node.emit(f.SIZE_CHANGED),this._markRenderDataDirty()},r.setAnchorPoint=function(t,e){var i=this._anchorPoint;if(void 0===e){if((t=t).x===i.x&&t.y===i.y)return;i.x=t.x,i.y=t.y}else{if(t===i.x&&e===i.y)return;i.x=t,i.y=e}this.node.emit(f.ANCHOR_CHANGED,this._anchorPoint),this._markRenderDataDirty()},r.isHit=function(t){for(var e,i=this._contentSize.width,n=this._contentSize.height,r=yt,a=Dt,s=null===(e=this.node)||void 0===e?void 0:e.eventProcessor,h=this._getRenderScene().cameras,l=0;l<h.length;l++){var d=h[l];if(d.visibility&this.node.layer){d.node.getWorldRT(mt);var u=mt.m12,_=mt.m13,f=q.center;if(mt.m12=f.x-(mt.m00*u+mt.m04*_),mt.m13=f.y-(mt.m01*u+mt.m05*_),c.invert(mt,mt),o.transformMat4(r,t,mt),this.node.getWorldMatrix(vt),c.invert(mt,vt),!c.strictEquals(mt,Rt)){o.transformMat4(a,r,mt),a.x+=this._anchorPoint.x*i,a.y+=this._anchorPoint.y*n;var p=!1;if(a.x>=0&&a.y>=0&&a.x<=i&&a.y<=n&&(p=!0,s&&s.maskList))for(var g=s.maskList,y=this.node,D=g?g.length:0,E=0,m=0;y&&m<D;++E,y=y.parent){var S=g[m];if(E===S.index){if(y!==S.comp.node){g.length=m;break}var v=S.comp;if(v&&v._enabled&&!v.isHit(r)){p=!1;break}m++}else if(E>S.index){g.length=m;break}}if(p)return!0}}}return!1},r.convertToNodeSpaceAR=function(t,e){return this.node.getWorldMatrix(vt),c.invert(mt,vt),e||(e=new h),h.transformMat4(e,t,mt)},r.convertToWorldSpaceAR=function(t,e){return this.node.getWorldMatrix(vt),e||(e=new h),h.transformMat4(e,t,vt)},r.getBoundingBox=function(){c.fromRTS(St,this.node.getRotation(),this.node.getPosition(),this.node.getScale());var t=this._contentSize.width,e=this._contentSize.height,i=new l(-this._anchorPoint.x*t,-this._anchorPoint.y*e,t,e);return i.transformMat4(St),i},r.getBoundingBoxToWorld=function(){return this.node.parent?(this.node.parent.getWorldMatrix(vt),this.getBoundingBoxTo(vt)):this.getBoundingBox()},r.getBoundingBoxTo=function(t){c.fromRTS(St,this.node.getRotation(),this.node.getPosition(),this.node.getScale());var e=this._contentSize.width,n=this._contentSize.height,r=new l(-this._anchorPoint.x*e,-this._anchorPoint.y*n,e,n);if(c.multiply(vt,t,St),r.transformMat4(vt),!this.node.children)return r;for(var a,s=this.node.children,o=p(s);!(a=o()).done;){var h=a.value;if(h&&h.active){var d=h.getComponent(i);if(d){var u=d.getBoundingBoxTo(t);u&&l.union(r,r,u)}}}return r},r.getComputeAABB=function(t){var e=this._contentSize.width,i=this._contentSize.height;At.set(-this._anchorPoint.x*e,-this._anchorPoint.y*i,e,i),At.transformMat4(this.node.worldMatrix);var n=At.x+.5*At.width,r=At.y+.5*At.height,a=this.node.worldPosition.z,s=At.width/2,o=At.height/2;return null!=t?(g.set(t,n,r,a,s,o,.001),t):new g(n,r,a,s,o,.001)},r._parentChanged=function(){this.node.getComponent("cc.RenderRoot2D")||this.node.parent&&i.insertChangeMap(this.node.parent)},r._markRenderDataDirty=function(){var t=this.node._uiProps.uiComp;t&&(t.markForUpdateRenderData(),t.renderData&&(t.renderData.vertDirty=!0))},r.checkAndUpdateRect=function(t,e){if(this._rectDirty){this._rectWithScale.x=e.x*this.width,this._rectWithScale.y=e.y*this.height,this._rectWithScale.z=e.z;var i=(.5-this.anchorPoint.x)*this.width*e.x,n=(.5-this.anchorPoint.y)*this.height*e.y;h.transformQuat(this._anchorCache,Et.set(i,n,0),t)}},r.setRectDirty=function(t){t&y.RS&&(this._rectDirty=!0)},i.insertChangeMap=function(t){var e=t.uuid;i.priorityChangeNodeMap.has(e)||i.priorityChangeNodeMap.set(e,t)},i._sortChildrenSibling=function(t){var e=t.children;e&&e.sort((function(t,e){var i=t._uiProps.uiTransformComp,n=e._uiProps.uiTransformComp,r=(i?i._priority:0)-(n?n._priority:0);return 0===r?t.getSiblingIndex()-e.getSiblingIndex():r}))},i._sortSiblings=function(){i.priorityChangeNodeMap.forEach((function(t){i._sortChildrenSibling(t),t._updateSiblingIndex(),t.emit("childrenSiblingOrderChanged")})),i.priorityChangeNodeMap.clear()},i._cleanChangeMap=function(){i.priorityChangeNodeMap.clear()},n(i,[{key:"contentSize",get:function(){return this._contentSize},set:function(t){this._contentSize.equals(t)||(this._contentSize.set(t),this.node.emit(f.SIZE_CHANGED),this._markRenderDataDirty())}},{key:"width",get:function(){return this._contentSize.width},set:function(t){this._contentSize.width!==t&&(this._contentSize.width=t,this.node.emit(f.SIZE_CHANGED),this._markRenderDataDirty())}},{key:"height",get:function(){return this._contentSize.height},set:function(t){this.contentSize.height!==t&&(this._contentSize.height=t,this.node.emit(f.SIZE_CHANGED),this._markRenderDataDirty())}},{key:"anchorPoint",get:function(){return this._anchorPoint},set:function(t){this._anchorPoint.equals(t)||(this._anchorPoint.set(t),this.node.emit(f.ANCHOR_CHANGED,this._anchorPoint),this._markRenderDataDirty())}},{key:"anchorX",get:function(){return this._anchorPoint.x},set:function(t){this._anchorPoint.x!==t&&(this._anchorPoint.x=t,this.node.emit(f.ANCHOR_CHANGED,this._anchorPoint),this._markRenderDataDirty())}},{key:"anchorY",get:function(){return this._anchorPoint.y},set:function(t){this._anchorPoint.y!==t&&(this._anchorPoint.y=t,this.node.emit(f.ANCHOR_CHANGED,this._anchorPoint),this._markRenderDataDirty())}},{key:"priority",get:function(){return this._priority},set:function(t){this._priority!==t&&(this.node.getComponent("cc.RenderRoot2D")?C(6706):(this._priority=t,this.node.parent&&i.insertChangeMap(this.node.parent)))}},{key:"visibility",get:function(){var t=j.root.batcher2D.getFirstRenderCamera(this.node);return t?t.visibility:0}},{key:"cameraPriority",get:function(){var t=j.root.batcher2D.getFirstRenderCamera(this.node);return t?t.priority:0}}]),i}(k),ht.EventType=f,ht.priorityChangeNodeMap=new Map,D((at=ct).prototype,"contentSize",[tt,et],Object.getOwnPropertyDescriptor(at.prototype,"contentSize"),at.prototype),D(at.prototype,"anchorPoint",[it,nt],Object.getOwnPropertyDescriptor(at.prototype,"anchorPoint"),at.prototype),st=D(at.prototype,"_contentSize",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new M(100,100)}}),ot=D(at.prototype,"_anchorPoint",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new o(.5,.5)}}),rt=at))||rt)||rt)||rt)||rt)||rt)||rt));j.on(X.EVENT_AFTER_UPDATE,bt._sortSiblings),j.on(X.EVENT_BEFORE_SCENE_LAUNCH,bt._cleanChangeMap),function(t){t[t.DISABLED=0]="DISABLED",t[t.CLEAR=1]="CLEAR",t[t.ENTER_LEVEL=2]="ENTER_LEVEL",t[t.ENABLED=3]="ENABLED",t[t.EXIT_LEVEL=4]="EXIT_LEVEL",t[t.CLEAR_INVERTED=5]="CLEAR_INVERTED",t[t.ENTER_LEVEL_INVERTED=6]="ENTER_LEVEL_INVERTED"}(lt||(lt=t("a",{})));var Ct,kt,Mt,Pt,wt,Tt,Lt,Nt,Bt,xt,Ht,Ft,Ot,It,zt,Ut,Vt,Wt,Gt,Yt,jt=t("S",function(){function t(){this.stage=lt.DISABLED,this._maskStack=[],this._stencilPattern={stencilTest:!0,func:w.ALWAYS,stencilMask:65535,writeMask:65535,failOp:L.KEEP,zFailOp:L.KEEP,passOp:L.KEEP,ref:1},this.stencilStateMap=new Map,this.stencilStateMapWithDepth=new Map}var e=t.prototype;return e.pushMask=function(t){this._maskStack.push(t)},e.clear=function(t){t.stencilStage=t.inverted?lt.CLEAR_INVERTED:lt.CLEAR},e.enterLevel=function(t){t.graphics.stencilStage=t.inverted?lt.ENTER_LEVEL_INVERTED:lt.ENTER_LEVEL},e.enableMask=function(){this.stage=lt.ENABLED},e.exitMask=function(){0!==this._maskStack.length&&(this._maskStack.pop(),0===this._maskStack.length?this.stage=lt.DISABLED:this.stage=lt.ENABLED)},e.getWriteMask=function(){return 1<<this._maskStack.length-1},e.getExitWriteMask=function(){return 1<<this._maskStack.length},e.getStencilRef=function(){for(var t=0,e=0;e<this._maskStack.length;++e)t+=1<<e;return t},e.reset=function(){this._maskStack.length=0,this.stage=lt.DISABLED},e.destroy=function(){this.stencilStateMap.forEach((function(t){t.destroy()})),this.stencilStateMap.clear()},e.getStencilStage=function(t,e){var i=0,n=!1,r=!1,a=w.LESS,s=this.stencilStateMap;if(e&&e.passes[0]){var o=e.passes[0].depthStencilState,h=0,c=0;o.depthTest&&(h=1),o.depthWrite&&(c=1),i=h|c<<1|o.depthFunc<<2|t<<6|this._maskStack.length<<9,n=o.depthTest,r=o.depthWrite,a=o.depthFunc,s=this.stencilStateMapWithDepth}else i=t<<16|this._maskStack.length;if(s&&s.has(i))return s.get(i);this.setStateFromStage(t);var l=new T(n,r,a,this._stencilPattern.stencilTest,this._stencilPattern.func,this._stencilPattern.stencilMask,this._stencilPattern.writeMask,this._stencilPattern.failOp,this._stencilPattern.zFailOp,this._stencilPattern.passOp,this._stencilPattern.ref,this._stencilPattern.stencilTest,this._stencilPattern.func,this._stencilPattern.stencilMask,this._stencilPattern.writeMask,this._stencilPattern.failOp,this._stencilPattern.zFailOp,this._stencilPattern.passOp,this._stencilPattern.ref);return s.set(i,l),l},e.getStencilHash=function(t){return t<<8|this._maskStack.length},e.setStateFromStage=function(t){var e=this._stencilPattern;t===lt.DISABLED?(e.stencilTest=!1,e.func=w.ALWAYS,e.failOp=L.KEEP,e.stencilMask=e.writeMask=65535,e.ref=1):(e.stencilTest=!0,t===lt.ENABLED?(e.func=w.EQUAL,e.failOp=L.KEEP,e.stencilMask=e.ref=this.getStencilRef(),e.writeMask=this.getWriteMask()):t===lt.CLEAR?(e.func=w.NEVER,e.failOp=L.ZERO,e.writeMask=e.stencilMask=e.ref=this.getWriteMask()):t===lt.CLEAR_INVERTED||t===lt.ENTER_LEVEL?(e.func=w.NEVER,e.failOp=L.REPLACE,e.writeMask=e.stencilMask=e.ref=this.getWriteMask()):t===lt.ENTER_LEVEL_INVERTED&&(e.func=w.NEVER,e.failOp=L.ZERO,e.writeMask=e.stencilMask=e.ref=this.getWriteMask()))},n(t,[{key:"pattern",get:function(){return this._stencilPattern}}]),t}());jt.sharedManager=null,jt.sharedManager=new jt,N(B),function(t){t[t.ADD_COLOR=0]="ADD_COLOR",t[t.ADD_COLOR_AND_TEXTURE=1]="ADD_COLOR_AND_TEXTURE",t[t.GRAYSCALE=2]="GRAYSCALE",t[t.USE_ALPHA_SEPARATED=3]="USE_ALPHA_SEPARATED",t[t.USE_ALPHA_SEPARATED_AND_GRAY=4]="USE_ALPHA_SEPARATED_AND_GRAY"}(Yt||(Yt=t("I",{})));var Xt=t("R",(Ct=d("cc.Renderable2D"),kt=V(bt),Mt=W(),Pt=x(H),wt=x(H),Tt=v(),Lt=R(),Nt=G(),Bt=v(),xt=R(),Ct(Ht=kt(Ht=u(Ht=_((Gt=Wt=function(t){e(r,t);var i=r.prototype;function r(){var e;return e=t.call(this)||this,A(e,"_materials",Ot,b(e)),A(e,"_customMaterial",It,b(e)),e.stencilStage=lt.DISABLED,A(e,"_srcBlendFactor",zt,b(e)),A(e,"_dstBlendFactor",Ut,b(e)),A(e,"_color",Vt,b(e)),e._assembler=null,e._postAssembler=null,e._renderData=null,e._renderDataFlag=!0,e._renderFlag=!0,e._delegateSrc=null,e._instanceMaterialType=-1,e._blendState=new Y,e._blendHash=0,e._colorDirty=!0,e._lastParent=null,e}return i.updateMaterial=function(){if(this._customMaterial)return this.setMaterial(this._customMaterial,0),this._renderData&&(this._renderData.material=this._customMaterial,this.markForUpdateRenderData(),this._renderData.passDirty=!0),void(this._blendHash=-1);var t=this._updateBuiltinMaterial();this.setMaterial(t,0),this._renderData&&(this._renderData.material=t,this.markForUpdateRenderData()),this._updateBlendFunc()},i.updateBlendHash=function(){var t=this._blendState.targets[0].blendDst<<4;this._blendHash=t|this._blendState.targets[0].blendSrc},i.__preload=function(){this.node._uiProps.uiComp=this,this._flushAssembler&&this._flushAssembler(),F.markOpacityTree(this.node)},i.onEnable=function(){this.node.on(f.ANCHOR_CHANGED,this._nodeStateChange,this),this.node.on(f.SIZE_CHANGED,this._nodeStateChange,this),this.updateMaterial(),this._renderFlag=this._canRender()},i.onRestore=function(){this.updateMaterial(),this._renderFlag=this._canRender()},i.onDisable=function(){this.node.off(f.ANCHOR_CHANGED,this._nodeStateChange,this),this.node.off(f.SIZE_CHANGED,this._nodeStateChange,this),this._renderFlag=!1},i.onDestroy=function(){if(this.node._uiProps.uiComp===this&&(this.node._uiProps.uiComp=null),this.destroyRenderData(),this._materialInstances)for(var t=0;t<this._materialInstances.length;t++)this._materialInstances[t]&&this._materialInstances[t].destroy();this._renderData=null,this._blendState&&this._blendState.destroy()},i.markForUpdateRenderData=function(t){if(void 0===t&&(t=!0),this._renderFlag=this._canRender(),t&&this._renderFlag){var e=this._renderData;e&&(e.vertDirty=!0),this._renderDataFlag=t}else t||(this._renderDataFlag=t)},i.requestRenderData=function(){var t=ut.add();return this._renderData=t,t},i.destroyRenderData=function(){this._renderData&&(ut.remove(this._renderData),this._renderData=null)},i.updateAssembler=function(t){this._updateColor(),this._renderFlag&&(this._checkAndUpdateRenderData(),this._render(t))},i.postUpdateAssembler=function(t){this._renderFlag&&this._postRender(t)},i._render=function(){},i._postRender=function(){},i._checkAndUpdateRenderData=function(){this._renderDataFlag&&(this._assembler.updateRenderData(this),this._renderDataFlag=!1)},i._canRender=function(){return this.isValid&&null!==this.getMaterial(0)&&this.enabled&&(this._delegateSrc?this._delegateSrc.activeInHierarchy:this.enabledInHierarchy)&&this.node._uiProps.opacity>0},i._postCanRender=function(){},i._updateColor=function(){this._colorDirty&&this._assembler&&this._assembler.updateColor&&(this._assembler.updateColor(this),this._renderFlag=this._canRender(),this._colorDirty=!1)},i.markColorDirty=function(){this._colorDirty=!0},i._updateBlendFunc=function(){var t=this._blendState.targets[0];t||(t=new O,this._blendState.setTarget(0,t)),t.blendDst===this._dstBlendFactor&&t.blendSrc===this._srcBlendFactor||(t.blend=!0,t.blendDstAlpha=B.ONE_MINUS_SRC_ALPHA,t.blendDst=this._dstBlendFactor,t.blendSrc=this._srcBlendFactor,this.renderData&&(this.renderData.passDirty=!0)),this.updateBlendHash()},i.getBlendState=function(){return this._blendState},i._nodeStateChange=function(){this._renderData&&this.markForUpdateRenderData();for(var t=0;t<this.node.children.length;++t){var e=this.node.children[t].getComponent(r);e&&e.markForUpdateRenderData()}},i._onMaterialModified=function(e,i){this._renderData&&(this.markForUpdateRenderData(),this._renderData.passDirty=!0),t.prototype._onMaterialModified.call(this,e,i)},i._updateBuiltinMaterial=function(){var t;switch(this._instanceMaterialType){case Yt.ADD_COLOR:t=I.get("ui-base-material");break;case Yt.GRAYSCALE:t=I.get("ui-sprite-gray-material");break;case Yt.USE_ALPHA_SEPARATED:t=I.get("ui-sprite-alpha-sep-material");break;case Yt.USE_ALPHA_SEPARATED_AND_GRAY:t=I.get("ui-sprite-gray-alpha-sep-material");break;default:t=I.get("ui-sprite-material")}return t},i.setNodeDirty=function(){this.renderData&&(this.renderData.nodeDirty=!0)},i.setTextureDirty=function(){this.renderData&&(this.renderData.textureDirty=!0)},n(r,[{key:"sharedMaterials",get:function(){return this._materials},set:function(t){for(var e=0;e<t.length;e++)t[e]!==this._materials[e]&&this.setMaterial(t[e],e);if(t.length<this._materials.length){for(var i=t.length;i<this._materials.length;i++)this.setMaterial(null,i);this._materials.splice(t.length)}}},{key:"customMaterial",get:function(){return this._customMaterial},set:function(t){this._customMaterial=t,this.updateMaterial()}},{key:"srcBlendFactor",get:function(){return this._customMaterial&&C(12001),this._srcBlendFactor},set:function(t){this._customMaterial?C(12001):this._srcBlendFactor!==t&&(this._srcBlendFactor=t,this._updateBlendFunc())}},{key:"dstBlendFactor",get:function(){return this._customMaterial&&C(12001),this._dstBlendFactor},set:function(t){this._customMaterial?C(12001):this._dstBlendFactor!==t&&(this._dstBlendFactor=t,this._updateBlendFunc())}},{key:"color",get:function(){return this._color},set:function(t){if(!this._color.equals(t)){var e=this._color.a;this._color.set(t),e!==this.color.a&&F.markOpacityTree(this.node),this._colorDirty=!0}}},{key:"renderData",get:function(){return this._renderData}},{key:"delegateSrc",set:function(t){this._delegateSrc=t}},{key:"blendHash",get:function(){return this._blendHash}}]),r}(Z),Wt.BlendState=B,Wt.Assembler=null,Wt.PostAssembler=null,Ot=D((Ft=Gt).prototype,"_materials",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),D(Ft.prototype,"sharedMaterials",[z,Mt],Object.getOwnPropertyDescriptor(Ft.prototype,"sharedMaterials"),Ft.prototype),It=D(Ft.prototype,"_customMaterial",[Pt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D(Ft.prototype,"customMaterial",[wt,Tt,Lt,Nt],Object.getOwnPropertyDescriptor(Ft.prototype,"customMaterial"),Ft.prototype),D(Ft.prototype,"color",[Bt,xt],Object.getOwnPropertyDescriptor(Ft.prototype,"color"),Ft.prototype),zt=D(Ft.prototype,"_srcBlendFactor",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return B.SRC_ALPHA}}),Ut=D(Ft.prototype,"_dstBlendFactor",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return B.ONE_MINUS_SRC_ALPHA}}),Vt=D(Ft.prototype,"_color",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return a.WHITE.clone()}}),Ht=Ft))||Ht)||Ht)||Ht)||Ht));U.internal.Renderable2D=Xt}}}));
