{"version":3,"sources":["../../../../../../../../../pal/audio/minigame/player-web.ts"],"names":["minigame","systemInfo","clamp01","EventTarget","audioBufferManager","AudioTimer","enqueueOperation","AudioEvent","AudioState","AudioType","audioContext","tt","getAudioContext","OneShotAudioWeb","audioBuffer","volume","url","_bufferSourceNode","_onPlayCb","_url","_onEndCb","createBufferSource","buffer","loop","gainNode","createGain","gain","value","connect","destination","play","start","onPlay","onended","tryReleasingCache","stop","cb","AudioPlayerWeb","_src","_audioBuffer","_sourceNode","_gainNode","_volume","_loop","_state","INIT","_audioTimer","_readyToHandleOnShow","_eventTarget","_operationQueue","on","_onHide","_onShow","destroy","off","PLAYING","pause","then","INTERRUPTED","emit","INTERRUPTION_BEGIN","e","once","INTERRUPTION_END","load","Promise","resolve","loadNative","reject","cachedAudioBuffer","getCache","retainCache","fsUtils","readArrayBuffer","err","arrayBuffer","decodeAudioData","decodedAudioBuffer","addCache","loadOneShotAudio","oneShotAudio","seek","time","_doPlay","_stopSourceNode","currentTime","ENDED","PAUSED","STOPPED","onInterruptionBegin","offInterruptionBegin","onInterruptionEnd","offInterruptionEnd","onEnded","offEnded","WEB_AUDIO","val","duration"],"mappings":"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"}