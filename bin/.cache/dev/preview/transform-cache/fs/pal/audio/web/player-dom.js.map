{"version":3,"sources":["../../../../../../../../../pal/audio/web/player-dom.ts"],"names":["ensurePlaying","domAudio","Promise","resolve","promise","play","undefined","then","onGesture","e","canvas","document","getElementById","addEventListener","once","systemInfo","AudioEvent","AudioState","AudioType","EventTarget","clamp","clamp01","enqueueOperation","BrowserType","OS","OneShotAudioDOM","nativeAudio","volume","_domAudio","_onPlayCb","_onEndCb","onPlay","stop","pause","cb","removeEventListener","AudioPlayerDOM","_state","INIT","_onEnded","_eventTarget","_operationQueue","on","_onHide","_onShow","seek","emit","ENDED","destroy","off","load","url","loadNative","reject","createElement","loadedEvent","os","IOS","browserType","FIREFOX","timer","setTimeout","readyState","failure","success","clearEvent","clearTimeout","message","src","loadOneShotAudio","oneShotAudio","PLAYING","INTERRUPTED","INTERRUPTION_BEGIN","INTERRUPTION_END","time","duration","currentTime","PAUSED","STOPPED","onInterruptionBegin","offInterruptionBegin","onInterruptionEnd","offInterruptionEnd","onEnded","offEnded","DOM_AUDIO","loop","val"],"mappings":"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"}