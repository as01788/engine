{"version":3,"sources":["../../../../../../../../../pal/audio/minigame/player-minigame.ts"],"names":["minigame","systemInfo","EventTarget","AudioEvent","AudioState","AudioType","clamp","clamp01","enqueueOperation","AudioTimer","OneShotAudioMinigame","nativeAudio","volume","_innerAudioContext","_onPlayCb","_onEndCb","onPlay","onEnded","destroy","play","stop","cb","AudioPlayerMinigame","innerAudioContext","_state","INIT","_onPlay","_onPause","_onStop","_onSeeked","_onEnded","_audioTimer","_readyToHandleOnShow","_eventTarget","_operationQueue","on","_onHide","_onShow","eventTarget","PLAYING","emit","PLAYED","PAUSED","onPause","STOPPED","onStop","SEEKED","onSeeked","ENDED","off","forEach","event","_offEvent","pause","then","INTERRUPTED","INTERRUPTION_BEGIN","e","once","INTERRUPTION_END","eventName","load","url","Promise","resolve","loadNative","reject","createInnerAudioContext","timer","setTimeout","clearEvent","offCanplay","success","offError","fail","clearTimeout","err","console","error","Error","onCanplay","onError","src","loadOneShotAudio","seek","time","duration","start","onInterruptionBegin","offInterruptionBegin","onInterruptionEnd","offInterruptionEnd","offEnded","MINIGAME_AUDIO","loop","val","currentTime"],"mappings":"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"}