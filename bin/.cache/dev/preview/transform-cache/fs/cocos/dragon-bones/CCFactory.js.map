{"version":3,"sources":["../../../../../../../../cocos/dragon-bones/CCFactory.ts"],"names":["EDITOR","Armature","BaseObject","Animation","BaseFactory","DragonBones","director","Game","game","Node","Scheduler","System","ccclass","CCTextureAtlasData","CCSlot","CCArmatureDisplay","CCFactory","getInstance","_factory","id","uuid","_slots","eventManager","_dragonBones","getScheduler","on","EVENT_RESTART","onRestart","initUpdate","dt","enableForTarget","scheduleUpdate","Priority","HIGH","update","advanceTime","getDragonBonesDataByRawData","rawData","dataParser","ArrayBuffer","_binaryParser","_dataParser","parseDragonBonesData","buildArmatureDisplay","armatureName","dragonBonesName","skinName","textureAtlasName","armature","buildArmature","_display","createArmatureNode","comp","node","display","getComponent","addComponent","name","_armatureName","_dragonAsset","dragonAsset","_dragonAtlasAsset","dragonAtlasAsset","_init","_buildTextureAtlasData","textureAtlasData","textureAtlas","renderTexture","borrowObject","_sortSlots","slots","sortedSlots","i","l","length","slot","zOrder","_zOrder","inserted","j","splice","unshift","_buildArmature","dataPackage","_skinData","skin","_animation","_armature","animations","_isChildArmature","init","_buildSlot","slotData","displays","getDragonBonesDataByUUID","_dragonBonesDataMap","indexOf","removeDragonBonesDataByUUID","disposeData","undefined","bufferObject"],"mappings":"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"}