{"version":3,"sources":["../../../../../../../../../cocos/physics-2d/framework/physics-system.ts"],"names":["initPhysicsSystem","PhysicsSystem2D","PHYSICS_NONE","EDITOR","director","registerSystem","ID","instance","System","Priority","LOW","Vec2","Director","game","Eventify","Enum","createPhysicsWorld","physicsEngineId","CollisionMatrix","ERaycast2DType","PHYSICS_2D_PTM_RATIO","PhysicsGroup","velocityIterations","positionIterations","physicsWorld","collisionMatrix","_enable","_allowSleep","_maxSubSteps","_fixedTimeStep","_autoSimulation","_accumulator","_steping","_gravity","_delayEvents","config","physics","copy","gravity","multiplyScalar","allowSleep","fixedTimeStep","maxSubSteps","autoSimulation","i","bit","parseInt","value","collisionGroups","cg","Array","forEach","v","name","index","update","postUpdate","deltaTime","emit","EVENT_BEFORE_PHYSICS","substepIndex","step","events","l","length","event","func","call","target","syncPhysicsToScene","debugDrawFlags","drawDebug","EVENT_AFTER_PHYSICS","_callAfterStep","push","resetAccumulator","time","raycast","p1","p2","type","mask","Closest","testPoint","p","testAABB","rect","setAllowSleep","set","setGravity","x","y","once","EVENT_INIT"],"mappings":"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"}