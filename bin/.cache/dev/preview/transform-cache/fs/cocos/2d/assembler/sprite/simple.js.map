{"version":3,"sources":["../../../../../../../../../../cocos/2d/assembler/sprite/simple.ts"],"names":["UI_GPU_DRIVEN","Vec3","dynamicAtlasManager","vec3_temps","i","push","simple","createData","sprite","renderData","requestRenderData","dataLength","vertexCount","indicesCount","vData","Float32Array","updateRenderData","frame","spriteFrame","packToDynamicAtlas","_canDrawByFourVertex","_updateUVWithTrim","vertDirty","updateVertexData","uvDirty","updateUvs","updateWorldVerts","dataList","data","node","data0","data3","matrix","worldMatrix","a","m00","b","m01","c","m04","d","m05","justTranslate","tx","m12","ty","m13","vl","x","vr","vb","y","vt","vltx","vrtx","vbty","vtty","al","ar","bl","br","cb","ct","db","dt","cbtx","cttx","dbty","dtty","fillBuffers","renderer","hasChangedFlags","buffer","acquireBufferBatch","vertexOffset","byteOffset","indicesOffset","vertexId","bufferUnchanged","request","currBufferBatch","vBuf","iBuf","iData","set","index0","index1","index2","index3","uiTrans","_uiProps","uiTransformComp","cw","width","ch","height","appX","anchorX","appY","anchorY","l","r","t","trim","originSize","getOriginalSize","rect","getRect","ow","oh","rw","rh","offset","getOffset","scaleX","scaleY","trimLeft","trimRight","trimBottom","trimTop","uv","updateColor","colorOffset","color","colorR","colorG","g","colorB","colorA","opacity"],"mappings":"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"}