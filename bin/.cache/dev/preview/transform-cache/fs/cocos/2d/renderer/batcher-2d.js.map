{"version":3,"sources":["../../../../../../../../../cocos/2d/renderer/batcher-2d.ts"],"names":["JSB","Material","DescriptorSetInfo","BufferInfo","BufferUsageBit","MemoryUsageBit","Pool","RecyclePool","CachedArray","MeshBuffer","Stage","StencilManager","DrawBatch2D","VertexFormat","legacyCC","ModelLocalBindings","UBOLocal","sys","Mat4","_dsInfo","m4_1","Batcher2D","acquireBufferBatch","attributes","vfmtPosUvColor","strideBytes","getAttributeStride","_currMeshBuffer","vertexFormatBytes","_requireBufferBatch","registerCustomBuffer","callback","batch","_bufferBatchPool","add","initialize","_recreateMeshBuffer","bind","buffers","_customMeshBuffers","get","set","push","unRegisterCustomBuffer","buffer","i","length","splice","idx","data","indexOf","reset","removeAt","_root","device","_screens","obj","destroy","_drawBatchPool","_meshBuffers","Map","_meshBufferUseCount","_batches","_emptyMaterial","_currScene","_currMaterial","_currTexture","_currSampler","_currStaticRoot","_currComponent","_currTransform","_currTextureHash","_currSamplerHash","_currBlendTargetHash","_currLayer","_currDepthStencilStateStage","_currIsStatic","_currHash","_descriptorSetCache","DescriptorSetCache","array","keys","size","forEach","clear","sharedManager","addScreen","comp","sort","_screenSort","getFirstRenderCamera","node","scene","renderScene","cameras","camera","visibility","layer","removeScreen","sortScreens","update","screens","screen","enabledInHierarchy","_recursiveScreenNode","batchPriority","model","subModels","j","priority","descriptorSet","getDescriptorSet","addBatch","uploadBuffers","value","key","bb","customs","isStatic","free","commitComp","frame","assembler","transform","renderComp","renderData","dataHash","mat","material","stencilStage","stage","depthStencilStateStage","autoMergeBatches","blendHash","getGFXTexture","getGFXSampler","textureHash","hash","_getRenderScene","getRenderMaterial","getHash","fillBuffers","commitModel","depthStencil","dssHash","ENABLED","DISABLED","getStencilStage","getStencilHash","stamp","director","getTotalFrames","updateTransform","updateUBOs","curDrawBatch","alloc","subModel","visFlags","bufferBatch","texture","sampler","useLocalData","fillPasses","patches","inputAssembler","commitStaticBatch","concat","drawBatchList","finishMergeBatches","currBufferBatch","ia","recordBatch","blendState","bsHash","getBlendState","customMaterial","_requireDrawBatch","samplerHash","vertexStart","vertexOffset","indicesStart","indicesOffset","byteStart","byteOffset","__isWebIOS14OrIPadOS14Env","forceMergeBatches","flushMaterial","walk","level","len","children","_preProcess","_static","child","_postProcess","_uiProps","opacityDirty","opacity","parent","render","uiComp","markColorDirty","color","a","applyOpacity","uiTransformComp","updateAssembler","postUpdateAssembler","_createMeshBuffer","vertexCount","indexCount","meshBufferUseCount","request","b","getSiblingIndex","_releaseDescriptorSetCache","releaseDescriptorSetCache","LocalDescriptorSet","_descriptorSet","_transform","_textureHash","_samplerHash","_localBuffer","_transformUpdate","root","_localData","Float32Array","COUNT","createBuffer","UNIFORM","TRANSFER_DST","HOST","DEVICE","SIZE","layout","passes","localSetLayout","createDescriptorSet","bindBuffer","BINDING","binding","SAMPLER_SPRITE","bindTexture","bindSampler","uploadLocalData","updateLocal","equals","hasChangedFlags","_dirtyFlags","updateWorldTransform","worldMatrix","_mat","toArray","MAT_WORLD_OFFSET","inverseTranspose","det","determinant","factor","Math","sqrt","multiplyScalar","MAT_WORLD_IT_OFFSET","_dsCacheHashByTexture","_localDescriptorSetCache","_localCachePool","caches","cache","localDs","has","map","internal"],"mappings":"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"}