{"version":3,"sources":["../../../../../../../../../cocos/2d/renderer/draw-batch.ts"],"names":["JSB","Layers","legacyCC","Pass","NativeDrawBatch2D","UI_VIS_FLAG","Enum","NONE","UI_3D","DrawBatch2D","bufferBatch","camera","renderScene","model","texture","sampler","useLocalData","isStatic","textureHash","samplerHash","_passes","_shaders","_visFlags","_inputAssember","_descriptorSet","_nativeObj","visFlags","destroy","ui","clear","inputAssembler","descriptorSet","fillPasses","mat","dss","dssHash","bs","bsHash","patches","batcher","passes","hashFactor","dirty","length","i","director","root","mtlPass","passInUse","update","depthStencilState","blendState","_initPassFromTarget","getShaderVariant","nativePasses","push","shaders","ia","ds","vis"],"mappings":"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"}