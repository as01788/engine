{"version":3,"sources":["../../../../../../../../../cocos/2d/event/pointer-event-dispatcher.ts"],"names":["Input","input","pointerEvent2SystemEvent","DispatcherEventType","NodeEventProcessor","js","InputEventType","PointerEventDispatcher","_isListDirty","_inDispatchCount","_pointerEventProcessorList","_processorListToAdd","_processorListToRemove","on","EventType","MOUSE_DOWN","dispatchEventMouse","MOUSE_MOVE","MOUSE_UP","MOUSE_WHEEL","TOUCH_START","dispatchEventTouch","TOUCH_MOVE","TOUCH_END","TOUCH_CANCEL","callbacksInvoker","ADD_POINTER_EVENT_PROCESSOR","addPointerEventProcessor","REMOVE_POINTER_EVENT_PROCESSOR","removePointerEventProcessor","pointerEventProcessor","push","array","remove","eventMouse","_sortPointerEventProcessorList","pointerEventProcessorList","length","shouldDispatchToSystemEvent","i","isEnabled","shouldHandleEventMouse","_handleEventMouse","preventSwallow","type","_eventTarget","emit","_updatePointerEventProcessorList","eventTouch","touch","shouldHandleEventTouch","_handleEventTouch","claimedTouchIdList","getID","index","indexOf","removeAt","listToAdd","addLength","listToRemove","removeLength","node","trans","_uiProps","uiTransformComp","cachedCameraPriority","cameraPriority","sort","_sortByPriority","p1","p2","node1","node2","activeInHierarchy","n1","n2","ex","parent","_id","priority1","getSiblingIndex","priority2","pointerEventDispatcher"],"mappings":"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"}