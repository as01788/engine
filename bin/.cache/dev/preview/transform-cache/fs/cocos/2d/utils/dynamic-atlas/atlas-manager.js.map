{"version":3,"sources":["../../../../../../../../../../cocos/2d/utils/dynamic-atlas/atlas-manager.ts"],"names":["EDITOR","Filter","legacyCC","js","Atlas","DynamicAtlasManager","_atlases","_atlasIndex","_maxAtlasCount","_textureSize","_maxFrameSize","_textureBleeding","_enabled","newAtlas","atlas","push","beforeSceneLoad","reset","insertSpriteFrame","spriteFrame","_original","packable","sampler","texture","getSamplerInfo","minFilter","LINEAR","magFilter","mipFilter","NONE","frame","i","l","length","destroy","deleteAtlasSpriteFrame","array","fastRemove","_innerSpriteFrames","_texture","deleteAtlasTexture","deleteInnerTexture","isEmpty","splice","packToDynamicAtlas","comp","packedFrame","_setDynamicAtlasFrame","value","director","on","Director","EVENT_BEFORE_SCENE_LAUNCH","off","enable","instance","dynamicAtlasManager","internal"],"mappings":"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"}