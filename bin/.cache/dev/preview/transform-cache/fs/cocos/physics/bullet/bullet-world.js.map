{"version":3,"sources":["../../../../../../../../../cocos/physics/bullet/bullet-world.ts"],"names":["BulletSharedBody","BulletShape","ArrayCollisionMatrix","TupleDictionary","TriggerEventObject","CollisionEventObject","CC_V3_0","CC_V3_1","BulletCache","bullet2CocosVec3","cocos2BulletVec3","error","Vec3","BulletContactData","fastRemoveAt","bt","contactsPool","v3_0","v3_1","BulletWorld","setDefaultMaterial","v","setAllowSleep","ccDiscreteDynamicsWorld_setAllowSleep","_world","setGravity","gravity","DynamicsWorld_setGravity","instance","BT_V3_0","updateNeedEmitEvents","ghosts","_needEmitEvents","i","length","ghost","shapes","ghostStruct","wrappedShapes","j","collider","needCollisionEvent","needTriggerEvent","bodies","body","bodyStruct","_broadphase","_solver","_dispatcher","_needSyncAfterEvents","constraints","triggerArrayMat","collisionArrayMat","contactsDic","oldContactsDic","DbvtBroadphase_new","CollisionDispatcher_new","SequentialImpulseConstraintSolver_new","ccDiscreteDynamicsWorld_new","destroy","CollisionWorld_del","DbvtBroadphase_del","CollisionDispatcher_del","SequentialImpulseConstraintSolver_del","step","deltaTime","timeSinceLastCalled","maxSubStep","undefined","DynamicsWorld_stepSimulation","syncSceneToPhysics","updateDirty","syncSceneToGhost","syncAfterEvents","raycast","worldRay","options","pool","results","computeHit","maxDistance","to","from","BT_V3_1","o","allHitsCB","ccAllRayCallback_static","ccAllRayCallback_reset","mask","queryTrigger","CollisionWorld_rayTest","RayCallback_hasHit","posArray","ccAllRayCallback_getHitPointWorld","normalArray","ccAllRayCallback_getHitNormalWorld","ptrArray","ccAllRayCallback_getCollisionShapePtrs","n","int_array_size","Vec3_array_at","shape","getWrapper","int_array_at","TYPE","r","add","push","_assign","distance","raycastClosest","result","closeHitCB","ccClosestRayCallback_static","ccClosestRayCallback_reset","ccClosestRayCallback_getHitPointWorld","ccClosestRayCallback_getHitNormalWorld","ccClosestRayCallback_getCollisionShapePtr","getSharedBody","node","wrappedBody","addSharedBody","sharedBody","indexOf","DynamicsWorld_addRigidBody","collisionFilterGroup","collisionFilterMask","removeSharedBody","DynamicsWorld_removeRigidBody","addGhostObject","CollisionWorld_addCollisionObject","removeGhostObject","CollisionWorld_removeCollisionObject","addConstraint","constraint","DynamicsWorld_addConstraint","impl","enableCollision","index","removeConstraint","splice","DynamicsWorld_removeConstraint","emitEvents","gatherConatactData","dicL","getLength","apply","contacts","key","getKeyByIndex","data","getDataByKey","shape0","shape1","set","id","collider0","collider1","isTrigger","get","type","selfCollider","otherCollider","emit","body0","attachedRigidBody","body1","isSleeping","cq","c","pop","oldDicL","reset","numManifolds","Dispatcher_getNumManifolds","manifold","Dispatcher_getManifoldByIndexInternal","numContacts","PersistentManifold_getNumContacts","manifoldPoint","PersistentManifold_getContactPoint","s0","ManifoldPoint_getShape0","s1","ManifoldPoint_getShape1","item"],"mappings":"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"}