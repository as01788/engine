{"version":3,"sources":["../../../../../../../../../cocos/physics/framework/physics-system.ts"],"names":["EDITOR","Vec3","director","Director","System","PhysicsMaterial","RecyclePool","game","Enum","PhysicsRayResult","CollisionMatrix","PhysicsGroup","constructDefaultWorld","selector","legacyCC","internal","PhysicsSystem","raycastClosestResult","raycastResults","collisionMatrix","minVolumeSize","useNodeChains","_enable","_allowSleep","_maxSubSteps","_subStepCount","_fixedTimeStep","_autoSimulation","_accumulator","_sleepThreshold","_gravity","_material","raycastOptions","group","mask","queryTrigger","maxDistance","raycastResultPool","on","EVENT_UPDATE","_updateMaterial","postUpdate","deltaTime","_executeInEditMode","runInEditor","physicsWorld","syncSceneToPhysics","emit","EVENT_BEFORE_PHYSICS","step","emitEvents","syncAfterEvents","EVENT_AFTER_PHYSICS","resetConfiguration","config","con","physics","allowSleep","fixedTimeStep","maxSubSteps","sleepThreshold","autoSimulation","gravity","copy","defaultMaterial","setValues","friction","rollingFriction","spinningFriction","restitution","i","parseInt","collisionGroups","cg","Array","forEach","v","name","index","update","setGravity","setAllowSleep","setDefaultMaterial","resetAccumulator","time","raycast","worldRay","reset","length","raycastClosest","constructAndRegister","_instance","sys","registerSystem","ID","priority","value","set","id","once","EVENT_INIT"],"mappings":"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"}