{"version":3,"sources":["../../../../../../../../../../cocos/physics/bullet/shapes/bullet-shape.ts"],"names":["Vec3","PhysicsSystem","EBtSharedBodyDirty","cocos2BulletQuat","cocos2BulletVec3","BulletCache","CC_V3_0","bt","EColliderType","v3_0","ccMaterialBooks","BulletShape","id","idCounter","_isEnabled","_isTrigger","_isInitialized","_impl","_compound","quat","Quat_new","transform","Transform_new","updateEventListener","_sharedBody","wrappedWorld","updateNeedEmitEvents","collider","needCollisionEvent","needTriggerEvent","setMaterial","v","_uuid","ccMaterial_new","mat","ccMaterial_set","restitution","friction","rollingFriction","spinningFriction","CollisionShape_setMaterial","CollisionObject_setMaterial","body","setCenter","copy","multiply","_collider","node","worldScale","Transform_getOrigin","updateCompoundTransform","setAsTrigger","removeShape","addShape","getAABB","bt_transform","instance","BT_TRANSFORM_0","Transform_setIdentity","Transform_setRotation","BT_QUAT_0","worldRotation","MIN","BT_V3_0","MAX","BT_V3_1","CollisionShape_getAabb","halfExtents","x","Vec3_x","y","Vec3_y","z","Vec3_z","add","center","worldPosition","getBoundingSphere","radius","CollisionShape_getLocalBoundingSphere","initialize","com","physicsWorld","getSharedBody","reference","onComponentSet","setWrapper","isNotEmptyShape","CollisionShape_setUserPointer","TYPE","onLoad","isTrigger","onEnable","sharedMaterial","onDisable","onDestroy","Quat_del","Transform_del","CollisionShape_del","delWrapper","updateByReAdd","getGroup","collisionFilterGroup","setGroup","addGroup","removeGroup","getMask","collisionFilterMask","setMask","addMask","removeMask","setCompound","compound","CompoundShape_removeChildShape","CompoundShape_addChildShape","updateScale","CompoundShape_updateChildTransform","bodyStruct","useCompound","dirty","BODY_RE_ADD","needCompound","type","TERRAIN","equals","ZERO","wrappedBody","rigidBody"],"mappings":"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"}