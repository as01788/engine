{"version":3,"sources":["../../../../../../../../../cocos/particle/renderer/trail.ts"],"names":["ccclass","tooltip","displayOrder","type","serializable","range","RenderingSubMesh","director","AttributeName","BufferUsageBit","Format","FormatInfos","MemoryUsageBit","PrimitiveMode","Attribute","IndirectBuffer","BufferInfo","DrawInfo","DRAW_INFO_SIZE","Color","Mat4","Quat","toRadian","Vec3","Pool","scene","CurveRange","GradientRange","Space","TextureMode","TrailMode","legacyCC","TransformBit","PRE_TRIANGLE_INDEX","NEXT_TRIANGLE_INDEX","DIRECTION_THRESHOLD","Math","cos","_temp_trailEle","position","velocity","_temp_quat","_temp_xform","_temp_vec3","_temp_vec3_1","_temp_color","TrailSegment","maxTrailElementNum","start","end","trailElements","push","lifetime","width","direction","color","getElement","idx","length","addElement","splice","newEleLoc","iterateElement","target","f","p","dt","i","count","clear","TrailModule","_minSquaredDistance","_vertSize","_trailNum","_trailLifetime","vbOffset","ibOffset","_trailSegments","_particleTrail","_trailModel","_iaInfo","_iaInfoBuffer","_subMeshData","_vertAttrs","_vbF32","_vbUint32","_iBuffer","_needTransform","_material","ATTR_POSITION","RGB32F","ATTR_TEX_COORD","RGBA32F","ATTR_TEX_COORD1","ATTR_COLOR","RGBA8","a","format","size","Map","onInit","ps","_particleSystem","minParticleDistance","_minParticleDistance","burstCount","psTime","startLifetime","getMax","psRate","rateOverTime","duration","len","bursts","b","getMaxCount","ceil","lifeTime","obj","_enable","enable","onEnable","_attachToScene","onDisable","_detachFromScene","_getRenderScene","addModel","removeModel","destroy","destroySubMeshData","root","destroyModel","play","enabled","trailIter","values","trail","next","done","value","updateRenderData","updateMaterial","getMaterialInstance","processor","_defaultTrailMat","setSubModelMaterial","update","evaluate","_time","space","World","_simulationSpace","Local","node","getWorldMatrix","getWorldRotation","animate","scaledDt","loopCount","lastLoop","trailDelay","get","alloc","set","lastSeg","transformMat4","copy","_updateTrailElement","squaredDistance","widthFromParticle","x","widthRatio","trailNum","lastSecondTrail","subtract","lastThirdTrail","equals","ZERO","normalize","_checkDirectionReverse","colorFromParticle","colorOvertime","removeParticle","free","keys","trailSeg","indexOffset","textCoordSeg","startSegEle","_fillVertexBuffer","colorOverTrail","segEle","j","trailModel","invalidateChildren","POSITION","y","z","updateIA","subModels","subModel","inputAssembler","vertexBuffers","indexBuffer","drawInfos","firstIndex","indexCount","beforeRender","_createModel","createModel","Model","rebuild","device","vertexBuffer","createBuffer","VERTEX","TRANSFER_DST","HOST","DEVICE","vBuffer","ArrayBuffer","Float32Array","Uint32Array","INDEX","max","Uint16Array","BYTES_PER_ELEMENT","INDIRECT","vertexCount","TRIANGLE_LIST","transform","visFlags","visibility","initSubModel","module","trailEle","multiply","remainingLifetime","colorModifer","xTexCoord","trailEleIdx","indexSet","_val","currElement","prevElement","dot","val","updateTrailMaterial","_space","Particles","Stretch"],"mappings":"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"}