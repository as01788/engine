{"version":3,"sources":["../../../../../../../../../cocos/particle/renderer/particle-system-renderer-data.ts"],"names":["isSupportGPUParticle","device","director","root","capabilities","maxVertexTextureUnits","hasFeature","Feature","TEXTURE_FLOAT","legacyCC","warn","ccclass","tooltip","displayOrder","type","serializable","Mesh","Material","AlignmentSpace","RenderMode","ParticleSystemRendererCPU","ParticleSystemRendererGPU","errorID","ParticleSystemRenderer","_particleSystem","create","ps","onInit","processor","useGPU","_useGPU","updateAlignSpace","alignSpace","_switchProcessor","detachFromScene","clear","onEnable","bindModule","_renderMode","val","updateRenderMode","_velocityScale","updateMaterialParams","_lengthScale","_mesh","setVertexAttributes","getMaterial","setMaterial","_mainTexture","_alignSpace","Billboard","View"],"mappings":"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"}