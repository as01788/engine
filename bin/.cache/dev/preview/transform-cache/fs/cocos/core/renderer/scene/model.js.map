{"version":3,"sources":["../../../../../../../../../../cocos/core/renderer/scene/model.ts"],"names":["uploadMat4AsVec4x3","mat","v1","v2","v3","m00","m01","m02","m12","m04","m05","m06","m13","m08","m09","m10","m14","JSB","builtinResMgr","AABB","Layers","SubModel","BatchingSchemes","legacyCC","Mat4","Vec4","Attribute","BufferInfo","getTypedArrayConstructor","BufferUsageBit","FormatInfos","MemoryUsageBit","Filter","Address","Feature","SamplerInfo","INST_MAT_WORLD","UBOLocal","UBOWorldBound","UNIFORM_LIGHTMAP_TEXTURE_BINDING","NativeModel","m4_1","shadowMapPatches","name","value","ModelType","lightmapSamplerHash","LINEAR","NONE","CLAMP","lightmapSamplerWithMipHash","Model","type","DEFAULT","scene","isDynamicBatching","instancedAttributes","buffer","views","attributes","_worldBounds","_modelBounds","_subModels","_node","_transform","_device","_inited","_descriptorSetCount","_updateStamp","_localDataUpdated","_localData","Float32Array","COUNT","_localBuffer","_instMatWorldIdx","_lightmap","_lightmapUVParam","_worldBoundBuffer","_receiveShadow","_castShadow","_enabled","_visFlags","Enum","director","root","device","_setReceiveShadow","val","_nativeObj","setReceiveShadow","_init","initialize","castShadow","enabled","visFlags","_destroySubmodel","subModel","destroy","_destroy","subModels","i","length","attachToScene","detachFromScene","updateTransform","stamp","node","transform","hasChangedFlags","_dirtyFlags","updateWorldTransform","worldBounds","_mat","_pos","_rot","_scale","updateWorldBound","_applyLocalData","_applyLocalBuffer","setLocalBuffer","_applyWorldBoundBuffer","setWorldBoundBuffer","updateUBOs","update","worldMatrix","idx","attrs","toArray","MAT_WORLD_OFFSET","inverseTranspose","det","Math","abs","determinant","factor","sqrt","multiplyScalar","MAT_WORLD_IT_OFFSET","_updateNativeBounds","setBounds","createBoundingShape","minPos","maxPos","fromPoints","create","clone","_createSubModel","initSubModel","subMeshData","isNewSubModel","passes","getMacroPatches","initPlanarShadowShader","initPlanarShadowInstanceShader","_updateAttributesAndBinding","setSubModel","setSubModelMesh","subMesh","setSubModelMaterial","onGlobalPipelineStateChanged","onPipelineStateChanged","onMacroPatchesStateChanged","updateLightingmap","texture","uvParam","LIGHTINGMAP_UVPARAM","get","gfxTexture","getGFXTexture","sampler","getSampler","mipmaps","descriptorSet","bindTexture","bindSampler","subModelIndex","receiveShadow","_initLocalDescriptors","_updateLocalDescriptors","_initWorldBoundDescriptors","_updateWorldBoundDescriptors","worldBoundDescriptorSet","shader","getShaderVariant","patches","_updateInstancedAttributes","_getInstancedAttributeIndex","_setInstMatWorldIdx","setInstMatWorldIdx","pass","hasFeature","INSTANCED_ARRAYS","size","j","attribute","isInstanced","format","Uint8Array","offset","attr","isNormalized","location","push","info","typeViewArray","count","batchingScheme","INSTANCING","getInstancedBuffer","setInstancedAttrBlock","createBuffer","UNIFORM","TRANSFER_DST","DEVICE","SIZE","bindBuffer","BINDING","setCastShadow","n","setNode","setTransform","seVisFlag","setEnabled"],"mappings":"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"}