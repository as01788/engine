{"version":3,"sources":["../../../../../../../../../../cocos/core/pipeline/deferred/postprocess-stage.ts"],"names":["ccclass","displayOrder","type","serializable","SetIndex","Color","Rect","ClearFlagBit","RenderStage","CommonStagePriority","Material","PipelineStateManager","RenderQueueDesc","renderProfiler","UIPhase","colors","PostProcessStage","_renderArea","_uiPhase","initialize","info","activate","pipeline","flow","_postProcessMaterial","pipelineSceneData","postprocessMaterial","destroy","render","camera","_pipeline","device","sceneData","cmdBuff","commandBuffers","pipelineUBO","updateCameraUBO","vp","viewport","x","window","width","y","height","renderData","getPipelineRenderData","framebuffer","swapchain","renderPass","getRenderPass","clearFlag","COLOR","clearColor","z","w","beginRenderPass","clearDepth","clearStencil","bindDescriptorSet","GLOBAL","descriptorSet","builtinPostProcess","pass","passes","shader","getShaderVariant","bloomEnabled","bindTexture","bloom","combineTex","outputRenderTargets","bindSampler","sampler","update","MATERIAL","inputAssembler","quadIAOnscreen","quadIAOffscreen","pso","getOrCreatePipelineState","renderObjects","length","bindPipelineState","bindInputAssembler","draw","profiler","endRenderPass","initInfo","name","priority","POST_PROCESS","tag"],"mappings":"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"}