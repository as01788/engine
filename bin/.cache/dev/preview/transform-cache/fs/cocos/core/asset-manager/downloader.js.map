{"version":3,"sources":["../../../../../../../../../cocos/core/asset-manager/downloader.ts"],"names":["BUILD","EDITOR","sys","js","path","callInNextTick","basename","Cache","downloadDomImage","downloadFile","downloadScript","files","retry","urlAppendTimestamp","legacyCC","CCON","parseCCONJson","decodeCCONBinary","REGEX","downloadImage","url","options","onComplete","func","hasFeature","Feature","IMAGE_BITMAP","assetManager","allowImageBitmap","downloadBlob","xhrResponseType","onFileProgress","downloadJson","downloadArrayBuffer","downloadCCON","err","json","cconPreface","chunkPromises","Promise","all","chunks","map","chunk","resolve","reject","mainFileName","errChunk","chunkBuffer","Uint8Array","then","ccon","document","downloadCCONB","arrayBuffer","downloadText","downloadBundle","nameOrUrl","bundleName","test","downloader","remoteBundles","indexOf","remoteServerAddress","version","bundleVers","count","config","out","error","response","base","jspath","Downloader","maxConcurrency","maxRequestsPerFrame","maxRetryCount","appendTimeStamp","limited","retryInterval","downloadDomAudio","_downloaders","bundle","_downloading","_queue","_queueDirty","_totalNum","_totalNumThisPeriod","_lastDate","_checkNextPeriod","_remoteServerAddress","_maxInterval","init","clear","length","register","type","handler","mixin","download","id","file","get","downloadCallbacks","push","request","find","x","priority","process","index","callback","add","_updateTime","done","data","_handleQueueInNextFrame","finale","result","callbacks","remove","i","l","loadSubpackage","name","completeCallback","loadBundle","now","performance","deltaTime","game","interval","_handleQueue","sort","a","b","pop","bind"],"mappings":"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"}