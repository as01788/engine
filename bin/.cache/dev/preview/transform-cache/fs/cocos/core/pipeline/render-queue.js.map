{"version":3,"sources":["../../../../../../../../../cocos/core/pipeline/render-queue.ts"],"names":["opaqueCompareFn","a","b","hash","depth","shaderId","transparentCompareFn","convertRenderQueue","desc","phase","j","stages","length","getPhaseID","sortFunc","sortMode","RenderQueueSortMode","BACK_TO_FRONT","FRONT_TO_BACK","RenderQueue","isTransparent","phases","renderQueueClearFunc","rq","clear","renderQueueSortFunc","sort","RecyclePool","CachedArray","SetIndex","PipelineStateManager","queue","_passDesc","_passPool","subModel","passIdx","reset","insertRenderPass","renderObj","subModelIdx","model","subModels","pass","passes","shader","shaders","blendState","targets","blend","priority","rp","add","typedID","push","recordCommandBuffer","device","renderPass","cmdBuff","i","array","inputAssembler","pso","getOrCreatePipelineState","bindPipelineState","bindDescriptorSet","MATERIAL","descriptorSet","LOCAL","bindInputAssembler","draw"],"mappings":"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"}