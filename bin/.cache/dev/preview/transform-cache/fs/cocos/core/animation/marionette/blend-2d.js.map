{"version":3,"sources":["../../../../../../../../../../cocos/core/animation/marionette/blend-2d.ts"],"names":["validateSimpleDirectionalSamples","samples","nSamples","length","issues","sameDirectionValidationFlag","Array","fill","forEach","sample","iSample","sameDirectionSamples","iCheckSample","checkSample","Vec2","equals","push","unshift","SimpleDirectionalIssueSameDirection","sampleFreeformCartesian","weights","thresholds","value","sampleFreeform","getGradientBandCartesianCoords","sampleFreeformDirectional","getGradientBandPolarCoords","getGradientBandCoords","pIpInput","pIJ","sumInfluence","influence","Number","MAX_VALUE","outsideHull","jSample","t","dot","lengthSqr","Math","min","index","solveBarycentric","a","b","p","resolutions","det","cross","wA","wB","assertIsTrue","Vec3","blendSimpleDirectional","CACHE_NORMALIZED_SAMPLE","CACHE_BARYCENTRIC_SOLUTIONS","input","strictEquals","ZERO","iCenter","findIndex","iSectorStart","iSectorEnd","lhsCosAngle","NEGATIVE_INFINITY","rhsCosAngle","inputX","x","inputY","y","sampleNormalized","normalize","cosAngle","sign","centerWeight","w1","w2","sum","average","i","pI","pJ","pIpJ","subtract","axis","tmpV3","pQueriedProjected","pi3","pj3","pQueried3","aIJ","aIQ","angleMultiplier","set","angle","projectOnPlane","PI","lenPI","len","lenPJ","deno"],"mappings":"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"}