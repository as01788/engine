{"version":3,"sources":["../../../../../../../../../../cocos/core/gfx/webgl2/webgl2-buffer.ts"],"names":["Buffer","BufferUsageBit","WebGL2CmdFuncCreateBuffer","WebGL2CmdFuncDestroyBuffer","WebGL2CmdFuncResizeBuffer","WebGL2CmdFuncUpdateBuffer","WebGL2DeviceManager","WebGL2IndirectDrawInfos","WebGL2Buffer","_gpuBuffer","initialize","info","_isBufferView","buffer","_usage","usage","_memUsage","memUsage","_size","_stride","range","_count","_flags","flags","size","stride","indirects","gpuBuffer","glTarget","glBuffer","glOffset","offset","Math","max","instance","memoryStatus","bufferSize","destroy","resize","console","warn","oldSize","update","buffSize","undefined","INDIRECT","byteLength"],"mappings":"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"}