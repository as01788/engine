{"version":3,"sources":["../../../../../../../../../cocos/core/asset-manager/asset-manager.ts"],"names":["BUILD","EDITOR","PREVIEW","legacyCC","error","sys","basename","extname","Bundle","Cache","dependUtil","downloader","factory","fetch","helper","load","packManager","parser","Pipeline","preprocess","releaseManager","RequestItem","presets","references","assets","BuiltinBundleName","bundles","fetchPipeline","files","parsed","pipeline","transformPipeline","Task","combine","parse","asyncify","parseParameters","AssetManager","append","generalImportBase","generalNativeBase","force","allowImageBitmap","isMobile","utils","cacheAsset","cacheManager","preprocessPipe","fetchPipe","loadPipe","_releaseManager","_files","_parsed","_parsePipeline","init","options","clear","server","bundleVers","remoteBundles","importBase","endsWith","substr","length","nativeBase","getBundle","name","get","removeBundle","bundle","_destroy","remove","loadAny","requests","onProgress","onComplete","opts","onProg","onComp","preset","Array","isArray","slice","task","create","input","async","preloadAny","loadRemote","url","undefined","reloadAsset","has","__isNative__","err","data","message","stack","ext","p1","p2","loadBundle","nameOrUrl","bundleName","releaseAsset","asset","tryRelease","releaseUnusedAssets","forEach","releaseAll","loadWithJson","json","Error","item","isNative","uuid","assetId","Date","getTime","Math","random","file","_uuid","MAIN","RESOURCES","assetManager"],"mappings":"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"}