{"version":3,"sources":["../../../../../../../../../cocos/core/assets/render-texture.ts"],"names":["ccclass","EDITOR","TEST","clamp","ColorAttachment","DepthStencilAttachment","AccessType","RenderPassInfo","Format","legacyCC","TextureBase","BufferTextureCopy","_colorAttachment","format","RGBA8","beginAccesses","FRAGMENT_SHADER_READ_TEXTURE","endAccesses","_depthStencilAttachment","DEPTH_STENCIL","passInfo","_windowInfo","width","height","renderPassInfo","RenderTexture","_window","initialize","info","_name","name","_width","_height","_initWindow","reset","destroy","root","director","destroyWindow","resize","Math","floor","emit","_serialize","ctxForExporting","base","w","h","n","_deserialize","serializedData","handle","data","getGFXTexture","framebuffer","colorTextures","onLoaded","title","device","createWindow","initDefault","uuid","validate","readPixels","x","y","gfxTexture","gfxDevice","_getGFXDevice","bufferViews","regions","region0","texOffset","texExtent","push","buffer","Uint8Array","copyTextureToBuffers"],"mappings":"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"}