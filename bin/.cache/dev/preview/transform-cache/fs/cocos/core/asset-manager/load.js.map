{"version":3,"sources":["../../../../../../../../../cocos/core/asset-manager/load.ts"],"names":["load","task","done","firstTask","progress","finish","total","input","length","canInvoke","options","__exclude__","Object","create","output","forEach","item","cb","subTask","Task","onProgress","onComplete","err","result","isFinish","legacyCC","assetManager","force","BUILD","error","message","stack","dispatch","push","recycle","loadOneAssetPipeline","async","clear","gatherAsset","loadDepends","asset","uuid","id","config","cacheAsset","depends","addRef","getDepends","repeatItem","content","callbacks","onError","prototype","decRef","Array","isArray","map","dependAsset","Asset","_uuid","setProperties","onLoaded","onLoadedInvokedMap","has","nativeDependMap","add","e","EDITOR","PREVIEW","initDefault","SceneAsset","call","files","remove","parsed","validate","cache","i","l","pipeline","packManager","parser","Pipeline","assets","checkCircleReference","fetch","isNative","file","reloadAsset","data","parse","exclude","ext","get","__uuid__"],"mappings":"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"}