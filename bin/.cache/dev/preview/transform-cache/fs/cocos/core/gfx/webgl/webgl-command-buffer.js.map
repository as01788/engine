{"version":3,"sources":["../../../../../../../../../../cocos/core/gfx/webgl/webgl-command-buffer.ts"],"names":["CommandBuffer","WebGLCommandAllocator","BufferUsageBit","CommandBufferType","StencilFace","DynamicStates","WebGLCmd","WebGLCmdBeginRenderPass","WebGLCmdBindStates","WebGLCmdCopyBufferToTexture","WebGLCmdDraw","WebGLCmdPackage","WebGLCmdUpdateBuffer","WebGLDeviceManager","WebGLCommandBuffer","cmdPackage","_cmdAllocator","_isInRenderPass","_curGPUPipelineState","_curGPUInputAssembler","_curGPUDescriptorSets","_curDynamicOffsets","Array","fill","_curDynamicStates","_isStateInvalied","initialize","info","_type","type","_queue","queue","setCount","instance","bindingMappingInfo","bufferOffsets","length","i","push","destroy","clearCmds","begin","renderPass","subpass","frameBuffer","_numDrawCalls","_numInstances","_numTris","end","bindStates","beginRenderPass","framebuffer","renderArea","clearColors","clearDepth","clearStencil","cmd","beginRenderPassCmdPool","alloc","gpuRenderPass","gpuFramebuffer","beginRenderPassCmds","cmds","BEGIN_RENDER_PASS","endRenderPass","bindPipelineState","pipelineState","gpuPipelineState","bindDescriptorSet","set","descriptorSet","dynamicOffsets","gpuDescriptorSet","gpuPipelineLayout","offsets","idx","dynamicOffsetOffsets","bindInputAssembler","inputAssembler","gpuInputAssembler","setViewport","viewport","cache","left","top","width","height","minDepth","maxDepth","setScissor","scissor","x","y","setLineWidth","lineWidth","setDepthBias","depthBiasConstantFactor","depthBiasClamp","depthBiasSlopeFactor","depthBiasConstant","depthBiasSlope","setBlendConstants","blendConstants","blendConstant","z","w","copy","setDepthBound","minDepthBounds","maxDepthBounds","depthMinBounds","depthMaxBounds","setStencilWriteMask","face","writeMask","front","stencilStatesFront","back","stencilStatesBack","FRONT","BACK","setStencilCompareMask","reference","compareMask","draw","infoOrAssembler","PRIMARY","SECONDARY","drawInfo","drawCmdPool","drawCmds","DRAW","instanceCount","indexCount","vertexCount","glPrimitive","Math","max","console","error","updateBuffer","buffer","data","size","gpuBuffer","updateBufferCmdPool","buffSize","buff","usage","INDIRECT","undefined","byteLength","offset","updateBufferCmds","UPDATE_BUFFER","copyBuffersToTexture","buffers","texture","regions","gpuTexture","copyBufferToTextureCmdPool","copyBufferToTextureCmds","COPY_BUFFER_TO_TEXTURE","execute","cmdBuffs","count","webGLCmdBuff","c","array","refCount","bindStatesCmds","concat","pipelineBarrier","globalBarrier","textureBarriers","textures","bindStatesCmd","bindStatesCmdPool","prototype","apply","gpuDescriptorSets","dynamicStates","BIND_STATES"],"mappings":"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"}