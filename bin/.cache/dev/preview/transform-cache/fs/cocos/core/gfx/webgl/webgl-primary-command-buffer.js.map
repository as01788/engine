{"version":3,"sources":["../../../../../../../../../../cocos/core/gfx/webgl/webgl-primary-command-buffer.ts"],"names":["BufferUsageBit","WebGLCommandBuffer","WebGLCmdFuncBeginRenderPass","WebGLCmdFuncBindStates","WebGLCmdFuncCopyBuffersToTexture","WebGLCmdFuncDraw","WebGLCmdFuncExecuteCmds","WebGLCmdFuncUpdateBuffer","WebGLDeviceManager","WebGLPrimaryCommandBuffer","beginRenderPass","renderPass","framebuffer","renderArea","clearColors","clearDepth","clearStencil","instance","gpuRenderPass","gpuFramebuffer","_isInRenderPass","draw","infoOrAssembler","_isStateInvalied","bindStates","info","drawInfo","_numDrawCalls","_numInstances","instanceCount","indexCount","vertexCount","_curGPUPipelineState","glPrimitive","_numTris","Math","max","console","error","setViewport","viewport","cache","stateCache","gl","left","top","width","height","setScissor","scissor","scissorRect","x","y","updateBuffer","buffer","data","size","gpuBuffer","buffSize","undefined","usage","INDIRECT","byteLength","copyBuffersToTexture","buffers","texture","regions","gpuTexture","execute","cmdBuffs","count","i","webGLCmdBuff","cmdPackage","_curGPUInputAssembler","_curGPUDescriptorSets","_curDynamicOffsets","_curDynamicStates"],"mappings":"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"}