{"version":3,"sources":["../../../../../../../../../cocos/core/pipeline/pipeline-scene-data.ts"],"names":["JSB","Fog","Ambient","Skybox","Shadows","Octree","InputAssemblerInfo","BufferInfo","BufferUsageBit","MemoryUsageBit","Attribute","Format","Material","NativePipelineSharedSceneData","PipelineEventType","PipelineSceneData","_init","_nativeObj","fog","ambient","skybox","shadow","shadows","octree","validPunctualLights","renderObjects","castShadowObjects","dirShadowObjects","shadowFrameBufferMap","Map","_occlusionQueryVertexBuffer","_occlusionQueryIndicesBuffer","_occlusionQueryInputAssembler","_occlusionQueryMaterial","_occlusionQueryShader","_isHDR","_shadingScale","shadingScale","activate","device","pipeline","_device","_pipeline","initOcclusionQuery","_createOcclusionQueryIA","occlusionQueryInputAssembler","mat","_uuid","initialize","effectName","passes","getShaderVariant","occlusionQueryPass","occlusionQueryShader","getOcclusionQueryPass","onGlobalPipelineStateChanged","destroy","length","vertices","Float32Array","vbStride","BYTES_PER_ELEMENT","vbSize","createBuffer","VERTEX","TRANSFER_DST","DEVICE","update","indices","Uint16Array","ibStride","ibSize","INDEX","attributes","RGB32F","info","inputAssembler","createInputAssembler","val","isHDR","emit","ATTACHMENT_SCALE_CAHNGED"],"mappings":"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"}