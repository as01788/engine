{"version":3,"sources":["../../../../../../../../../cocos/core/pipeline/pipeline-ubo.ts"],"names":["UBOGlobal","UBOShadow","UBOCamera","UNIFORM_SHADOWMAP_BINDING","supportsFloatTexture","UNIFORM_SPOT_LIGHTING_MAP_TEXTURE_BINDING","BufferInfo","BufferUsageBit","MemoryUsageBit","Mat4","Vec3","Vec4","Color","legacyCC","ShadowType","updatePlanarPROJ","LightType","builtinResMgr","_matShadowView","_matShadowProj","_matShadowViewProj","_vec4ShadowInfo","PipelineUBO","_globalUBO","Float32Array","COUNT","_cameraUBO","_shadowUBO","updateGlobalUBOView","window","bufferView","root","director","fv","shadingWidth","Math","floor","width","shadingHeight","height","TIME_OFFSET","cumulativeTime","frameTime","getTotalFrames","SCREEN_SIZE_OFFSET","NATIVE_SIZE_OFFSET","updateCameraUBOView","pipeline","camera","scene","getScene","renderScene","mainLight","sceneData","pipelineSceneData","ambient","fog","cv","exposure","isHDR","SCREEN_SCALE_OFFSET","shadingScale","EXPOSURE_OFFSET","toArray","direction","MAIN_LIT_DIR_OFFSET","color","MAIN_LIT_COLOR_OFFSET","useColorTemperature","colorTempRGB","colorTemperatureRGB","x","y","z","illuminance","UNIT_Z","ZERO","skyColor","w","skyIllum","AMBIENT_SKY_OFFSET","AMBIENT_GROUND_OFFSET","groundAlbedo","matView","MAT_VIEW_OFFSET","node","worldMatrix","MAT_VIEW_INV_OFFSET","position","CAMERA_POS_OFFSET","matProj","MAT_PROJ_OFFSET","matProjInv","MAT_PROJ_INV_OFFSET","matViewProj","MAT_VIEW_PROJ_OFFSET","matViewProjInv","MAT_VIEW_PROJ_INV_OFFSET","getCombineSignY","colorArray","GLOBAL_FOG_COLOR_OFFSET","GLOBAL_FOG_BASE_OFFSET","fogStart","fogEnd","fogDensity","GLOBAL_FOG_ADD_OFFSET","fogTop","fogRange","fogAtten","NEAR_FAR_OFFSET","nearClip","farClip","VIEW_PORT_OFFSET","viewport","updateShadowUBOView","device","shadowInfo","shadows","sv","enabled","type","ShadowMap","near","far","matShadowView","matShadowProj","matShadowViewProj","fixedArea","shadowCameraFar","invert","getWorldMatrix","orthoSize","ortho","capabilities","clipSpaceMinZ","clipSpaceSignY","multiply","MAT_LIGHT_VIEW_OFFSET","SHADOW_PROJ_DEPTH_INFO_OFFSET","m10","m14","m11","m15","SHADOW_PROJ_INFO_OFFSET","m00","m05","MAT_LIGHT_VIEW_PROJ_OFFSET","linear","packing","SHADOW_NEAR_FAR_LINEAR_SATURATION_INFO_OFFSET","saturation","SHADOW_WIDTH_HEIGHT_PCF_BIAS_INFO_OFFSET","size","pcf","bias","SHADOW_LIGHT_PACKING_NBIAS_NULL_INFO_OFFSET","normalBias","Planar","shadowColor","SHADOW_COLOR_OFFSET","updateShadowUBOLightView","light","DIRECTIONAL","set","SPOT","perspective","angle","aspect","range","_combineSignY","_initCombineSignY","_device","screenSpaceSignY","activate","_pipeline","ds","descriptorSet","globalUBO","createBuffer","UNIFORM","TRANSFER_DST","HOST","DEVICE","SIZE","bindBuffer","BINDING","cameraUBO","shadowUBO","updateGlobalUBO","globalDSManager","cmdBuffer","commandBuffers","update","updateBuffer","getBuffer","updateCameraUBO","updateShadowUBO","shadowFrameBufferMap","has","bindTexture","get","colorTextures","updateShadowUBOLight","globalDS","getGFXTexture","updateShadowUBORange","offset","data","destroy"],"mappings":"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"}