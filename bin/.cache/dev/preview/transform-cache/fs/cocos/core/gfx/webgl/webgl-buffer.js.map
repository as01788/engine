{"version":3,"sources":["../../../../../../../../../../cocos/core/gfx/webgl/webgl-buffer.ts"],"names":["BufferUsageBit","Buffer","WebGLCmdFuncCreateBuffer","WebGLCmdFuncDestroyBuffer","WebGLCmdFuncResizeBuffer","WebGLCmdFuncUpdateBuffer","WebGLIndirectDrawInfos","WebGLDeviceManager","WebGLBuffer","_gpuBuffer","_gpuBufferView","_uniformBuffer","initialize","info","_isBufferView","buffer","_usage","usage","_memUsage","memUsage","_size","_stride","range","_count","_flags","flags","gpuBuffer","offset","size","Math","max","stride","UNIFORM","Uint8Array","vf32","indirects","glTarget","glBuffer","instance","memoryStatus","bufferSize","destroy","resize","console","warn","oldSize","update","buffSize","undefined","INDIRECT","byteLength"],"mappings":"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"}