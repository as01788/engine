{"version":3,"sources":["../../../../../../../../../../cocos/core/animation/compression/compressed-data.ts"],"names":["KeySharedQuatCurves","KeySharedRealCurves","ccclass","serializable","Quat","Vec2","Vec3","Vec4","CLASS_NAME_PREFIX_ANIM","trackBindingTag","CompressedData","compressRealTrack","track","curve","channel","mayBeCompressed","allowedForCurve","_tracks","push","type","CompressedDataTrackType","FLOAT","binding","components","_addRealCurve","compressVectorTrack","vectorTrack","nComponents","componentsCount","channels","every","Array","i","VEC2","VEC3","VEC4","compressQuatTrack","_quatTracks","pointer","_addQuatCurve","createEval","binder","compressedDataEvalStatus","keySharedCurvesEvalStatuses","trackEvalStatuses","keysSharedQuatCurvesEvalStatues","quatTrackEvalStatuses","_curves","curves","result","curveCount","fill","trackTarget","immediate","target","_quatCurves","from","length","CompressedDataEvaluator","collectAnimatedJoints","joints","trsPath","parseTrsPath","node","times","iKeySharedCurves","findIndex","shared","matchCurve","keySharedCurves","iCurve","addCurve","component","validate","_compressedDataEvalStatus","evaluate","time","compressedTrackEvalStatuses","getPreEvaluated","value","set","setValue"],"mappings":"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"}