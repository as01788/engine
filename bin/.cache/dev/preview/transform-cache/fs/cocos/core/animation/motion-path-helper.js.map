{"version":3,"sources":["../../../../../../../../../cocos/core/animation/motion-path-helper.ts"],"names":["checkMotionPath","motionPath","Array","isArray","i","l","length","controls","sampleMotionPaths","motionPaths","data","duration","fps","createControlPoints","array","Vec2","pos","out","ZERO","values","map","value","Vec3","motionPathValid","errorID","undefined","types","ratios","ratioSampler","newValues","newTypes","newRatios","addNewDatas","type","ratio","push","startRatioOffset","EPSILON","newType","AnimCurve","Linear","nextRatio","betweenRatio","nextValue","results","progress","speed","finalProgress","points","j","l2","controlPoints","curve","Curve","computeBeziers","progresses","computeRatioByType","bezier","beziers","getLength","normal","start","subtract","endCtrlPoint","normalize","multiplyScalar","set","add","end","startCtrlPoint","bezierIndex","binarySearch","getPointAt","lerp","newRatio","Math","abs","binarySearchEpsilon","startPoint","endPoint","Bezier","current","__arcLengthDivisions","cacheArcLengths","u","t","getUtoTmapping","getPoint","x","y","lengths","getLengths","divisions","cache","last","vector","p","sum","distance","arcLengths","il","targetArcLength","low","high","comparison","floor","lengthBefore","lengthAfter","segmentLength","segmentFraction"],"mappings":"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"}