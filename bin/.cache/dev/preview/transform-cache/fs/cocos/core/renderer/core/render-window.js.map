{"version":3,"sources":["../../../../../../../../../../cocos/core/renderer/core/render-window.ts"],"names":["JSB","screenAdapter","Orientation","TextureType","TextureUsageBit","Format","TextureInfo","FramebufferInfo","SurfaceTransform","NativeRenderWindow","orientationMap","PORTRAIT","IDENTITY","LANDSCAPE_RIGHT","ROTATE_90","PORTRAIT_UPSIDE_DOWN","ROTATE_180","LANDSCAPE_LEFT","ROTATE_270","RenderWindow","registerCreateFunc","root","_createWindowFun","_root","_title","_width","_height","_swapchain","_renderPass","_colorTextures","_depthStencilTexture","_cameras","_hasOnScreenAttachments","_hasOffScreenAttachments","_framebuffer","initialize","device","info","_init","title","undefined","swapchain","width","height","createRenderPass","renderPassInfo","_setSwapchain","push","colorTexture","depthStencilTexture","i","colorAttachments","length","createTexture","TEX2D","COLOR_ATTACHMENT","SAMPLED","TRANSFER_SRC","format","depthStencilAttachment","UNKNOWN","DEPTH_STENCIL_ATTACHMENT","_setFrameBuffer","createFramebuffer","destroy","clearCameras","_destroy","resize","orientation","framebuffer","camera","extractRenderCameras","cameras","j","enabled","update","attachCamera","sortCameras","detachCamera","splice","sort","a","b","priority","_nativeObj","val","frameBuffer"],"mappings":";;;;;;;;;;;;;;;;;AAwBSA,MAAAA,G,mCAAAA,G;;AACAC,MAAAA,a,qBAAAA,a;;AACAC,MAAAA,W,oCAAAA,W;;AAELC,MAAAA,W,eAAAA,W;AAAaC,MAAAA,e,eAAAA,e;AAAiBC,MAAAA,M,eAAAA,M;AACNC,MAAAA,W,eAAAA,W;AAAaC,MAAAA,e,eAAAA,e;AAA4BC,MAAAA,gB,eAAAA,gB;;AAGpDC,MAAAA,kB,iBAAAA,kB;;;AAUXC,MAAAA,c,0CACDR,WAAW,CAACS,Q,IAAWH,gBAAgB,CAACI,Q,kBACxCV,WAAW,CAACW,e,IAAkBL,gBAAgB,CAACM,S,kBAC/CZ,WAAW,CAACa,oB,IAAuBP,gBAAgB,CAACQ,U,kBACpDd,WAAW,CAACe,c,IAAiBT,gBAAgB,CAACU,U;AAGnD;AACA;AACA;AACA;;8BACaC,Y;AAuCT;AACJ;AACA;qBACkBC,kB,GAAd,4BAAkCC,IAAlC,EAA8C;AAC1CA,UAAAA,IAAI,CAACC,gBAAL,GAAwB,UAACC,KAAD;AAAA,mBAA+B,IAAIJ,YAAJ,CAAiBI,KAAjB,CAA/B;AAAA,WAAxB;AACH,S;;AAmBD,8BAAqBF,IAArB,EAAiC;AAAA,eAjBvBG,MAiBuB,GAjBd,EAiBc;AAAA,eAhBvBC,MAgBuB,GAhBd,CAgBc;AAAA,eAfvBC,OAeuB,GAfb,CAea;AAAA,eAdvBC,UAcuB,GAdC,IAcD;AAAA,eAbvBC,WAauB,GAbU,IAaV;AAAA,eAZvBC,cAYuB,GAZK,EAYL;AAAA,eAXvBC,oBAWuB,GAXgB,IAWhB;AAAA,eAVvBC,QAUuB,GAVF,EAUE;AAAA,eATvBC,uBASuB,GATG,KASH;AAAA,eARvBC,wBAQuB,GARI,KAQJ;AAAA,eAPvBC,YAOuB,GAPY,IAOZ;AAAE;;;;eAE5BC,U,GAAP,oBAAmBC,MAAnB,EAAmCC,IAAnC,EAAqE;AACjE,eAAKC,KAAL;;AAEA,cAAID,IAAI,CAACE,KAAL,KAAeC,SAAnB,EAA8B;AAC1B,iBAAKhB,MAAL,GAAca,IAAI,CAACE,KAAnB;AACH;;AAED,cAAIF,IAAI,CAACI,SAAL,KAAmBD,SAAvB,EAAkC;AAC9B,iBAAKb,UAAL,GAAkBU,IAAI,CAACI,SAAvB;AACH;;AAED,eAAKhB,MAAL,GAAcY,IAAI,CAACK,KAAnB;AACA,eAAKhB,OAAL,GAAeW,IAAI,CAACM,MAApB;AACA,eAAKf,WAAL,GAAmBQ,MAAM,CAACQ,gBAAP,CAAwBP,IAAI,CAACQ,cAA7B,CAAnB;;AAEA,cAAIR,IAAI,CAACI,SAAT,EAAoB;AAChB,iBAAKK,aAAL,CAAmBT,IAAI,CAACI,SAAxB;;AACA,iBAAKZ,cAAL,CAAoBkB,IAApB,CAAyBV,IAAI,CAACI,SAAL,CAAeO,YAAxC;;AACA,iBAAKlB,oBAAL,GAA4BO,IAAI,CAACI,SAAL,CAAeQ,mBAA3C;AACH,WAJD,MAIO;AACH,iBAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGb,IAAI,CAACQ,cAAL,CAAoBM,gBAApB,CAAqCC,MAAzD,EAAiEF,CAAC,EAAlE,EAAsE;AAClE,mBAAKrB,cAAL,CAAoBkB,IAApB,CAAyBX,MAAM,CAACiB,aAAP,CAAqB,IAAI/C,WAAJ,CAC1CH,WAAW,CAACmD,KAD8B,EAE1ClD,eAAe,CAACmD,gBAAhB,GAAmCnD,eAAe,CAACoD,OAAnD,GAA6DpD,eAAe,CAACqD,YAFnC,EAG1CpB,IAAI,CAACQ,cAAL,CAAoBM,gBAApB,CAAqCD,CAArC,EAAwCQ,MAHE,EAI1C,KAAKjC,MAJqC,EAK1C,KAAKC,OALqC,CAArB,CAAzB;AAOH;;AACD,gBAAIW,IAAI,CAACQ,cAAL,CAAoBc,sBAApB,CAA2CD,MAA3C,KAAsDrD,MAAM,CAACuD,OAAjE,EAA0E;AACtE,mBAAK9B,oBAAL,GAA4BM,MAAM,CAACiB,aAAP,CAAqB,IAAI/C,WAAJ,CAC7CH,WAAW,CAACmD,KADiC,EAE7ClD,eAAe,CAACyD,wBAAhB,GAA2CzD,eAAe,CAACoD,OAFd,EAG7CnB,IAAI,CAACQ,cAAL,CAAoBc,sBAApB,CAA2CD,MAHE,EAI7C,KAAKjC,MAJwC,EAK7C,KAAKC,OALwC,CAArB,CAA5B;AAOH;AACJ;;AAED,eAAKoC,eAAL,CAAqB1B,MAAM,CAAC2B,iBAAP,CAAyB,IAAIxD,eAAJ,CAC1C,KAAKqB,WADqC,EAE1C,KAAKC,cAFqC,EAG1C,KAAKC,oBAHqC,CAAzB,CAArB;;AAMA,iBAAO,IAAP;AACH,S;;eAEMkC,O,GAAP,mBAAkB;AACd,eAAKC,YAAL;;AAEA,cAAI,KAAK/B,YAAT,EAAuB;AACnB,iBAAKA,YAAL,CAAkB8B,OAAlB;;AACA,iBAAK9B,YAAL,GAAoB,IAApB;AACH;;AAED,cAAI,KAAKJ,oBAAT,EAA+B;AAC3B,iBAAKA,oBAAL,CAA0BkC,OAA1B;;AACA,iBAAKlC,oBAAL,GAA4B,IAA5B;AACH;;AAED,eAAK,IAAIoB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKrB,cAAL,CAAoBuB,MAAxC,EAAgDF,CAAC,EAAjD,EAAqD;AACjD,gBAAMF,YAAY,GAAG,KAAKnB,cAAL,CAAoBqB,CAApB,CAArB;;AACA,gBAAIF,YAAJ,EAAkB;AACdA,cAAAA,YAAY,CAACgB,OAAb;AACH;AACJ;;AACD,eAAKnC,cAAL,CAAoBuB,MAApB,GAA6B,CAA7B;;AAEA,eAAKc,QAAL;AACH;AAED;AACJ;AACA;AACA;AACA;AACA;;;eACWC,M,GAAP,gBAAezB,KAAf,EAA8BC,MAA9B,EAA8C;AAC1C,cAAI,KAAKhB,UAAT,EAAqB;AACjB,iBAAKA,UAAL,CAAgBwC,MAAhB,CAAuBzB,KAAvB,EAA8BC,MAA9B,EAAsCjC,cAAc,CAACT,aAAa,CAACmE,WAAf,CAApD;;AACA,iBAAK3C,MAAL,GAAc,KAAKE,UAAL,CAAgBe,KAA9B;AACA,iBAAKhB,OAAL,GAAe,KAAKC,UAAL,CAAgBgB,MAA/B;AACH,WAJD,MAIO;AACH,iBAAK,IAAIO,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKrB,cAAL,CAAoBuB,MAAxC,EAAgDF,CAAC,EAAjD,EAAqD;AACjD,mBAAKrB,cAAL,CAAoBqB,CAApB,EAAuBiB,MAAvB,CAA8BzB,KAA9B,EAAqCC,MAArC;AACH;;AACD,gBAAI,KAAKb,oBAAT,EAA+B;AAC3B,mBAAKA,oBAAL,CAA0BqC,MAA1B,CAAiCzB,KAAjC,EAAwCC,MAAxC;AACH;;AACD,iBAAKlB,MAAL,GAAciB,KAAd;AACA,iBAAKhB,OAAL,GAAeiB,MAAf;AACH;;AAED,cAAI,KAAK0B,WAAT,EAAsB;AAClB,iBAAKA,WAAL,CAAiBL,OAAjB;AACA,iBAAKK,WAAL,CAAiBlC,UAAjB,CAA4B,IAAI5B,eAAJ,CACxB,KAAKqB,WADmB,EAExB,KAAKC,cAFmB,EAGxB,KAAKC,oBAHmB,CAA5B;AAKH;;AAED,+DAAqB,KAAKC,QAA1B,wCAAoC;AAAA,gBAAzBuC,MAAyB;AAChCA,YAAAA,MAAM,CAACH,MAAP,CAAczB,KAAd,EAAqBC,MAArB;AACH;AACJ,S;;eAEM4B,oB,GAAP,8BAA6BC,OAA7B,EAAgD;AAC5C,eAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAK1C,QAAL,CAAcqB,MAAlC,EAA0CqB,CAAC,EAA3C,EAA+C;AAC3C,gBAAMH,MAAM,GAAG,KAAKvC,QAAL,CAAc0C,CAAd,CAAf;;AACA,gBAAIH,MAAM,CAACI,OAAX,EAAoB;AAChBJ,cAAAA,MAAM,CAACK,MAAP;AACAH,cAAAA,OAAO,CAACzB,IAAR,CAAauB,MAAb;AACH;AACJ;AACJ;AAED;AACJ;AACA;AACA;AACA;;;eACWM,Y,GAAP,sBAAqBN,MAArB,EAAqC;AACjC,eAAK,IAAIpB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKnB,QAAL,CAAcqB,MAAlC,EAA0CF,CAAC,EAA3C,EAA+C;AAC3C,gBAAI,KAAKnB,QAAL,CAAcmB,CAAd,MAAqBoB,MAAzB,EAAiC;AAC7B;AACH;AACJ;;AACD,eAAKvC,QAAL,CAAcgB,IAAd,CAAmBuB,MAAnB;;AACA,eAAKO,WAAL;AACH;AAED;AACJ;AACA;AACA;AACA;;;eACWC,Y,GAAP,sBAAqBR,MAArB,EAAqC;AACjC,eAAK,IAAIpB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKnB,QAAL,CAAcqB,MAAlC,EAA0C,EAAEF,CAA5C,EAA+C;AAC3C,gBAAI,KAAKnB,QAAL,CAAcmB,CAAd,MAAqBoB,MAAzB,EAAiC;AAC7B,mBAAKvC,QAAL,CAAcgD,MAAd,CAAqB7B,CAArB,EAAwB,CAAxB;;AACA;AACH;AACJ;AACJ;AAED;AACJ;AACA;AACA;;;eACWe,Y,GAAP,wBAAuB;AACnB,eAAKlC,QAAL,CAAcqB,MAAd,GAAuB,CAAvB;AACH,S;;eAEMyB,W,GAAP,uBAAsB;AAClB,eAAK9C,QAAL,CAAciD,IAAd,CAAmB,UAACC,CAAD,EAAYC,CAAZ;AAAA,mBAA0BD,CAAC,CAACE,QAAF,GAAaD,CAAC,CAACC,QAAzC;AAAA,WAAnB;AACH,S,CAED;;;eAEQ7C,K,GAAR,iBAAiB;AACb,cAAItC,GAAJ,EAAS;AACL,iBAAKoF,UAAL,GAAkB,IAAI3E,kBAAJ,EAAlB;AACH;AACJ,S;;eAEOyD,Q,GAAR,oBAAoB;AAChB,cAAIlE,GAAJ,EAAS;AACL,iBAAKoF,UAAL,GAAkB,IAAlB;AACH;AACJ,S;;eAEOtC,a,GAAR,uBAAuBuC,GAAvB,EAAuC;AACnC,eAAK1D,UAAL,GAAkB0D,GAAlB;;AACA,cAAIrF,GAAJ,EAAS;AACL,iBAAKoF,UAAL,CAAiB3C,SAAjB,GAA6B4C,GAA7B;AACH;AACJ,S;;eAEOvB,e,GAAR,yBAAyBuB,GAAzB,EAA2C;AACvC,eAAKnD,YAAL,GAAoBmD,GAApB;;AACA,cAAIrF,GAAJ,EAAS;AACL,iBAAKoF,UAAL,CAAiBE,WAAjB,GAA+BD,GAA/B;AACH;AACJ,S;;;;;AA1PD;AACJ;AACA;AACA;AACA;AACI,yBAAqB;AACjB,mBAAO,KAAK5D,MAAZ;AACH;AAED;AACJ;AACA;AACA;AACA;;;;eACI,eAAsB;AAClB,mBAAO,KAAKC,OAAZ;AACH;AAED;AACJ;AACA;AACA;;;;eACI,eAAiB;AACb,mBAAO,KAAKC,UAAZ;AACH;AAED;AACJ;AACA;AACA;;;;eACI,eAAgC;AAC5B,mBAAO,KAAKO,YAAZ;AACH;;;eAED,eAAe;AACX,mBAAO,KAAKH,QAAZ;AACH;;;eAsBD,eAAc;AACV,mBAAO,KAAKqD,UAAZ;AACH"}