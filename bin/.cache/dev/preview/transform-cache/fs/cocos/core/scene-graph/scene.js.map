{"version":3,"sources":["../../../../../../../../../cocos/core/scene-graph/scene.ts"],"names":["ccclass","serializable","editable","EDITOR","JSB","TEST","CCObject","Mat4","Quat","Vec3","assert","getError","BaseNode","legacyCC","SceneGlobals","applyTargetOverrides","expandNestedPrefabInstanceNode","NativeScene","Scene","_updateScene","_scene","_init","_nativeObj","name","dependAssets","_renderScene","_inited","_prefabSyncedInLiveReload","_pos","ZERO","_rot","IDENTITY","_scale","ONE","_mat","_dirtyFlags","_lpos","_lrot","_lscale","_activeInHierarchy","director","root","createScene","game","_isCloning","destroy","success","prototype","call","children","_children","i","length","active","destroyScene","_active","addComponent","Error","_onHierarchyChanged","_onBatchCreated","dontSyncChildPrefab","len","_siblingIndex","getPosition","out","copy","getRotation","getScale","getWorldPosition","getWorldRotation","getWorldScale","getWorldMatrix","getWorldRS","getWorldRT","updateWorldTransform","_instantiate","_load","walk","_setScene","_activate","_registerIfAttached","_nodeActivator","activateNode","_globals","activate"],"mappings":"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"}