{"version":3,"sources":["../../../../../../../../../../cocos/core/gfx/webgl2/webgl2-command-buffer.ts"],"names":["CommandBuffer","BufferUsageBit","CommandBufferType","StencilFace","DynamicStates","WebGL2CommandAllocator","WebGL2Cmd","WebGL2CmdBeginRenderPass","WebGL2CmdBindStates","WebGL2CmdCopyBufferToTexture","WebGL2CmdDraw","WebGL2CmdPackage","WebGL2CmdUpdateBuffer","WebGL2DeviceManager","WebGL2CommandBuffer","cmdPackage","_cmdAllocator","_isInRenderPass","_curGPUPipelineState","_curGPUDescriptorSets","_curGPUInputAssembler","_curDynamicOffsets","Array","fill","_curDynamicStates","_isStateInvalied","initialize","info","_type","type","_queue","queue","setCount","instance","bindingMappingInfo","bufferOffsets","length","i","push","destroy","clearCmds","begin","renderPass","subpass","frameBuffer","_numDrawCalls","_numInstances","_numTris","end","bindStates","beginRenderPass","framebuffer","renderArea","clearColors","clearDepth","clearStencil","cmd","beginRenderPassCmdPool","alloc","gpuRenderPass","gpuFramebuffer","beginRenderPassCmds","cmds","BEGIN_RENDER_PASS","endRenderPass","bindPipelineState","pipelineState","gpuPipelineState","bindDescriptorSet","set","descriptorSet","dynamicOffsets","gpuDescriptorSets","gpuDescriptorSet","gpuPipelineLayout","offsets","idx","dynamicOffsetOffsets","bindInputAssembler","inputAssembler","gpuInputAssembler","setViewport","viewport","cache","left","top","width","height","minDepth","maxDepth","setScissor","scissor","x","y","setLineWidth","lineWidth","setDepthBias","depthBiasConstantFactor","depthBiasClamp","depthBiasSlopeFactor","depthBiasConstant","depthBiasSlope","setBlendConstants","blendConstants","blendConstant","z","w","copy","setDepthBound","minDepthBounds","maxDepthBounds","depthMinBounds","depthMaxBounds","setStencilWriteMask","face","writeMask","front","stencilStatesFront","back","stencilStatesBack","FRONT","BACK","setStencilCompareMask","reference","compareMask","draw","infoOrAssembler","PRIMARY","SECONDARY","drawInfo","drawCmdPool","drawCmds","DRAW","instanceCount","indexCount","vertexCount","glPrimitive","Math","max","console","error","updateBuffer","buffer","data","size","gpuBuffer","updateBufferCmdPool","buffSize","buff","usage","INDIRECT","undefined","byteLength","offset","updateBufferCmds","UPDATE_BUFFER","copyBuffersToTexture","buffers","texture","regions","gpuTexture","copyBufferToTextureCmdPool","copyBufferToTextureCmds","COPY_BUFFER_TO_TEXTURE","execute","cmdBuffs","count","webGL2CmdBuff","c","array","refCount","bindStatesCmds","concat","pipelineBarrier","globalBarrier","textureBarriers","textures","bindStatesCmd","bindStatesCmdPool","prototype","apply","dynamicStates","BIND_STATES"],"mappings":"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"}