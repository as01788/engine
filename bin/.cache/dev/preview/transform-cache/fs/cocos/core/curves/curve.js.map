{"version":3,"sources":["../../../../../../../../../cocos/core/curves/curve.ts"],"names":["createRealKeyframeValue","params","realKeyframeValue","RealKeyframeValue","value","interpolationMode","tangentWeightMode","rightTangent","rightTangentWeight","leftTangent","leftTangentWeight","easingMethod","editorExtras","editorExtrasTag","saveRealKeyFrameValue","dataView","keyframeValue","offset","flags","currentOffset","pFlags","KEY_FRAME_VALUE_FLAGS_BYTES","setFloat32","VALUE_BYTES","DEFAULT_INTERPOLATION_MODE","KeyframeValueFlagMask","INTERPOLATION_MODE","setUint8","INTERPOLATION_MODE_BYTES","DEFAULT_TANGENT_WEIGHT_MODE","TANGENT_WEIGHT_MODE","TANGENT_WEIGHT_MODE_BYTES","DEFAULT_LEFT_TANGENT","LEFT_TANGENT","LEFT_TANGENT_BYTES","DEFAULT_LEFT_TANGENT_WEIGHT","LEFT_TANGENT_WEIGHT","LEFT_TANGENT_WEIGHT_BYTES","DEFAULT_RIGHT_TANGENT","RIGHT_TANGENT","RIGHT_TANGENT_BYTES","DEFAULT_RIGHT_TANGENT_WEIGHT","RIGHT_TANGENT_WEIGHT","RIGHT_TANGENT_WEIGHT_BYTES","FLAGS_EASING_METHOD_BITS_START","setUint32","loadRealKeyFrameValue","getUint32","getFloat32","getUint8","FLAG_EASING_METHOD_MASK","wrapRepeat","time","prevTime","nextTime","repeat","wrapPingPong","pingPong","linearTrend","prevValue","nextValue","slope","evalBetweenTwoKeyFrames","ratio","dt","RealInterpolationMode","CONSTANT","LINEAR","transformedRatio","EasingMethod","getEasingFn","lerp","CUBIC","ONE_THIRD","prevTangent","prevTangentWeightSpecified","prevTangentWeightEnabled","isRightTangentWeightEnabled","nextTangent","nextTangentWeightSpecified","nextTangentWeightEnabled","isLeftTangentWeightEnabled","p1","p2","bezierInterpolate","prevTangentWeight","x","y","Math","sqrt","angle0","atan","tx0","cos","ty0","sin","nextTangentWeight","angle1","tx1","ty1","dx","u0x","u1x","u0y","u1y","coeff0","coeff1","coeff2","coeff3","solutions","nSolutions","solveCubic","param","getParamFromCubicSolution","TangentWeightMode","LEFT","RIGHT","p0","p3","t","u","solutionsCount","Infinity","iSolution","solution","assertIsTrue","approx","KeyframeCurve","ccclass","serializable","ExtrapolationMode","binarySearchEpsilon","EditorExtendable","CCClass","deserializeTag","serializeTag","getOrCreateSerializationMetadata","NONE","fastDefine","Attr","setClassAttr","uniquelyReferenced","RealCurve","evaluate","times","_times","values","_values","nFrames","length","firstTime","lastTime","preExtrapolation","preValue","CLAMP","LOOP","PING_PONG","postExtrapolation","preFrame","index","iNext","iPre","preTime","addKeyFrame","assignSorted","undefined","Array","isArray","setKeyframes","slice","map","keyframes","from","isConstant","tolerance","firstVal","every","frame","output","context","toCCON","writeThis","keyframeValues","nKeyframes","dataSize","OVERFLOW_BYTES","FRAME_COUNT_BYTES","TIME_BYTES","REAL_KEY_FRAME_VALUE_MAX_SIZE","DataView","ArrayBuffer","forEach","bytes","Uint8Array","buffer","writeProperty","keyframeValueEditorExtras","some","extras","input","fromCCON","readThis","readProperty","byteOffset","byteLength","_","iKeyFrame"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AA2IA,WAASA,uBAAT,CAAkCC,MAAlC,EAAuE;AACnE,QAAMC,iBAAiB,GAAG,IAAIC,iBAAJ,EAA1B;;AACA,QAAI,OAAOF,MAAP,KAAkB,QAAtB,EAAgC;AAC5BC,MAAAA,iBAAiB,CAACE,KAAlB,GAA0BH,MAA1B;AACH,KAFD,MAEO;AAAA,UAECI,iBAFD,GAWCJ,MAXD,CAECI,iBAFD;AAAA,UAGCC,iBAHD,GAWCL,MAXD,CAGCK,iBAHD;AAAA,UAICF,KAJD,GAWCH,MAXD,CAICG,KAJD;AAAA,UAKCG,YALD,GAWCN,MAXD,CAKCM,YALD;AAAA,UAMCC,kBAND,GAWCP,MAXD,CAMCO,kBAND;AAAA,UAOCC,WAPD,GAWCR,MAXD,CAOCQ,WAPD;AAAA,UAQCC,iBARD,GAWCT,MAXD,CAQCS,iBARD;AAAA,UASCC,YATD,GAWCV,MAXD,CASCU,YATD;AAAA,UAUoBC,YAVpB,GAWCX,MAXD,CAUEY,eAVF;AAYHX,MAAAA,iBAAiB,CAACE,KAAlB,GAA0BA,KAA1B,aAA0BA,KAA1B,cAA0BA,KAA1B,GAAmCF,iBAAiB,CAACE,KAArD;AACAF,MAAAA,iBAAiB,CAACK,YAAlB,GAAiCA,YAAjC,aAAiCA,YAAjC,cAAiCA,YAAjC,GAAiDL,iBAAiB,CAACK,YAAnE;AACAL,MAAAA,iBAAiB,CAACM,kBAAlB,GAAuCA,kBAAvC,aAAuCA,kBAAvC,cAAuCA,kBAAvC,GAA6DN,iBAAiB,CAACM,kBAA/E;AACAN,MAAAA,iBAAiB,CAACO,WAAlB,GAAgCA,WAAhC,aAAgCA,WAAhC,cAAgCA,WAAhC,GAA+CP,iBAAiB,CAACO,WAAjE;AACAP,MAAAA,iBAAiB,CAACQ,iBAAlB,GAAsCA,iBAAtC,aAAsCA,iBAAtC,cAAsCA,iBAAtC,GAA2DR,iBAAiB,CAACQ,iBAA7E;AACAR,MAAAA,iBAAiB,CAACG,iBAAlB,GAAsCA,iBAAtC,aAAsCA,iBAAtC,cAAsCA,iBAAtC,GAA2DH,iBAAiB,CAACG,iBAA7E;AACAH,MAAAA,iBAAiB,CAACI,iBAAlB,GAAsCA,iBAAtC,aAAsCA,iBAAtC,cAAsCA,iBAAtC,GAA2DJ,iBAAiB,CAACI,iBAA7E;AACAJ,MAAAA,iBAAiB,CAACS,YAAlB,GAAiCA,YAAjC,aAAiCA,YAAjC,cAAiCA,YAAjC,GAAiDT,iBAAiB,CAACS,YAAnE;;AACA,UAAIC,YAAJ,EAAkB;AACdV,QAAAA,iBAAiB,CAACW,eAAD,CAAjB,GAAqCD,YAArC;AACH;AACJ;;AACD,WAAOV,iBAAP;AACH;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAySA,WAASY,qBAAT,CAAgCC,QAAhC,EAAoDC,aAApD,EAAsFC,MAAtF,EAAsG;AAClG,QAAIC,KAAK,GAAG,CAAZ;AAEA,QAAIC,aAAa,GAAGF,MAApB;AAEA,QAAMG,MAAM,GAAGD,aAAf,CALkG,CAKpE;;AAC9BA,IAAAA,aAAa,IAAIE,2BAAjB;AANkG,QAS9FjB,KAT8F,GAiB9FY,aAjB8F,CAS9FZ,KAT8F;AAAA,QAU9FC,iBAV8F,GAiB9FW,aAjB8F,CAU9FX,iBAV8F;AAAA,QAW9FC,iBAX8F,GAiB9FU,aAjB8F,CAW9FV,iBAX8F;AAAA,QAY9FC,YAZ8F,GAiB9FS,aAjB8F,CAY9FT,YAZ8F;AAAA,QAa9FC,kBAb8F,GAiB9FQ,aAjB8F,CAa9FR,kBAb8F;AAAA,QAc9FC,WAd8F,GAiB9FO,aAjB8F,CAc9FP,WAd8F;AAAA,QAe9FC,iBAf8F,GAiB9FM,aAjB8F,CAe9FN,iBAf8F;AAAA,QAgB9FC,YAhB8F,GAiB9FK,aAjB8F,CAgB9FL,YAhB8F;AAmBlGI,IAAAA,QAAQ,CAACO,UAAT,CAAoBH,aAApB,EAAmCf,KAAnC,EAA0C,IAA1C;AACAe,IAAAA,aAAa,IAAII,WAAjB;;AAEA,QAAIlB,iBAAiB,KAAKmB,0BAA1B,EAAsD;AAClDN,MAAAA,KAAK,IAAIO,qBAAqB,CAACC,kBAA/B;AACAX,MAAAA,QAAQ,CAACY,QAAT,CAAkBR,aAAlB,EAAiCd,iBAAjC;AACAc,MAAAA,aAAa,IAAIS,wBAAjB;AACH;;AAED,QAAItB,iBAAiB,KAAKuB,2BAA1B,EAAuD;AACnDX,MAAAA,KAAK,IAAIO,qBAAqB,CAACK,mBAA/B;AACAf,MAAAA,QAAQ,CAACY,QAAT,CAAkBR,aAAlB,EAAiCb,iBAAjC;AACAa,MAAAA,aAAa,IAAIY,yBAAjB;AACH;;AAED,QAAItB,WAAW,KAAKuB,oBAApB,EAA0C;AACtCd,MAAAA,KAAK,IAAIO,qBAAqB,CAACQ,YAA/B;AACAlB,MAAAA,QAAQ,CAACO,UAAT,CAAoBH,aAApB,EAAmCV,WAAnC,EAAgD,IAAhD;AACAU,MAAAA,aAAa,IAAIe,kBAAjB;AACH;;AAED,QAAIxB,iBAAiB,KAAKyB,2BAA1B,EAAuD;AACnDjB,MAAAA,KAAK,IAAIO,qBAAqB,CAACW,mBAA/B;AACArB,MAAAA,QAAQ,CAACO,UAAT,CAAoBH,aAApB,EAAmCT,iBAAnC,EAAsD,IAAtD;AACAS,MAAAA,aAAa,IAAIkB,yBAAjB;AACH;;AAED,QAAI9B,YAAY,KAAK+B,qBAArB,EAA4C;AACxCpB,MAAAA,KAAK,IAAIO,qBAAqB,CAACc,aAA/B;AACAxB,MAAAA,QAAQ,CAACO,UAAT,CAAoBH,aAApB,EAAmCZ,YAAnC,EAAiD,IAAjD;AACAY,MAAAA,aAAa,IAAIqB,mBAAjB;AACH;;AAED,QAAIhC,kBAAkB,KAAKiC,4BAA3B,EAAyD;AACrDvB,MAAAA,KAAK,IAAIO,qBAAqB,CAACiB,oBAA/B;AACA3B,MAAAA,QAAQ,CAACO,UAAT,CAAoBH,aAApB,EAAmCX,kBAAnC,EAAuD,IAAvD;AACAW,MAAAA,aAAa,IAAIwB,0BAAjB;AACH;;AAEDzB,IAAAA,KAAK,IAAKP,YAAY,IAAIiC,8BAA1B;AAEA7B,IAAAA,QAAQ,CAAC8B,SAAT,CAAmBzB,MAAnB,EAA2BF,KAA3B,EAAkC,IAAlC;AAEA,WAAOC,aAAP;AACH;;AAED,WAAS2B,qBAAT,CAAgC/B,QAAhC,EAAoDC,aAApD,EAAsFC,MAAtF,EAAsG;AAClG,QAAIE,aAAa,GAAGF,MAApB;AAEA,QAAMC,KAAK,GAAGH,QAAQ,CAACgC,SAAT,CAAmB5B,aAAnB,EAAkC,IAAlC,CAAd;AACAA,IAAAA,aAAa,IAAIE,2BAAjB;AAEAL,IAAAA,aAAa,CAACZ,KAAd,GAAsBW,QAAQ,CAACiC,UAAT,CAAoB7B,aAApB,EAAmC,IAAnC,CAAtB;AACAA,IAAAA,aAAa,IAAII,WAAjB;;AAEA,QAAIL,KAAK,GAAGO,qBAAqB,CAACC,kBAAlC,EAAsD;AAClDV,MAAAA,aAAa,CAACX,iBAAd,GAAkCU,QAAQ,CAACkC,QAAT,CAAkB9B,aAAlB,CAAlC;AACAA,MAAAA,aAAa,IAAIS,wBAAjB;AACH;;AAED,QAAIV,KAAK,GAAGO,qBAAqB,CAACK,mBAAlC,EAAuD;AACnDd,MAAAA,aAAa,CAACV,iBAAd,GAAkCS,QAAQ,CAACkC,QAAT,CAAkB9B,aAAlB,CAAlC;AACAA,MAAAA,aAAa,IAAIY,yBAAjB;AACH;;AAED,QAAIb,KAAK,GAAGO,qBAAqB,CAACQ,YAAlC,EAAgD;AAC5CjB,MAAAA,aAAa,CAACP,WAAd,GAA4BM,QAAQ,CAACiC,UAAT,CAAoB7B,aAApB,EAAmC,IAAnC,CAA5B;AACAA,MAAAA,aAAa,IAAIe,kBAAjB;AACH;;AAED,QAAIhB,KAAK,GAAGO,qBAAqB,CAACW,mBAAlC,EAAuD;AACnDpB,MAAAA,aAAa,CAACN,iBAAd,GAAkCK,QAAQ,CAACiC,UAAT,CAAoB7B,aAApB,EAAmC,IAAnC,CAAlC;AACAA,MAAAA,aAAa,IAAIkB,yBAAjB;AACH;;AAED,QAAInB,KAAK,GAAGO,qBAAqB,CAACc,aAAlC,EAAiD;AAC7CvB,MAAAA,aAAa,CAACT,YAAd,GAA6BQ,QAAQ,CAACiC,UAAT,CAAoB7B,aAApB,EAAmC,IAAnC,CAA7B;AACAA,MAAAA,aAAa,IAAIqB,mBAAjB;AACH;;AAED,QAAItB,KAAK,GAAGO,qBAAqB,CAACiB,oBAAlC,EAAwD;AACpD1B,MAAAA,aAAa,CAACR,kBAAd,GAAmCO,QAAQ,CAACiC,UAAT,CAAoB7B,aAApB,EAAmC,IAAnC,CAAnC;AACAA,MAAAA,aAAa,IAAIwB,0BAAjB;AACH;;AAED,QAAMhC,YAAY,GAAI,CAACO,KAAK,GAAGgC,uBAAT,KAAqCN,8BAA3D;AACA5B,IAAAA,aAAa,CAACL,YAAd,GAA6BA,YAA7B;AAEA,WAAOQ,aAAP;AACH;;AAED,WAASgC,UAAT,CAAqBC,IAArB,EAAmCC,QAAnC,EAAqDC,QAArD,EAAuE;AACnE,WAAOD,QAAQ,GAAGE,MAAM,CAACH,IAAI,GAAGC,QAAR,EAAkBC,QAAQ,GAAGD,QAA7B,CAAxB;AACH;;AAED,WAASG,YAAT,CAAuBJ,IAAvB,EAAqCC,QAArC,EAAuDC,QAAvD,EAAyE;AACrE,WAAOD,QAAQ,GAAGI,QAAQ,CAACL,IAAI,GAAGC,QAAR,EAAkBC,QAAQ,GAAGD,QAA7B,CAA1B;AACH;;AAED,WAASK,WAAT,CACIL,QADJ,EAEIM,SAFJ,EAGIL,QAHJ,EAIIM,SAJJ,EAKIR,IALJ,EAME;AACE,QAAMS,KAAK,GAAG,CAACD,SAAS,GAAGD,SAAb,KAA2BL,QAAQ,GAAGD,QAAtC,CAAd;AACA,WAAOM,SAAS,GAAG,CAACP,IAAI,GAAGC,QAAR,IAAoBQ,KAAvC;AACH;;AAED,WAASC,uBAAT,CACIT,QADJ,EAEIM,SAFJ,EAGIL,QAHJ,EAIIM,SAJJ,EAKIG,KALJ,EAME;AACE,QAAMC,EAAE,GAAGV,QAAQ,GAAGD,QAAtB;;AACA,YAAQM,SAAS,CAACtD,iBAAlB;AACA;AACA,WAAK4D,qBAAqB,CAACC,QAA3B;AACI,eAAOP,SAAS,CAACvD,KAAjB;;AACJ,WAAK6D,qBAAqB,CAACE,MAA3B;AAAmC;AAC/B,cAAMC,gBAAgB,GAAGT,SAAS,CAAChD,YAAV,KAA2B0D,YAAY,CAACF,MAAxC,GACnBJ,KADmB,GAEnBO,WAAW,CAACX,SAAS,CAAChD,YAAX,CAAX,CAAoCoD,KAApC,CAFN;AAGA,iBAAOQ,IAAI,CAACZ,SAAS,CAACvD,KAAX,EAAkBwD,SAAS,CAACxD,KAA5B,EAAmCgE,gBAAnC,CAAX;AACH;;AACD,WAAKH,qBAAqB,CAACO,KAA3B;AAAkC;AAC9B,cAAMC,SAAS,GAAG,MAAM,GAAxB;AAD8B,cAGZC,WAHY,GAK1Bf,SAL0B,CAG1BpD,YAH0B;AAAA,cAINoE,0BAJM,GAK1BhB,SAL0B,CAI1BnD,kBAJ0B;AAM9B,cAAMoE,wBAAwB,GAAGC,2BAA2B,CAAClB,SAAS,CAACrD,iBAAX,CAA5D;AAN8B,cAQbwE,WARa,GAU1BlB,SAV0B,CAQ1BnD,WAR0B;AAAA,cASPsE,0BATO,GAU1BnB,SAV0B,CAS1BlD,iBAT0B;AAW9B,cAAMsE,wBAAwB,GAAGC,0BAA0B,CAACrB,SAAS,CAACtD,iBAAX,CAA3D;;AAEA,cAAI,CAACsE,wBAAD,IAA6B,CAACI,wBAAlC,EAA4D;AACxD;AACA;AACA,gBAAME,EAAE,GAAGvB,SAAS,CAACvD,KAAV,GAAkBqE,SAAS,GAAGC,WAAZ,GAA0BV,EAAvD;AACA,gBAAMmB,EAAE,GAAGvB,SAAS,CAACxD,KAAV,GAAkBqE,SAAS,GAAGK,WAAZ,GAA0Bd,EAAvD;AACA,mBAAOoB,iBAAiB,CAACzB,SAAS,CAACvD,KAAX,EAAkB8E,EAAlB,EAAsBC,EAAtB,EAA0BvB,SAAS,CAACxD,KAApC,EAA2C2D,KAA3C,CAAxB;AACH,WAND,MAMO;AACH,gBAAIsB,iBAAiB,GAAG,GAAxB;;AACA,gBAAIT,wBAAJ,EAA8B;AAC1BS,cAAAA,iBAAiB,GAAGV,0BAApB;AACH,aAFD,MAEO;AACH,kBAAMW,CAAC,GAAGtB,EAAV;;AACA,kBAAMuB,EAAC,GAAGvB,EAAE,GAAGU,WAAf;;AACAW,cAAAA,iBAAiB,GAAGG,IAAI,CAACC,IAAL,CAAUH,CAAC,GAAGA,CAAJ,GAAQC,EAAC,GAAGA,EAAtB,IAA2Bd,SAA/C;AACH;;AACD,gBAAMiB,MAAM,GAAGF,IAAI,CAACG,IAAL,CAAUjB,WAAV,CAAf;AACA,gBAAMkB,GAAG,GAAGJ,IAAI,CAACK,GAAL,CAASH,MAAT,IAAmBL,iBAAnB,GAAuChC,QAAnD;AACA,gBAAMyC,GAAG,GAAGN,IAAI,CAACO,GAAL,CAASL,MAAT,IAAmBL,iBAAnB,GAAuC1B,SAAS,CAACvD,KAA7D;AAEA,gBAAI4F,iBAAiB,GAAG,GAAxB;;AACA,gBAAIhB,wBAAJ,EAA8B;AAC1BgB,cAAAA,iBAAiB,GAAGjB,0BAApB;AACH,aAFD,MAEO;AACH,kBAAMO,EAAC,GAAGtB,EAAV;;AACA,kBAAMuB,GAAC,GAAGvB,EAAE,GAAGc,WAAf;;AACAkB,cAAAA,iBAAiB,GAAGR,IAAI,CAACC,IAAL,CAAUH,EAAC,GAAGA,EAAJ,GAAQC,GAAC,GAAGA,GAAtB,IAA2Bd,SAA/C;AACH;;AACD,gBAAMwB,MAAM,GAAGT,IAAI,CAACG,IAAL,CAAUb,WAAV,CAAf;AACA,gBAAMoB,GAAG,GAAG,CAACV,IAAI,CAACK,GAAL,CAASI,MAAT,CAAD,GAAoBD,iBAApB,GAAwC1C,QAApD;AACA,gBAAM6C,GAAG,GAAG,CAACX,IAAI,CAACO,GAAL,CAASE,MAAT,CAAD,GAAoBD,iBAApB,GAAwCpC,SAAS,CAACxD,KAA9D;AAEA,gBAAMgG,EAAE,GAAGpC,EAAX,CAzBG,CA0BH;;AACA,gBAAMqC,GAAG,GAAG,CAACT,GAAG,GAAGvC,QAAP,IAAmB+C,EAA/B;AACA,gBAAME,GAAG,GAAG,CAACJ,GAAG,GAAG7C,QAAP,IAAmB+C,EAA/B;AACA,gBAAMG,GAAG,GAAGT,GAAZ;AACA,gBAAMU,GAAG,GAAGL,GAAZ,CA9BG,CA+BH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,gBAAMM,MAAM,GAAG,GAAf,CA5CG,CA4CiB;;AACpB,gBAAMC,MAAM,GAAG,MAAML,GAArB,CA7CG,CA6CuB;;AAC1B,gBAAMM,MAAM,GAAG,MAAML,GAAN,GAAY,MAAMD,GAAjC,CA9CG,CA8CmC;;AACtC,gBAAMO,MAAM,GAAG,OAAOP,GAAG,GAAGC,GAAb,IAAoB,GAAnC,CA/CG,CA+CqC;AACxC;;AACA,gBAAMO,SAAS,GAAG,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAAlB;AACA,gBAAMC,UAAU,GAAGC,UAAU,CAACN,MAAM,GAAG1C,KAAV,EAAiB2C,MAAjB,EAAyBC,MAAzB,EAAiCC,MAAjC,EAAyCC,SAAzC,CAA7B;AACA,gBAAMG,KAAK,GAAGC,yBAAyB,CAACJ,SAAD,EAAYC,UAAZ,EAAwB/C,KAAxB,CAAvC,CAnDG,CAoDH;;AACA,gBAAMwB,CAAC,GAAGH,iBAAiB,CAACzB,SAAS,CAACvD,KAAX,EAAkBmG,GAAlB,EAAuBC,GAAvB,EAA4B5C,SAAS,CAACxD,KAAtC,EAA6C4G,KAA7C,CAA3B;AACA,mBAAOzB,CAAP;AACH;AACJ;AArFD;AAuFH;;AAED,WAASN,0BAAT,CAAqC3E,iBAArC,EAA2E;AACvE,WAAO,CAACA,iBAAiB,GAAG4G,iBAAiB,CAACC,IAAvC,MAAiD,CAAxD;AACH;;AAED,WAAStC,2BAAT,CAAsCvE,iBAAtC,EAA4E;AACxE,WAAO,CAACA,iBAAiB,GAAG4G,iBAAiB,CAACE,KAAvC,MAAkD,CAAzD;AACH;;AAED,WAAShC,iBAAT,CAA4BiC,EAA5B,EAAwCnC,EAAxC,EAAoDC,EAApD,EAAgEmC,EAAhE,EAA4EC,CAA5E,EAAuF;AACnF,QAAMC,CAAC,GAAG,IAAID,CAAd;AACA,QAAMd,MAAM,GAAGe,CAAC,GAAGA,CAAJ,GAAQA,CAAvB;AACA,QAAMd,MAAM,GAAG,IAAIc,CAAJ,GAAQA,CAAR,GAAYD,CAA3B;AACA,QAAMZ,MAAM,GAAG,IAAIa,CAAJ,GAAQD,CAAR,GAAYA,CAA3B;AACA,QAAMX,MAAM,GAAGW,CAAC,GAAGA,CAAJ,GAAQA,CAAvB;AACA,WAAOd,MAAM,GAAGY,EAAT,GAAcX,MAAM,GAAGxB,EAAvB,GAA4ByB,MAAM,GAAGxB,EAArC,GAA0CyB,MAAM,GAAGU,EAA1D;AACH;;AAED,WAASL,yBAAT,CAAoCJ,SAApC,EAAkFY,cAAlF,EAA0GnC,CAA1G,EAAqH;AACjH,QAAI0B,KAAK,GAAG1B,CAAZ;;AACA,QAAImC,cAAc,KAAK,CAAvB,EAA0B;AACtBT,MAAAA,KAAK,GAAGH,SAAS,CAAC,CAAD,CAAjB;AACH,KAFD,MAEO;AACHG,MAAAA,KAAK,GAAG,CAACU,QAAT;;AACA,WAAK,IAAIC,SAAS,GAAG,CAArB,EAAwBA,SAAS,GAAGF,cAApC,EAAoD,EAAEE,SAAtD,EAAiE;AAC7D,YAAMC,QAAQ,GAAGf,SAAS,CAACc,SAAD,CAA1B;;AACA,YAAIC,QAAQ,IAAI,GAAZ,IAAmBA,QAAQ,IAAI,GAAnC,EAAwC;AACpC,cAAIA,QAAQ,GAAGZ,KAAf,EAAsB;AAClBA,YAAAA,KAAK,GAAGY,QAAR;AACH;AACJ;AACJ;;AACD,UAAIZ,KAAK,KAAK,CAACU,QAAf,EAAyB;AACrBV,QAAAA,KAAK,GAAG,GAAR;AACH;AACJ;;AACD,WAAOA,KAAP;AACH;;;;AAnyBQa,MAAAA,Y,uBAAAA,Y;;AACAC,MAAAA,M,gBAAAA,M;AAAQvD,MAAAA,I,gBAAAA,I;AAAMd,MAAAA,Q,gBAAAA,Q;AAAUF,MAAAA,M,gBAAAA,M;;AACxBwE,MAAAA,a,oBAAAA,a;;AACAC,MAAAA,O,0BAAAA,O;AAASC,MAAAA,Y,0BAAAA,Y;;AACThE,MAAAA,qB,qBAAAA,qB;AAAuBiE,MAAAA,iB,qBAAAA,iB;AAAmBhB,MAAAA,iB,qBAAAA,iB;;AAC1CiB,MAAAA,mB,4BAAAA,mB;;AACApB,MAAAA,U,iBAAAA,U;;AACAqB,MAAAA,gB,2BAAAA,gB;;AACAC,MAAAA,O,gBAAAA,O;AAASC,MAAAA,c,gBAAAA,c;AAAgBzH,MAAAA,e,gBAAAA,e;AAAgF0H,MAAAA,Y,gBAAAA,Y;;AAEzGlE,MAAAA,Y,mBAAAA,Y;AAAcC,MAAAA,W,mBAAAA,W;;AACdkE,MAAAA,gC,gCAAAA,gC;;;uCAEAvE,qB;;mCAAuBiE,iB;;mCAAmBhB,iB;;8BAAmB7C,Y;AAEtE;AACA;AACA;AACA;AACA;AACA;;;AACMlE,MAAAA,iB;;;;;;;;;;;gBAQKE,iB,GAAoB4D,qBAAqB,CAACE,M;gBAU1C7D,iB,GAAoB4G,iBAAiB,CAACuB,I;gBAQtCrI,K,GAAQ,G;gBAURG,Y,GAAe,G;gBAUfC,kB,GAAqB,G;gBAUrBC,W,GAAc,G;gBAUdC,iB,GAAoB,G;gBAKpBC,Y,GAAe0D,YAAY,CAACF,M;;;;;QAvEPiE,gB;;AA0EhCC,MAAAA,OAAO,CAACK,UAAR,CACI,sBADJ,EAEIvI,iBAFJ,EAEuB;AACfE,QAAAA,iBAAiB,EAAE4D,qBAAqB,CAACE,MAD1B;AAEf7D,QAAAA,iBAAiB,EAAE4G,iBAAiB,CAACuB,IAFtB;AAGfrI,QAAAA,KAAK,EAAE,GAHQ;AAIfG,QAAAA,YAAY,EAAE,GAJC;AAKfC,QAAAA,kBAAkB,EAAE,GALL;AAMfC,QAAAA,WAAW,EAAE,GANE;AAOfC,QAAAA,iBAAiB,EAAE,GAPJ;AAQfC,QAAAA,YAAY,EAAE0D,YAAY,CAACF;AARZ,OAFvB;AAcAkE,MAAAA,OAAO,CAACM,IAAR,CAAaC,YAAb,CACIzI,iBADJ,EAEIU,eAFJ,EAGI,YAHJ,EAII,IAJJ;AAOA2H,MAAAA,gCAAgC,CAACrI,iBAAD,CAAhC,CAAoD0I,kBAApD,GAAyE,IAAzE;;2BAkIaC,S,WADZd,OAAO,CAAC,cAAD,C;;;;;;;;;;;;;;;;;;;;;AAsBJ;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;eACWe,Q,GAAP,kBAAiB3F,IAAjB,EAAuC;AAAA,cAEvB4F,KAFuB,GAI/B,IAJ+B,CAE/BC,MAF+B;AAAA,cAGtBC,MAHsB,GAI/B,IAJ+B,CAG/BC,OAH+B;AAMnC,cAAMC,OAAO,GAAGJ,KAAK,CAACK,MAAtB;;AAEA,cAAID,OAAO,KAAK,CAAhB,EAAmB;AACf,mBAAO,GAAP;AACH;;AAED,cAAME,SAAS,GAAGN,KAAK,CAAC,CAAD,CAAvB;AACA,cAAMO,QAAQ,GAAGP,KAAK,CAACI,OAAO,GAAG,CAAX,CAAtB;;AACA,cAAIhG,IAAI,GAAGkG,SAAX,EAAsB;AAClB;AADkB,gBAEVE,gBAFU,GAEW,IAFX,CAEVA,gBAFU;AAGlB,gBAAMC,SAAQ,GAAGP,MAAM,CAAC,CAAD,CAAvB;;AACA,gBAAIM,gBAAgB,KAAKtB,iBAAiB,CAACwB,KAAvC,IAAgDN,OAAO,GAAG,CAA9D,EAAiE;AAC7D,qBAAOK,SAAQ,CAACrJ,KAAhB;AACH;;AACD,oBAAQoJ,gBAAR;AACA,mBAAKtB,iBAAiB,CAAC/D,MAAvB;AACI,uBAAOT,WAAW,CAAC4F,SAAD,EAAYJ,MAAM,CAAC,CAAD,CAAN,CAAU9I,KAAtB,EAA6B4I,KAAK,CAAC,CAAD,CAAlC,EAAuCE,MAAM,CAAC,CAAD,CAAN,CAAU9I,KAAjD,EAAwDgD,IAAxD,CAAlB;;AACJ,mBAAK8E,iBAAiB,CAACyB,IAAvB;AACIvG,gBAAAA,IAAI,GAAGD,UAAU,CAACC,IAAD,EAAOkG,SAAP,EAAkBC,QAAlB,CAAjB;AACA;;AACJ,mBAAKrB,iBAAiB,CAAC0B,SAAvB;AACIxG,gBAAAA,IAAI,GAAGI,YAAY,CAACJ,IAAD,EAAOkG,SAAP,EAAkBC,QAAlB,CAAnB;AACA;;AACJ;AACI,uBAAOE,SAAQ,CAACrJ,KAAhB;AAVJ;AAYH,WAnBD,MAmBO,IAAIgD,IAAI,GAAGmG,QAAX,EAAqB;AACxB;AADwB,gBAEhBM,iBAFgB,GAEM,IAFN,CAEhBA,iBAFgB;AAGxB,gBAAMC,QAAQ,GAAGZ,MAAM,CAACE,OAAO,GAAG,CAAX,CAAvB;;AACA,gBAAIS,iBAAiB,KAAK3B,iBAAiB,CAACwB,KAAxC,IAAiDN,OAAO,GAAG,CAA/D,EAAkE;AAC9D,qBAAOU,QAAQ,CAAC1J,KAAhB;AACH;;AACD,oBAAQyJ,iBAAR;AACA,mBAAK3B,iBAAiB,CAAC/D,MAAvB;AACI,uBAAOT,WAAW,CAAC6F,QAAD,EAAWO,QAAQ,CAAC1J,KAApB,EAA2B4I,KAAK,CAACI,OAAO,GAAG,CAAX,CAAhC,EAA+CF,MAAM,CAACE,OAAO,GAAG,CAAX,CAAN,CAAoBhJ,KAAnE,EAA0EgD,IAA1E,CAAlB;;AACJ,mBAAK8E,iBAAiB,CAACyB,IAAvB;AACIvG,gBAAAA,IAAI,GAAGD,UAAU,CAACC,IAAD,EAAOkG,SAAP,EAAkBC,QAAlB,CAAjB;AACA;;AACJ,mBAAKrB,iBAAiB,CAAC0B,SAAvB;AACIxG,gBAAAA,IAAI,GAAGI,YAAY,CAACJ,IAAD,EAAOkG,SAAP,EAAkBC,QAAlB,CAAnB;AACA;;AACJ;AACI,uBAAOO,QAAQ,CAAC1J,KAAhB;AAVJ;AAYH;;AAED,cAAM2J,KAAK,GAAG5B,mBAAmB,CAACa,KAAD,EAAQ5F,IAAR,CAAjC;;AACA,cAAI2G,KAAK,IAAI,CAAb,EAAgB;AACZ,mBAAOb,MAAM,CAACa,KAAD,CAAN,CAAc3J,KAArB;AACH;;AAED,cAAM4J,KAAK,GAAG,CAACD,KAAf;AACAlC,UAAAA,YAAY,CAACmC,KAAK,KAAK,CAAV,IAAeA,KAAK,KAAKZ,OAAzB,IAAoCA,OAAO,GAAG,CAA/C,CAAZ;AAEA,cAAMa,IAAI,GAAGD,KAAK,GAAG,CAArB;AACA,cAAME,OAAO,GAAGlB,KAAK,CAACiB,IAAD,CAArB;AACA,cAAMR,QAAQ,GAAGP,MAAM,CAACe,IAAD,CAAvB;AACA,cAAM3G,QAAQ,GAAG0F,KAAK,CAACgB,KAAD,CAAtB;AACA,cAAMpG,SAAS,GAAGsF,MAAM,CAACc,KAAD,CAAxB;AACAnC,UAAAA,YAAY,CAACvE,QAAQ,GAAGF,IAAX,IAAmBA,IAAI,GAAG8G,OAA3B,CAAZ;AACA,cAAMlG,EAAE,GAAGV,QAAQ,GAAG4G,OAAtB;AAEA,cAAMnG,KAAK,GAAG,CAACX,IAAI,GAAG8G,OAAR,IAAmBlG,EAAjC;AACA,iBAAOF,uBAAuB,CAACoG,OAAD,EAAUT,QAAV,EAAoBnG,QAApB,EAA8BM,SAA9B,EAAyCG,KAAzC,CAA9B;AACH;AAED;AACJ;AACA;AACA;AACA;AACA;;;eACWoG,W,GAAP,qBAAoB/G,IAApB,EAAkChD,KAAlC,EAA8E;AAC1E,0CAAa+J,WAAb,YAAyB/G,IAAzB,EAA+BpD,uBAAuB,CAACI,KAAD,CAAtD;AACH;AAED;AACJ;AACA;AACA;;;eAUWgK,Y,GAAP,sBACIpB,KADJ,EAEIE,MAFJ,EAGE;AACE,cAAIA,MAAM,KAAKmB,SAAf,EAA0B;AACtBxC,YAAAA,YAAY,CAACyC,KAAK,CAACC,OAAN,CAAcvB,KAAd,CAAD,CAAZ;AACA,iBAAKwB,YAAL,CACIxB,KAAK,CAACyB,KAAN,EADJ,EAEIvB,MAAM,CAACwB,GAAP,CAAW,UAACtK,KAAD;AAAA,qBAAWJ,uBAAuB,CAACI,KAAD,CAAlC;AAAA,aAAX,CAFJ;AAIH,WAND,MAMO;AACH,gBAAMuK,UAAS,GAAGL,KAAK,CAACM,IAAN,CAAW5B,KAAX,CAAlB;;AACA,iBAAKwB,YAAL,CACIG,UAAS,CAACD,GAAV,CAAc;AAAA,kBAAEtH,IAAF;AAAA,qBAAYA,IAAZ;AAAA,aAAd,CADJ,EAEIuH,UAAS,CAACD,GAAV,CAAc;AAAA,kBAAItK,KAAJ;AAAA,qBAAeJ,uBAAuB,CAACI,KAAD,CAAtC;AAAA,aAAd,CAFJ;AAIH;AACJ;AAED;AACJ;AACA;AACA;AACA;;;eACWyK,U,GAAP,oBAAmBC,SAAnB,EAAsC;AAClC,cAAI,KAAK3B,OAAL,CAAaE,MAAb,IAAuB,CAA3B,EAA8B;AAC1B,mBAAO,IAAP;AACH;;AACD,cAAM0B,QAAQ,GAAG,KAAK5B,OAAL,CAAa,CAAb,EAAgB/I,KAAjC;AACA,iBAAO,KAAK+I,OAAL,CAAa6B,KAAb,CAAmB,UAACC,KAAD;AAAA,mBAAWnD,MAAM,CAACmD,KAAK,CAAC7K,KAAP,EAAc2K,QAAd,EAAwBD,SAAxB,CAAjB;AAAA,WAAnB,CAAP;AACH,S;;eAEOvC,Y,IAAR,UAAuB2C,MAAvB,EAAoDC,OAApD,EAAmF;AAC/E,cAAI,CAACA,OAAO,CAACC,MAAb,EAAqB;AACjBF,YAAAA,MAAM,CAACG,SAAP;AACA;AACH;;AAJ8E,cAOnErC,KAPmE,GAS3E,IAT2E,CAO3EC,MAP2E;AAAA,cAQlEqC,cARkE,GAS3E,IAT2E,CAQ3EnC,OAR2E;AAW/E,cAAMoC,UAAU,GAAGvC,KAAK,CAACK,MAAzB;AAEA,cAAMmC,QAAQ,GAAG,IACXC,cADW,GACMA,cADN,GAEXC,iBAFW,GAGXC,UAAU,GAAGJ,UAHF,GAIXK,6BAA6B,GAAGL,UAJtC;AAMA,cAAMxK,QAAQ,GAAG,IAAI8K,QAAJ,CAAa,IAAIC,WAAJ,CAAgBN,QAAhB,CAAb,CAAjB;AACA,cAAIrK,aAAa,GAAG,CAApB,CApB+E,CAsB/E;;AACAJ,UAAAA,QAAQ,CAACY,QAAT,CAAkBR,aAAlB,EAAiC,KAAKqI,gBAAtC;AAAyDrI,UAAAA,aAAa,IAAIsK,cAAjB;AACzD1K,UAAAA,QAAQ,CAACY,QAAT,CAAkBR,aAAlB,EAAiC,KAAK0I,iBAAtC;AAA0D1I,UAAAA,aAAa,IAAIsK,cAAjB,CAxBqB,CA0B/E;;AACA1K,UAAAA,QAAQ,CAAC8B,SAAT,CAAmB1B,aAAnB,EAAkCoK,UAAlC,EAA8C,IAA9C;AAAqDpK,UAAAA,aAAa,IAAIuK,iBAAjB,CA3B0B,CA6B/E;;AACA1C,UAAAA,KAAK,CAAC+C,OAAN,CAAc,UAAC3I,IAAD,EAAO2G,KAAP;AAAA,mBAAiBhJ,QAAQ,CAACO,UAAT,CAAoBH,aAAa,GAAGwK,UAAU,GAAG5B,KAAjD,EAAwD3G,IAAxD,EAA8D,IAA9D,CAAjB;AAAA,WAAd;AACAjC,UAAAA,aAAa,IAAIwK,UAAU,GAAGJ,UAA9B,CA/B+E,CAiC/E;;AACA,+DAA4BD,cAA5B,wCAA4C;AAAA,gBAAjCtK,aAAiC;AACxCG,YAAAA,aAAa,GAAGL,qBAAqB,CAACC,QAAD,EAAWC,aAAX,EAA0BG,aAA1B,CAArC;AACH;;AAED,cAAM6K,KAAK,GAAG,IAAIC,UAAJ,CAAelL,QAAQ,CAACmL,MAAxB,EAAgC,CAAhC,EAAmC/K,aAAnC,CAAd;AACA+J,UAAAA,MAAM,CAACiB,aAAP,CAAqB,OAArB,EAA8BH,KAA9B;AAEA,cAAMI,yBAAyB,GAAGd,cAAc,CAACZ,GAAf,CAAmB,UAAC1J,aAAD;AAAA,mBAAmBA,aAAa,CAACH,eAAD,CAAhC;AAAA,WAAnB,CAAlC;;AACA,cAAIuL,yBAAyB,CAACC,IAA1B,CAA+B,UAACC,MAAD;AAAA,mBAAYA,MAAM,KAAKjC,SAAvB;AAAA,WAA/B,CAAJ,EAAsE;AAClEa,YAAAA,MAAM,CAACiB,aAAP,8BAAkDC,yBAAlD;AACH;AACJ,S;;eAEO9D,c,IAAR,UAAyBiE,KAAzB,EAAoDpB,OAApD,EAAqF;AACjF,cAAI,CAACA,OAAO,CAACqB,QAAb,EAAuB;AACnBD,YAAAA,KAAK,CAACE,QAAN;AACA;AACH;;AAED,cAAMT,KAAK,GAAGO,KAAK,CAACG,YAAN,CAAmB,OAAnB,CAAd;AAEA,cAAM3L,QAAQ,GAAG,IAAI8K,QAAJ,CAAaG,KAAK,CAACE,MAAnB,EAA2BF,KAAK,CAACW,UAAjC,EAA6CX,KAAK,CAACY,UAAnD,CAAjB;AACA,cAAIzL,aAAa,GAAG,CAApB,CATiF,CAWjF;;AACA,eAAKqI,gBAAL,GAAwBzI,QAAQ,CAACkC,QAAT,CAAkB9B,aAAlB,CAAxB;AAA0DA,UAAAA,aAAa,IAAIsK,cAAjB;AAC1D,eAAK5B,iBAAL,GAAyB9I,QAAQ,CAACkC,QAAT,CAAkB9B,aAAlB,CAAzB;AAA2DA,UAAAA,aAAa,IAAIsK,cAAjB,CAbsB,CAejF;;AACA,cAAMF,UAAU,GAAGxK,QAAQ,CAACgC,SAAT,CAAmB5B,aAAnB,EAAkC,IAAlC,CAAnB;AAA4DA,UAAAA,aAAa,IAAIuK,iBAAjB,CAhBqB,CAkBjF;;AACA,cAAM1C,KAAK,GAAGsB,KAAK,CAACM,IAAN,CAAW;AAAEvB,YAAAA,MAAM,EAAEkC;AAAV,WAAX,EACV,UAACsB,CAAD,EAAI9C,KAAJ;AAAA,mBAAchJ,QAAQ,CAACiC,UAAT,CAAoB7B,aAAa,GAAGwK,UAAU,GAAG5B,KAAjD,EAAwD,IAAxD,CAAd;AAAA,WADU,CAAd;AAEA5I,UAAAA,aAAa,IAAIwK,UAAU,GAAGJ,UAA9B,CArBiF,CAuBjF;;AACA,cAAMD,cAAc,GAAG,IAAIhB,KAAJ,CAA6BiB,UAA7B,CAAvB;;AACA,eAAK,IAAIuB,SAAS,GAAG,CAArB,EAAwBA,SAAS,GAAGvB,UAApC,EAAgD,EAAEuB,SAAlD,EAA6D;AACzD,gBAAM9L,aAAa,GAAGhB,uBAAuB,CAAC,EAAD,CAA7C;AACAmB,YAAAA,aAAa,GAAG2B,qBAAqB,CAAC/B,QAAD,EAAWC,aAAX,EAA0BG,aAA1B,CAArC;AACAmK,YAAAA,cAAc,CAACwB,SAAD,CAAd,GAA4B9L,aAA5B;AACH;;AAED6G,UAAAA,YAAY,CAAC1G,aAAa,KAAK6K,KAAK,CAACY,UAAzB,CAAZ;AAEA,cAAMR,yBAAyB,GAAGG,KAAK,CAACG,YAAN,6BAAlC;;AACA,cAAIN,yBAAJ,EAA+B;AAC3BvE,YAAAA,YAAY,CAACuE,yBAAyB,CAAC/C,MAA1B,KAAqCkC,UAAtC,CAAZ;AACAa,YAAAA,yBAAyB,CAACL,OAA1B,CACI,UAACO,MAAD,EAASvC,KAAT;AAAA,qBAAmBuB,cAAc,CAACvB,KAAD,CAAd,CAAsBlJ,eAAtB,IAAyCyL,MAA5D;AAAA,aADJ;AAGH;;AAED,eAAKrD,MAAL,GAAcD,KAAd;AACA,eAAKG,OAAL,GAAemC,cAAf;AACH,S;;;QAxP0BvD,a,4FAQ1BE,Y;;;;;iBAC4CC,iBAAiB,CAACwB,K;;4FAS9DzB,Y;;;;;iBAC6CC,iBAAiB,CAACwB,K;;;;AAwO9D9G,MAAAA,8B,GAAiC,C;AACjCM,MAAAA,uB,GAA0B,QAAQN,8B,EAAgC;;iBAEnEnB,qB;AAAAA,QAAAA,qB,CAAAA,qB;AAAAA,QAAAA,qB,CAAAA,qB;AAAAA,QAAAA,qB,CAAAA,qB;AAAAA,QAAAA,qB,CAAAA,qB;AAAAA,QAAAA,qB,CAAAA,qB;AAAAA,QAAAA,qB,CAAAA,qB;AAAAA,QAAAA,qB,CAAAA,qB;SAAAA,qB,KAAAA,qB;;AAUCgK,MAAAA,c,GAAiB,C;AACjBC,MAAAA,iB,GAAoB,C;AACpBC,MAAAA,U,GAAa,C;AACbtK,MAAAA,2B,GAA8B,C;AAC9BE,MAAAA,W,GAAc,C;AACdK,MAAAA,wB,GAA2B,C;AAC3BG,MAAAA,yB,GAA4B,C;AAC5BG,MAAAA,kB,GAAqB,C;AACrBG,MAAAA,yB,GAA4B,C;AAC5BG,MAAAA,mB,GAAsB,C;AACtBG,MAAAA,0B,GAA6B,C;8BAS/B3C,uBAAuB,CAAC,EAAD,C;AANJwB,MAAAA,0B,yBAAnBnB,iB;AACmBwB,MAAAA,2B,yBAAnBvB,iB;AACa0B,MAAAA,oB,yBAAbvB,W;AACmB0B,MAAAA,2B,yBAAnBzB,iB;AACc4B,MAAAA,qB,yBAAd/B,Y;AACoBkC,MAAAA,4B,yBAApBjC,kB;AAGEoL,MAAAA,6B,GAAgCvK,2BAA2B,GAC3DE,WADgC,GAEhCK,wBAFgC,GAGhCG,yBAHgC,GAIhCG,kBAJgC,GAKhCG,yBALgC,GAMhCG,mBANgC,GAOhCG,0BAPgC,GAQhC,C"}