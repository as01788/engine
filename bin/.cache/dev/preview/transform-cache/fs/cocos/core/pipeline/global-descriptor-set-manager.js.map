{"version":3,"sources":["../../../../../../../../../cocos/core/pipeline/global-descriptor-set-manager.ts"],"names":["BufferUsageBit","MemoryUsageBit","BufferInfo","Filter","Address","DescriptorSetInfo","DescriptorSetLayoutInfo","SamplerInfo","UBOShadow","globalDescriptorSetLayout","PipelineGlobalBindings","_samplerLinearInfo","LINEAR","NONE","CLAMP","_samplerPointInfo","POINT","GlobalDSManager","pipeline","_device","_descriptorSetMap","Map","_globalDescriptorSet","_descriptorSetLayout","_linearSampler","_pointSampler","device","getSampler","layoutInfo","bindings","createDescriptorSetLayout","createDescriptorSet","bindBuffer","binding","buffer","it","values","res","next","done","descriptorSet","value","bindSampler","sampler","bindTexture","texture","update","getOrCreateDescriptorSet","idx","has","globalDescriptorSet","set","i","UBO_GLOBAL","COUNT","getBuffer","getTexture","shadowUBO","createBuffer","UNIFORM","TRANSFER_DST","HOST","DEVICE","SIZE","BINDING","get","destroy"],"mappings":"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"}