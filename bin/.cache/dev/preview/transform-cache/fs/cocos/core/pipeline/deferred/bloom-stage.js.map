{"version":3,"sources":["../../../../../../../../../../cocos/core/pipeline/deferred/bloom-stage.ts"],"names":["ccclass","displayOrder","serializable","type","SetIndex","Material","BufferInfo","BufferUsageBit","ClearFlagBit","Color","MemoryUsageBit","Rect","PipelineStateManager","RenderStage","CommonStagePriority","MAX_BLOOM_FILTER_PASS_NUM","BLOOM_COMBINEPASS_INDEX","BLOOM_DOWNSAMPLEPASS_INDEX","BLOOM_PREFILTERPASS_INDEX","BLOOM_UPSAMPLEPASS_INDEX","colors","UBOBloom","TEXTURE_SIZE_OFFSET","COUNT","SIZE","BloomStage","threshold","intensity","iterations","_renderArea","_bloomUBO","initialize","info","activate","pipeline","flow","_bloomMaterial","pipelineSceneData","bloomMaterial","destroy","render","camera","_pipeline","generateBloomRenderData","window","swapchain","macros","CC_PIPELINE_TYPE","bloomEnabled","renderObjects","length","passNumber","i","device","createBuffer","UNIFORM","TRANSFER_DST","HOST","DEVICE","clearFlag","COLOR","x","clearColor","y","z","w","_prefilterPass","_downsamplePass","_upsamplePass","_combinePass","generateRenderArea","width","height","cmdBuff","commandBuffers","sceneData","builtinBloomProcess","pass","passes","renderData","getPipelineRenderData","bloomData","bloom","textureSize","Float32Array","updateBuffer","beginRenderPass","renderPass","prefilterFramebuffer","bindDescriptorSet","GLOBAL","descriptorSet","bindBuffer","bindTexture","outputRenderTargets","bindSampler","sampler","update","MATERIAL","inputAssembler","quadIAOffscreen","quadIAOnscreen","pso","shader","getShaderVariant","getOrCreatePipelineState","bindPipelineState","bindInputAssembler","draw","endRenderPass","downsampleFramebuffers","prefiterTex","downsampleTexs","index","upsampleFramebuffers","upsampleTexs","deferredData","uboIndex","combineFramebuffer","initInfo","name","priority","BLOOM","tag"],"mappings":"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"}