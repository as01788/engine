{"version":3,"sources":["../../../../../../../../../cocos/core/asset-manager/utilities.ts"],"names":["setDefaultProgressCallback","onProgress","defaultProgressCallback","clear","task","clearRef","i","l","input","length","item","isNative","content","Asset","decRef","recycle","urlAppendTimestamp","url","append","test","Date","now","retry","process","times","wait","onComplete","index","err","result","setTimeout","getDepends","uuid","data","exclude","depends","config","info","dependUtil","parse","deps","dep","push","bundle","name","nativeDep","e","error","message","stack","cache","id","asset","cacheAsset","undefined","legacyCC","assetManager","isScene","isDefault","assets","add","setProperties","assetsMap","missingAsset","dependMap","get","missingAssetReporter","depend","dependAsset","EDITOR","EditorExtends","MissingReporter","object","stashByOwner","owner","prop","serialize","asAsset","type","placeHolder","initDefault","addRef","reference","references","WeakRef","reportByOwner","nativeDependMap","has","_nativeAsset","console","gatherAsset","source","options","__outputAsArray__","output","forEach","array","count","errs","cb","parseParameters","optionsOut","onProgressOut","onCompleteOut","isCallback","Object","create","parseLoadResArgs","typeOut","isValidType","js","isChildClassOf","checkCircleReference","map","checked","getDeps","asyncify","p1","p2","refs","Array","isArray","x","callInNextTick"],"mappings":"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"}