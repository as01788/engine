{"version":3,"sources":["../../../../../../../../../../cocos/core/pipeline/forward/forward-pipeline.ts"],"names":["ccclass","displayOrder","type","serializable","EDITOR","RenderPipeline","ForwardFlow","RenderTextureConfig","ShadowFlow","UBOGlobal","UBOShadow","UBOCamera","UNIFORM_SHADOWMAP_BINDING","UNIFORM_SPOT_LIGHTING_MAP_TEXTURE_BINDING","builtinResMgr","errorID","PipelineSceneData","PIPELINE_TYPE","ForwardPipeline","_postRenderPass","initialize","info","_flows","length","shadowFlow","initInfo","push","forwardFlow","activate","swapchain","console","_macros","CC_PIPELINE_TYPE","_pipelineSceneData","_activeRenderer","_ensureEnoughSize","cameras","newWidth","_width","newHeight","_height","i","window","Math","max","width","height","destroy","_destroyUBOs","_destroyQuadInputAssembler","rpIter","_renderPasses","values","rpRes","next","done","value","_commandBuffers","device","commandBuffer","shadowMapSampler","globalDSManager","pointSampler","_descriptorSet","bindSampler","bindTexture","get","getGFXTexture","update","getBuffer","BINDING","getTexture"],"mappings":"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"}