{"version":3,"sources":["../../../../../../../../../../cocos/core/pipeline/deferred/deferred-pipeline-scene-data.ts"],"names":["JSB","MAX_BLOOM_FILTER_PASS_NUM","Material","PipelineSceneData","macro","AntiAliasing","BLOOM_PREFILTERPASS_INDEX","BLOOM_DOWNSAMPLEPASS_INDEX","BLOOM_UPSAMPLEPASS_INDEX","BLOOM_COMBINEPASS_INDEX","DeferredPipelineSceneData","_antiAliasing","NONE","onGlobalPipelineStateChanged","updatePipelinePassInfo","updateBloomPass","_bloomMaterial","prefilterPass","passes","beginChangeStatesSilently","tryCompile","endChangeStatesSilently","downsamplePasses","upsamplePasses","i","downsamplePass","upsamplePass","push","combinePass","_nativeObj","bloomPrefilterPassShader","getShaderVariant","bloomPrefilterPass","bloomDownsamplePassShader","bloomDownsamplePass","bloomUpsamplePassShader","bloomUpsamplePass","bloomCombinePassShader","bloomCombinePass","updatePostProcessPass","postprocessMaterial","passPost","pipelinePostPassShader","pipelinePostPass","initPipelinePassInfo","deferredMat","_uuid","initialize","effectName","length","_deferredLightingMaterial","bloomMat","postMat","ENABLE_ANTIALIAS_FXAA","FXAA","defines","ANTIALIAS_TYPE","_postprocessMaterial","updateDeferredPassInfo","activate","device","pipeline","updateDeferredLightPass","shadows","enabled","_pipeline","macros","CC_RECEIVE_SHADOW","passLit","deferredLightPassShader","deferredLightPass","value","Object","assign","renderMat","effectAsset","mat"],"mappings":"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"}