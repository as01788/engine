{"version":3,"sources":["file:///Users/disstian/Documents/CreatorProjects/engine3.3.0/pal/audio/minigame/player-web.ts"],"names":["audioContext","minigame","tt","getAudioContext","OneShotAudioWeb","onPlay","_onPlayCb","cb","onEnd","_onEndCb","constructor","audioBuffer","volume","url","_bufferSourceNode","_url","createBufferSource","buffer","loop","gainNode","createGain","gain","value","connect","destination","play","start","onended","audioBufferManager","tryReleasingCache","stop","AudioPlayerWeb","_src","_audioBuffer","_sourceNode","_gainNode","_volume","_loop","_state","AudioState","INIT","_audioTimer","_readyToHandleOnShow","_eventTarget","EventTarget","_operationQueue","AudioTimer","systemInfo","on","_onHide","_onShow","destroy","off","PLAYING","pause","then","INTERRUPTED","emit","AudioEvent","INTERRUPTION_BEGIN","catch","e","once","INTERRUPTION_END","load","Promise","resolve","loadNative","reject","cachedAudioBuffer","getCache","retainCache","fsUtils","readArrayBuffer","err","arrayBuffer","decodeAudioData","decodedAudioBuffer","addCache","loadOneShotAudio","oneShotAudio","src","type","AudioType","WEB_AUDIO","state","val","duration","currentTime","seek","time","_doPlay","_stopSourceNode","ENDED","PAUSED","STOPPED","onInterruptionBegin","offInterruptionBegin","onInterruptionEnd","offInterruptionEnd","onEnded","offEnded","enqueueOperation"],"mappings":"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"}