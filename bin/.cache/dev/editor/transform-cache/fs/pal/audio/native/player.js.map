{"version":3,"sources":["file:///Users/disstian/Documents/CreatorProjects/engine3.3.0/pal/audio/native/player.ts"],"names":["urlCount","audioEngine","jsb","AudioEngine","INVALID_AUDIO_ID","OneShotAudio","onPlay","_onPlayCb","cb","onEnd","_onEndCb","constructor","url","volume","_id","_url","_volume","play","play2d","setFinishCallback","stop","AudioPlayer","_state","AudioState","INIT","_eventTarget","EventTarget","_operationQueue","_cachedState","duration","loop","currentTime","systemInfo","on","_onHide","_onShow","destroy","uncache","PLAYING","pause","then","INTERRUPTED","emit","AudioEvent","INTERRUPTION_BEGIN","catch","e","INTERRUPTION_END","load","Promise","resolve","reject","loadNative","err","platform","Platform","WIN32","preload","isSuccess","Error","loadOneShotAudio","_isValid","src","type","AudioType","NATIVE_AUDIO","state","isLoop","val","setLoop","getVolume","setVolume","getDuration","getCurrentTime","seek","time","setCurrentTime","PAUSED","resume","ENDED","STOPPED","onInterruptionBegin","offInterruptionBegin","off","onInterruptionEnd","offInterruptionEnd","onEnded","offEnded","maxAudioChannel","getMaxAudioInstance","enqueueOperation","legacyCC"],"mappings":"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"}