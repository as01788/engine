{"version":3,"sources":["file:///Users/disstian/Documents/CreatorProjects/engine3.3.0/pal/audio/web/player-dom.ts"],"names":["ensurePlaying","domAudio","Promise","resolve","promise","play","undefined","then","catch","onGesture","e","canvas","document","getElementById","addEventListener","once","OneShotAudioDOM","onPlay","_onPlayCb","cb","onEnd","_onEndCb","_domAudio","removeEventListener","constructor","nativeAudio","volume","stop","pause","AudioPlayerDOM","_state","AudioState","INIT","_onEnded","_eventTarget","EventTarget","_operationQueue","systemInfo","on","_onHide","_onShow","seek","emit","AudioEvent","ENDED","destroy","off","load","url","loadNative","reject","createElement","loadedEvent","os","OS","IOS","browserType","BrowserType","FIREFOX","timer","setTimeout","readyState","failure","success","clearEvent","clearTimeout","message","src","loadOneShotAudio","oneShotAudio","PLAYING","INTERRUPTED","INTERRUPTION_BEGIN","INTERRUPTION_END","type","AudioType","DOM_AUDIO","state","loop","val","duration","currentTime","time","PAUSED","STOPPED","onInterruptionBegin","offInterruptionBegin","onInterruptionEnd","offInterruptionEnd","onEnded","offEnded","enqueueOperation"],"mappings":"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"}