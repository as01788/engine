{"version":3,"sources":["file:///Users/disstian/Documents/CreatorProjects/engine3.3.0/pal/screen-adapter/web/screen-adapter.ts"],"names":["EVENT_TIMEOUT","EDITOR","orientationMap","auto","Orientation","AUTO","landscape","LANDSCAPE","portrait","PORTRAIT","WindowType","ScreenAdapter","EventTarget","supportFullScreen","_supportFullScreen","isFullScreen","document","_fn","fullscreenElement","devicePixelRatio","window","windowSize","result","_windowSizeInCssPixels","dpr","width","height","size","_windowType","SubFrame","_resizeFrame","_convertToSizeInCssPixels","resolution","resolutionScale","Size","_resolutionScale","v","_cbToUpdateFrameBuffer","orientation","_orientation","value","_updateFrameState","safeAreaEdge","top","bottom","left","right","isProportionalToFrame","_isProportionalToFrame","_updateContainer","TEST","innerWidth","innerHeight","_gameContainer","clientWidth","clientHeight","fullscreenTarget","_gameFrame","Fullscreen","_getFullscreenTarget","isFrameRotated","BrowserWindow","Unknown","_exactFitScreen","constructor","handleResizeEvent","_gameCanvas","_cachedFrameStyle","_cachedContainerStyle","_touchEventName","_onFullscreenChange","_onFullscreenError","_orientationChangeTimeoutId","_cachedFrameSize","_fnGroup","getElementById","createElement","setAttribute","parentNode","insertBefore","appendChild","fnList","fnGroup","i","length","requestFullscreen","undefined","_registerEvent","init","options","cbToRebuildFrameBuffer","configOrientation","exactFitScreen","requestFullScreen","Promise","resolve","reject","_doRequestFullScreen","then","catch","Error","addEventListener","once","capture","exitFullScreen","requestPromise","exitFullscreen","fullscreenerror","matchMedia","updateDPRChangeListener","emit","clearTimeout","setTimeout","fullscreenchange","clonedSize","clone","sizeInCssPixels","style","display","winWidth","winHeight","transform","transformOrigin","margin","windowType","body","isBrowserLandscape","systemInfo","isMobile","designedResolution","legacyCC","view","getDesignResolutionSize","frame","frameW","frameH","designW","designH","scaleX","scaleY","containerStyle","containerW","containerH","screenAdapter"],"mappings":"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"}