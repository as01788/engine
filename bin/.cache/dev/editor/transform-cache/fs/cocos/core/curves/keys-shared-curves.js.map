{"version":3,"sources":["file:///Users/disstian/Documents/CreatorProjects/engine3.3.0/cocos/core/curves/keys-shared-curves.ts"],"names":["DEFAULT_EPSILON","DefaultFloatArray","Float32Array","KeysSharedCurves","constructor","times","_times","nKeyframes","length","_keyframesCount","from","EPSILON","lastDiff","mayBeOptimized","iFrame","curDiff","Math","abs","_optimized","keyframesCount","matchTimes","firstTime","diff","every","t","iKeyframe","getFirstTime","getLastTime","calculateLocation","time","out","optimized","div","previous","floor","ratio","index","iNext","iPrev","prevTime","serializable","globalLocation","KeySharedRealCurves","allowedForCurve","curve","postExtrapolation","ExtrapolationMode","CLAMP","preExtrapolation","Array","values","value","interpolationMode","RealInterpolationMode","LINEAR","curveCount","_curves","matchCurve","keyFramesCount","addCurve","push","map","evaluate","curves","nCurves","iCurve","lastTime","iLastFrame","curveValues","cacheQuat1","Quat","cacheQuat2","KeySharedQuatCurves","QuatInterpolationMode","SLERP","toArray","getKeyframeValue","fromArray","q1","q2","slerp"],"mappings":"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"}