{"version":3,"sources":["file:///Users/disstian/Documents/CreatorProjects/engine3.3.0/cocos/core/pipeline/deferred/postprocess-stage.ts"],"names":["colors","Color","PostProcessStage","Material","RenderQueueDesc","RenderStage","constructor","_renderArea","Rect","_uiPhase","UIPhase","initialize","info","activate","pipeline","flow","_postProcessMaterial","pipelineSceneData","postprocessMaterial","destroy","render","camera","_pipeline","device","sceneData","cmdBuff","commandBuffers","pipelineUBO","updateCameraUBO","vp","viewport","x","window","width","y","height","renderData","getPipelineRenderData","framebuffer","swapchain","renderPass","getRenderPass","clearFlag","ClearFlagBit","COLOR","clearColor","z","w","beginRenderPass","clearDepth","clearStencil","bindDescriptorSet","SetIndex","GLOBAL","descriptorSet","builtinPostProcess","pass","passes","shader","getShaderVariant","bloomEnabled","bindTexture","bloom","combineTex","outputRenderTargets","bindSampler","sampler","update","MATERIAL","inputAssembler","quadIAOnscreen","quadIAOffscreen","pso","PipelineStateManager","getOrCreatePipelineState","renderObjects","length","bindPipelineState","bindInputAssembler","draw","profiler","endRenderPass","initInfo","name","priority","CommonStagePriority","POST_PROCESS","tag","serializable"],"mappings":"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"}