{"version":3,"sources":["file:///Users/disstian/Documents/CreatorProjects/engine3.3.0/cocos/core/pipeline/global-descriptor-set-manager.ts"],"names":["_samplerLinearInfo","SamplerInfo","Filter","LINEAR","NONE","Address","CLAMP","_samplerPointInfo","POINT","GlobalDSManager","descriptorSetMap","_descriptorSetMap","linearSampler","_linearSampler","pointSampler","_pointSampler","descriptorSetLayout","_descriptorSetLayout","globalDescriptorSet","_globalDescriptorSet","constructor","pipeline","_device","Map","device","getSampler","layoutInfo","DescriptorSetLayoutInfo","globalDescriptorSetLayout","bindings","createDescriptorSetLayout","createDescriptorSet","DescriptorSetInfo","bindBuffer","binding","buffer","it","values","res","next","done","descriptorSet","value","bindSampler","sampler","bindTexture","texture","update","getOrCreateDescriptorSet","idx","has","set","i","PipelineGlobalBindings","UBO_GLOBAL","COUNT","getBuffer","getTexture","shadowUBO","createBuffer","BufferInfo","BufferUsageBit","UNIFORM","TRANSFER_DST","MemoryUsageBit","HOST","DEVICE","UBOShadow","SIZE","BINDING","get","destroy"],"mappings":"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"}