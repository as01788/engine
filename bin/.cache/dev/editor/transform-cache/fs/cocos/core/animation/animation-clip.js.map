{"version":3,"sources":["file:///Users/disstian/Documents/CreatorProjects/engine3.3.0/cocos/core/animation/animation-clip.ts"],"names":["searchForRootBonePathSymbol","Symbol","exoticAnimationTag","AnimationClip","Asset","frameRate","_legacyData","undefined","_legacyDataDirty","_runtimeEvents","ratios","eventGroups","createWithSpriteFrames","spriteFrames","sample","clip","duration","length","step","track","ObjectTrack","path","TrackPath","toComponent","toProperty","curve","channels","assignSorted","map","spriteFrame","index","addTrack","_duration","value","tracksCount","_tracks","tracks","hash","_hash","hashString","_exoticAnimation","toHashString","events","_events","sort","a","b","frame","nEvents","iEvent","eventData","ratio","i","findIndex","r","push","functionName","func","parameters","params","onLoaded","range","min","Infinity","max","nTracks","iTrack","trackRange","Math","getTrack","removeTrack","splice","clearTracks","createEventEvaluator","targetNode","EventEvaluator","wrapMode","createEvaluator","context","target","binder","binding","trackTarget","createRuntimeBinding","enableTrsBlending","pose","_createEvalWithBinder","rootMotion","destroy","legacyCC","director","root","dataPoolManager","releaseAnimationClip","SkelAnimDataHub","BAKE_SKELETON_CURVE_SYMBOL","start","samples","frames","animatedJoints","_collectAnimatedJoints","nAnimatedJoints","jointsBakeInfo","iAnimatedJoint","joint","transforms","Array","from","Mat4","skeletonFrames","reduce","result","BoneGlobalTransform","skeletonFrame","parentJoint","lastIndexOf","parentJointName","substring","parentJointFrame","parent","trsPath","parseTrsPath","jointFrame","node","createBoneTransformBinding","property","evaluator","iFrame","time","evaluate","copy","globalTransform","invalidate","joints","upgradeUntypedTracks","refine","newTracks","removals","UntypedTrack","newTrack","upgrade","nRemovalTracks","iRemovalTrack","array","remove","_searchForRootBonePath","keys","_getLegacyData","curves","commonTargets","data","getPropertyCurves","updateEventDatas","hasEvents","syncLegacyData","_fromLegacy","rootMotionOptions","rootMotionTrackExcludes","rootMotionEvaluation","_createRootMotionEvaluation","trackEvalStatues","exoticAnimationEvaluator","includes","every","keyFramesCount","trackBindingTag","trackEval","createEvalSymbol","evaluation","AnimationClipEvaluation","Node","rootBonePath","rootBone","getChildByPath","boneTransform","BoneTransform","rootMotionsTrackEvaluations","trackBinding","bonePath","RootMotionEvaluation","paths","nodePath","rank","split","iNonEmptyPath","p","nPaths","firstPath","highestPathsAreSame","iPath","_toLegacy","legacyCurves","legacyClipData","legacy","AnimationClipLegacyData","legacyData","toTracks","nNewTracks","iNewTrack","Set","add","collectAnimatedJoints","WrapMode","AnimationWrapMode","serializable","Normal","constructor","trackEvalStatuses","_exoticAnimationEvaluator","_trackEvalStatues","_rootMotionEvaluation","nTrackEvalStatuses","iTrackEvalStatus","setValue","evaluateRootMotion","motionLength","position","Vec3","scale","rotation","Quat","eulerAngles","getTransform","out","fromRTS","_dirty","_transform","transform","multiply","motionTransformCache","_rootBone","_boneTransform","_trackEvalStatuses","_initialTransformCache","_clipEndTransformCache","_startTransformCache","_endTransformCache","_motionTransformCache","_translationMotionCache","_rotationMotionCache","_scaleMotionCache","motionTransform","_calcMotionTransform","translationMotion","rotationMotion","scaleMotion","toRTS","setPosition","setRotation","setScale","outTransform","remainLength","startTransform","_evaluateAt","endTransform","relativeTransform","identity","accumulateMotionTransform","to","diff","repeatCount","floor","lastRemainTime","clipStartTransform","clipEndTransform","invert","InvalidIndex","_targetNode","_ratios","_eventGroups","_wrapMode","_lastFrameIndex","_lastIterations","_lastDirection","_ignoreIndex","_sampled","setWrapMode","ignore","direction","frameIndex","getEventGroupIndexAtRatio","iterations","eventIndex","_doFire","currentIterations","wrapIterations","lastIterations","lastIndex","lastDirection","iterationsChanged","WrapModeMask","PingPong","delay","getAnimationManager","pushDelayEvent","_checkAndFire","isValid","eventGroup","components","event","nComponents","iComponent","component","fx","apply"],"mappings":"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"}