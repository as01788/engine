{"version":3,"sources":["file:///Users/disstian/Documents/CreatorProjects/engine3.3.0/cocos/core/gfx/webgl2/webgl2-buffer.ts"],"names":["WebGL2Buffer","Buffer","_gpuBuffer","gpuBuffer","initialize","info","_isBufferView","buffer","_usage","usage","_memUsage","memUsage","_size","_stride","range","_count","_flags","flags","size","stride","indirects","glTarget","glBuffer","glOffset","offset","Math","max","WebGL2IndirectDrawInfos","WebGL2DeviceManager","instance","memoryStatus","bufferSize","destroy","resize","console","warn","oldSize","update","buffSize","undefined","BufferUsageBit","INDIRECT","byteLength"],"mappings":"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"}