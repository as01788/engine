{"version":3,"sources":["file:///Users/disstian/Documents/CreatorProjects/engine3.3.0/cocos/core/pipeline/render-queue.ts"],"names":["opaqueCompareFn","a","b","hash","depth","shaderId","transparentCompareFn","RenderQueue","constructor","desc","queue","_passDesc","_passPool","RecyclePool","subModel","passIdx","CachedArray","sortFunc","clear","reset","insertRenderPass","renderObj","subModelIdx","model","subModels","pass","passes","shader","shaders","isTransparent","blendState","targets","blend","phase","phases","priority","rp","add","typedID","push","sort","recordCommandBuffer","device","renderPass","cmdBuff","i","length","array","inputAssembler","pso","PipelineStateManager","getOrCreatePipelineState","bindPipelineState","bindDescriptorSet","SetIndex","MATERIAL","descriptorSet","LOCAL","bindInputAssembler","draw","convertRenderQueue","j","stages","sortMode","RenderQueueSortMode","BACK_TO_FRONT","FRONT_TO_BACK","renderQueueClearFunc","rq","renderQueueSortFunc"],"mappings":"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"}