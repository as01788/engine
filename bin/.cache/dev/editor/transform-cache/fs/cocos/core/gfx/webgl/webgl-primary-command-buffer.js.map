{"version":3,"sources":["file:///Users/disstian/Documents/CreatorProjects/engine3.3.0/cocos/core/gfx/webgl/webgl-primary-command-buffer.ts"],"names":["WebGLPrimaryCommandBuffer","WebGLCommandBuffer","beginRenderPass","renderPass","framebuffer","renderArea","clearColors","clearDepth","clearStencil","WebGLDeviceManager","instance","gpuRenderPass","gpuFramebuffer","_isInRenderPass","draw","infoOrAssembler","_isStateInvalied","bindStates","info","drawInfo","_numDrawCalls","_numInstances","instanceCount","indexCount","vertexCount","_curGPUPipelineState","glPrimitive","_numTris","Math","max","console","error","setViewport","viewport","stateCache","cache","gl","left","top","width","height","setScissor","scissor","scissorRect","x","y","updateBuffer","buffer","data","size","gpuBuffer","buffSize","undefined","usage","BufferUsageBit","INDIRECT","byteLength","copyBuffersToTexture","buffers","texture","regions","gpuTexture","execute","cmdBuffs","count","i","webGLCmdBuff","cmdPackage","_curGPUInputAssembler","_curGPUDescriptorSets","_curDynamicOffsets","_curDynamicStates"],"mappings":"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"}