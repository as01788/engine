{"version":3,"sources":["file:///Users/disstian/Documents/CreatorProjects/engine3.3.0/cocos/core/renderer/scene/render-scene.ts"],"names":["RenderScene","root","_root","name","_name","cameras","_cameras","mainLight","_mainLight","sphereLights","_sphereLights","spotLights","_spotLights","models","_models","native","_nativeObj","batches","_batches","registerCreateFunc","_createSceneFun","constructor","_directionalLights","_modelId","_createNativeObject","initialize","info","activate","JSB","update","stamp","nativeBatches","i","len","length","push","updateBatches","light","model","enabled","updateTransform","updateUBOs","_destroy","destroy","removeCameras","removeSphereLights","removeSpotLights","removeModels","addCamera","cam","attachToScene","removeCamera","camera","splice","detachFromScene","setMainLight","dl","unsetMainLight","dlList","node","hasChangedFlags","TransformBit","ROTATION","addDirectionalLight","removeDirectionalLight","addSphereLight","pl","removeSphereLight","addSpotLight","sl","removeSpotLight","addModel","m","type","ModelType","SKINNING","addSkinningModel","BAKED_SKINNING","addBakedSkinningModel","DEFAULT","removeModel","addBatch","batch","removeBatch","removeBatches","onGlobalPipelineStateChanged","generateModelId","NativeRenderScene"],"mappings":"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"}