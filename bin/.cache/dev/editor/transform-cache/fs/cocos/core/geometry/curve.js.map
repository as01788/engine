{"version":3,"sources":["file:///Users/disstian/Documents/CreatorProjects/engine3.3.0/cocos/core/geometry/curve.ts"],"names":["LOOK_FORWARD","Keyframe","time","value","inTangent","outTangent","CCClass","fastDefine","OptimizedKey","constructor","index","endTime","coefficient","Float32Array","evaluate","T","t","evalOptCurve","coefs","AnimationCurve","_internalCurve","_curve","keyFrames","Array","from","keyframes","map","legacyKeyframe","leftTangent","rightTangent","assignSorted","legacyCurve","interpolationMode","RealInterpolationMode","CUBIC","preWrapMode","toLegacyWrapMode","preExtrapolation","fromLegacyWrapMode","postWrapMode","postExtrapolation","cachedKey","RealCurve","curve","ExtrapolationMode","LOOP","CLAMP","addKey","keyFrame","clear","addKeyFrame","evaluate_slow","nKeyframes","keyFramesCount","lastKeyframeIndex","wrappedTime","extrapolationMode","startTime","getKeyframeTime","PING_PONG","leftIndex","findIndex","rightIndex","Math","min","calcOptimizedKey","optKey","lhsTime","rhsTime","lhsValue","lhsOutTangent","getKeyframeValue","rhsValue","rhsInTangent","dx","dy","length","d1","d2","cachedIndex","cachedTime","i","currIndex","left","right","mid","floor","defaultKF","serializable","legacyWrapMode","WrapModeMask","Default","Normal","Clamp","PingPong","Loop","LINEAR","constructLegacyCurveAndConvert"],"mappings":"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"}