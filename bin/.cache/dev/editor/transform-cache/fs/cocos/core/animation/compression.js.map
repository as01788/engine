{"version":3,"sources":["file:///Users/disstian/Documents/CreatorProjects/engine3.3.0/cocos/core/animation/compression.ts"],"names":["removeLinearKeys","keys","values","maxDiff","nKeys","length","slice","removeFlags","Array","fill","iLastKey","iKey","iPrevious","iNext","previousKey","currentKey","nextKey","previousValue","currentValue","nextValue","alpha","expectedValue","filterFromRemoveFlags","removeTrivialKeys","nRemovals","reduce","n","removeFlag","nNewKeyframes","newKeys","newValues","iNewKeys"],"mappings":"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"}