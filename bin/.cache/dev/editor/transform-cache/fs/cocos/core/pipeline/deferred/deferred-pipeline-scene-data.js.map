{"version":3,"sources":["file:///Users/disstian/Documents/CreatorProjects/engine3.3.0/cocos/core/pipeline/deferred/deferred-pipeline-scene-data.ts"],"names":["AntiAliasing","BLOOM_PREFILTERPASS_INDEX","BLOOM_DOWNSAMPLEPASS_INDEX","BLOOM_UPSAMPLEPASS_INDEX","MAX_BLOOM_FILTER_PASS_NUM","BLOOM_COMBINEPASS_INDEX","DeferredPipelineSceneData","PipelineSceneData","_antiAliasing","NONE","antiAliasing","value","_postprocessMaterial","defines","passes","Object","assign","ANTIALIAS_TYPE","renderMat","Material","initialize","effectAsset","i","length","tryCompile","bloomMaterial","_bloomMaterial","mat","updatePipelinePassInfo","postprocessMaterial","onGlobalPipelineStateChanged","updateBloomPass","prefilterPass","beginChangeStatesSilently","endChangeStatesSilently","downsamplePasses","upsamplePasses","downsamplePass","upsamplePass","push","native","combinePass","JSB","_nativeObj","bloomPrefilterPassShader","getShaderVariant","bloomPrefilterPass","bloomDownsamplePassShader","bloomDownsamplePass","bloomUpsamplePassShader","bloomUpsamplePass","bloomCombinePassShader","bloomCombinePass","updatePostProcessPass","passPost","pipelinePostPassShader","pipelinePostPass","initPipelinePassInfo","deferredMat","_uuid","effectName","_deferredLightingMaterial","bloomMat","postMat","macro","ENABLE_ANTIALIAS_FXAA","FXAA","deferredLightingMaterial","updateDeferredPassInfo","activate","device","pipeline","updateDeferredLightPass","shadows","enabled","_pipeline","macros","CC_RECEIVE_SHADOW","passLit","deferredLightPassShader","deferredLightPass"],"mappings":";;;;;;;AAyBA;;AAEA;;AACA;;AACA;;AACA;;AA9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAUA;IACYA,Y;;;WAAAA,Y;AAAAA,EAAAA,Y,CAAAA,Y;AAAAA,EAAAA,Y,CAAAA,Y;GAAAA,Y,4BAAAA,Y;;AAIL,MAAMC,yBAAyB,GAAG,CAAlC;;AACA,MAAMC,0BAA0B,GAAG,CAAnC;;AACA,MAAMC,wBAAwB,GAAGD,0BAA0B,GAAGE,yCAA9D;;AACA,MAAMC,uBAAuB,GAAGF,wBAAwB,GAAGC,yCAA3D;;;AACA,MAAME,yBAAN,SAAwCC,oCAAxC,CAA0D;AAAA;AAAA;AAAA,SACnDC,aADmD,GACrBR,YAAY,CAACS,IADQ;AAAA;;AAE7C,MAAZC,YAAY,CAAEC,KAAF,EAAuB;AACnC,SAAKH,aAAL,GAAqBG,KAArB;;AACA,QAAI,KAAKC,oBAAT,EAA+B;AAC3B,YAAMC,OAAO,GAAG,KAAKD,oBAAL,CAA0BE,MAA1B,CAAiC,CAAjC,EAAoCD,OAApD;AACAE,MAAAA,MAAM,CAACC,MAAP,CAAcH,OAAd,EAAuB;AAAEI,QAAAA,cAAc,EAAEN;AAAlB,OAAvB;AACA,YAAMO,SAAS,GAAG,IAAIC,eAAJ,EAAlB;AACAD,MAAAA,SAAS,CAACE,UAAV,CAAqB;AACjBC,QAAAA,WAAW,EAAE,KAAKT,oBAAL,CAA0BS,WADtB;AAEjBR,QAAAA;AAFiB,OAArB;;AAIA,WAAK,IAAIS,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGJ,SAAS,CAACJ,MAAV,CAAiBS,MAArC,EAA6C,EAAED,CAA/C,EAAkD;AAC9CJ,QAAAA,SAAS,CAACJ,MAAV,CAAiBQ,CAAjB,EAAoBE,UAApB;AACH;;AACD,WAAKZ,oBAAL,GAA4BM,SAA5B;AACH;AACJ;;AAEe,MAAZR,YAAY,GAAI;AAChB,WAAO,KAAKF,aAAZ;AACH;;AAEuB,MAAbiB,aAAa,GAAI;AACxB,WAAO,KAAKC,cAAZ;AACH;;AAEuB,MAAbD,aAAa,CAAEE,GAAF,EAAiB;AACrC,QAAI,KAAKD,cAAL,KAAwBC,GAAxB,IAA+B,CAACA,GAApC,EAAyC;AACzC,SAAKD,cAAL,GAAsBC,GAAtB;AACA,SAAKC,sBAAL;AACH;;AAG6B,MAAnBC,mBAAmB,GAAI;AAC9B,WAAO,KAAKjB,oBAAZ;AACH;;AAE6B,MAAnBiB,mBAAmB,CAAEF,GAAF,EAAiB;AAC3C,QAAI,KAAKf,oBAAL,KAA8Be,GAA9B,IAAqC,CAACA,GAA1C,EAA+C;AAC/C,SAAKf,oBAAL,GAA4Be,GAA5B;AACA,SAAKC,sBAAL;AACH;;AAGME,EAAAA,4BAA4B,GAAI;AACnC,SAAKF,sBAAL;AACH;;AAEOG,EAAAA,eAAe,GAAI;AACvB,QAAI,CAAC,KAAKL,cAAV,EAA0B;AAE1B,UAAMM,aAAa,GAAG,KAAKN,cAAL,CAAoBZ,MAApB,CAA2Bb,yBAA3B,CAAtB;AACA+B,IAAAA,aAAa,CAACC,yBAAd;AACAD,IAAAA,aAAa,CAACR,UAAd;AACAQ,IAAAA,aAAa,CAACE,uBAAd;AAEA,UAAMC,gBAA+B,GAAG,EAAxC;AACA,UAAMC,cAA6B,GAAG,EAAtC;;AACA,SAAK,IAAId,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGlB,yCAApB,EAA+C,EAAEkB,CAAjD,EAAoD;AAChD,YAAMe,cAAc,GAAG,KAAKX,cAAL,CAAoBZ,MAApB,CAA2BZ,0BAA0B,GAAGoB,CAAxD,CAAvB;AACAe,MAAAA,cAAc,CAACJ,yBAAf;AACAI,MAAAA,cAAc,CAACb,UAAf;AACAa,MAAAA,cAAc,CAACH,uBAAf;AAEA,YAAMI,YAAY,GAAG,KAAKZ,cAAL,CAAoBZ,MAApB,CAA2BX,wBAAwB,GAAGmB,CAAtD,CAArB;AACAgB,MAAAA,YAAY,CAACL,yBAAb;AACAK,MAAAA,YAAY,CAACd,UAAb;AACAc,MAAAA,YAAY,CAACJ,uBAAb;AAEAC,MAAAA,gBAAgB,CAACI,IAAjB,CAAsBF,cAAc,CAACG,MAArC;AACAJ,MAAAA,cAAc,CAACG,IAAf,CAAoBD,YAAY,CAACE,MAAjC;AACH;;AAED,UAAMC,WAAW,GAAG,KAAKf,cAAL,CAAoBZ,MAApB,CAA2BT,uBAA3B,CAApB;AACAoC,IAAAA,WAAW,CAACR,yBAAZ;AACAQ,IAAAA,WAAW,CAACjB,UAAZ;AACAiB,IAAAA,WAAW,CAACP,uBAAZ;;AAEA,QAAIQ,0BAAJ,EAAS;AACL,WAAKC,UAAL,CAAiBC,wBAAjB,GAA4CZ,aAAa,CAACa,gBAAd,EAA5C;AACA,WAAKF,UAAL,CAAiBG,kBAAjB,GAAsCd,aAAa,CAACQ,MAApD;AACA,WAAKG,UAAL,CAAiBI,yBAAjB,GAA6C,KAAKrB,cAAL,CAAoBZ,MAApB,CAA2BZ,0BAA3B,EAAuD2C,gBAAvD,EAA7C;AACA,WAAKF,UAAL,CAAiBK,mBAAjB,GAAuCb,gBAAvC;AACA,WAAKQ,UAAL,CAAiBM,uBAAjB,GAA2C,KAAKvB,cAAL,CAAoBZ,MAApB,CAA2BX,wBAA3B,EAAqD0C,gBAArD,EAA3C;AACA,WAAKF,UAAL,CAAiBO,iBAAjB,GAAqCd,cAArC;AACA,WAAKO,UAAL,CAAiBQ,sBAAjB,GAA0CV,WAAW,CAACI,gBAAZ,EAA1C;AACA,WAAKF,UAAL,CAAiBS,gBAAjB,GAAoCX,WAAW,CAACD,MAAhD;AACH;AACJ;;AAEOa,EAAAA,qBAAqB,GAAI;AAC7B,QAAI,CAAC,KAAKxB,mBAAV,EAA+B;AAE/B,UAAMyB,QAAQ,GAAG,KAAKzB,mBAAL,CAAyBf,MAAzB,CAAgC,CAAhC,CAAjB;AACAwC,IAAAA,QAAQ,CAACrB,yBAAT;AACAqB,IAAAA,QAAQ,CAAC9B,UAAT;AACA8B,IAAAA,QAAQ,CAACpB,uBAAT;;AAEA,QAAIQ,0BAAJ,EAAS;AACL,WAAKC,UAAL,CAAiBY,sBAAjB,GAA0CD,QAAQ,CAACT,gBAAT,EAA1C;AACA,WAAKF,UAAL,CAAiBa,gBAAjB,GAAoCF,QAAQ,CAACd,MAA7C;AACH;AACJ;;AAEMiB,EAAAA,oBAAoB,GAAI;AAC3B;AACA,UAAMC,WAAW,GAAG,IAAIvC,eAAJ,EAApB;AACAuC,IAAAA,WAAW,CAACC,KAAZ,GAAoB,2BAApB;AACAD,IAAAA,WAAW,CAACtC,UAAZ,CAAuB;AAAEwC,MAAAA,UAAU,EAAE;AAAd,KAAvB;;AACA,SAAK,IAAItC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGoC,WAAW,CAAC5C,MAAZ,CAAmBS,MAAvC,EAA+C,EAAED,CAAjD,EAAoD;AAChDoC,MAAAA,WAAW,CAAC5C,MAAZ,CAAmBQ,CAAnB,EAAsBE,UAAtB;AACH;;AACD,SAAKqC,yBAAL,GAAiCH,WAAjC;AACA,UAAMI,QAAQ,GAAG,IAAI3C,eAAJ,EAAjB;AACA2C,IAAAA,QAAQ,CAACH,KAAT,GAAiB,wBAAjB;AACAG,IAAAA,QAAQ,CAAC1C,UAAT,CAAoB;AAAEwC,MAAAA,UAAU,EAAE;AAAd,KAApB;;AACA,SAAK,IAAItC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGwC,QAAQ,CAAChD,MAAT,CAAgBS,MAApC,EAA4C,EAAED,CAA9C,EAAiD;AAC7CwC,MAAAA,QAAQ,CAAChD,MAAT,CAAgBQ,CAAhB,EAAmBE,UAAnB;AACH;;AACD,SAAKE,cAAL,GAAsBoC,QAAtB;AAEA,UAAMC,OAAO,GAAG,IAAI5C,eAAJ,EAAhB;AACA4C,IAAAA,OAAO,CAACJ,KAAR,GAAgB,+BAAhB;;AACA,QAAIK,aAAMC,qBAAV,EAAiC;AAC7B,WAAKzD,aAAL,GAAqBR,YAAY,CAACkE,IAAlC;AACH;;AACDH,IAAAA,OAAO,CAAC3C,UAAR,CAAmB;AACfwC,MAAAA,UAAU,EAAE,cADG;AAEf/C,MAAAA,OAAO,EAAE;AACL;AACAI,QAAAA,cAAc,EAAE,KAAKT;AAFhB;AAFM,KAAnB;;AAOA,SAAK,IAAIc,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGyC,OAAO,CAACjD,MAAR,CAAeS,MAAnC,EAA2C,EAAED,CAA7C,EAAgD;AAC5CyC,MAAAA,OAAO,CAACjD,MAAR,CAAeQ,CAAf,EAAkBE,UAAlB;AACH;;AACD,SAAKZ,oBAAL,GAA4BmD,OAA5B;AAEA,SAAKnC,sBAAL;AACH;;AAEkC,MAAxBuC,wBAAwB,GAAI;AACnC,WAAO,KAAKN,yBAAZ;AACH;;AAEkC,MAAxBM,wBAAwB,CAAExC,GAAF,EAAiB;AAChD,QAAI,KAAKkC,yBAAL,KAAmClC,GAAnC,IAA0C,CAACA,GAA/C,EAAoD;AACpD,SAAKkC,yBAAL,GAAiClC,GAAjC;AACA,SAAKC,sBAAL;AACH;;AAKSA,EAAAA,sBAAsB,GAAI;AAChC,SAAKG,eAAL;AACA,SAAKsB,qBAAL;AACA,SAAKe,sBAAL;AACH;;AAEMC,EAAAA,QAAQ,CAAEC,MAAF,EAAkBC,QAAlB,EAA4C;AACvD,UAAMF,QAAN,CAAeC,MAAf,EAAuBC,QAAvB;AACA,SAAKd,oBAAL;AACA,WAAO,IAAP;AACH;;AAEOW,EAAAA,sBAAsB,GAAI;AAC9B,SAAKI,uBAAL;AACH;;AAEOA,EAAAA,uBAAuB,GAAI;AAC/B,QAAI,CAAC,KAAKX,yBAAV,EAAqC,OADN,CAG/B;;AACA,QAAI,KAAKY,OAAL,CAAaC,OAAjB,EAA0B;AACtB,WAAKC,SAAL,CAAeC,MAAf,CAAsBC,iBAAtB,GAA0C,CAA1C;AACH;;AAED,UAAMC,OAAO,GAAG,KAAKjB,yBAAL,CAA+B/C,MAA/B,CAAsC,CAAtC,CAAhB;AACAgE,IAAAA,OAAO,CAAC7C,yBAAR;AACA6C,IAAAA,OAAO,CAACtD,UAAR;AACAsD,IAAAA,OAAO,CAAC5C,uBAAR;;AAEA,QAAIQ,0BAAJ,EAAS;AACL,WAAKC,UAAL,CAAiBoC,uBAAjB,GAA2CD,OAAO,CAACjC,gBAAR,EAA3C;AACA,WAAKF,UAAL,CAAiBqC,iBAAjB,GAAqCF,OAAO,CAACtC,MAA7C;AACH;AACJ;;AA5L4D"}