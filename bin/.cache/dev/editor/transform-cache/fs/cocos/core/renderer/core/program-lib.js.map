{"version":3,"sources":["file:///Users/disstian/Documents/CreatorProjects/engine3.3.0/cocos/core/renderer/core/program-lib.ts"],"names":["_dsLayoutInfo","DescriptorSetLayoutInfo","getBitCount","cnt","Math","ceil","log2","max","mapDefine","info","def","type","toString","undefined","options","range","console","warn","prepareDefines","defs","tDefs","macros","i","length","tmpl","name","v","value","isDefault","push","getShaderInstanceName","reduce","acc","cur","insertBuiltinBindings","tmplInfo","source","outBindings","target","builtins","tempBlocks","blocks","b","layouts","binding","bindings","find","bd","descriptorType","DESCRIPTOR_BUFFER_TYPE","includes","Array","prototype","unshift","apply","shaderInfo","tempSamplerTextures","samplerTextures","s","DESCRIPTOR_SAMPLER_TYPE","sort","a","getSize","block","members","m","count","genHandles","handleMap","offset","j","uniform","samplerTexture","dependencyCheck","dependencies","defines","d","slice","getActiveAttributes","out","attributes","gfxAttributes","ProgramLib","_templates","_cache","_templateInfos","register","effect","shaders","define","effectName","techniques","tech","passes","pass","propertyIndex","properties","shader","curTmpl","hash","_map","findIndex","_offset","uber","constantMacros","key","statistics","samplerStartBinding","ShaderInfo","blockSizes","DescriptorSetLayoutBinding","DescriptorType","UNIFORM_BUFFER","stageFlags","UniformBlock","SetIndex","MATERIAL","map","Uniform","SAMPLER_TEXTURE","UniformSamplerTexture","samplers","sampler","SAMPLER","UniformSampler","textures","texture","TEXTURE","UniformTexture","buffers","buffer","STORAGE_BUFFER","UniformStorageBuffer","memoryAccess","images","image","STORAGE_IMAGE","UniformStorageImage","subpassInputs","subpassInput","INPUT_ATTACHMENT","UniformInputAttachment","attr","Attribute","format","isNormalized","isInstanced","location","localDescriptorSetLayout","stages","ShaderStage","ShaderStageFlagBit","VERTEX","FRAGMENT","setLayouts","getTemplate","getTemplateInfo","getDescriptorSetLayout","device","isLocal","createDescriptorSetLayout","LOCAL","hasProgram","getKey","tmplDefs","tmplDef","mapped","destroyShaderByDefines","names","Object","keys","regexes","val","RegExp","filter","k","every","re","test","prog","destroy","getGFXShader","pipeline","assign","res","pipelineLayout","globalDescriptorSetLayout","GLOBAL","descriptorSetLayout","createPipelineLayout","PipelineLayoutInfo","macroArray","prefix","src","glsl3","deviceShaderVersion","getDeviceShaderVersion","error","vert","frag","createShader","gfxAPI","API","GLES2","WEBGL","GLES3","WEBGL2","programLib","legacyCC"],"mappings":"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"}