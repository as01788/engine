{"version":3,"sources":["file:///Users/disstian/Documents/CreatorProjects/engine3.3.0/cocos/core/gfx/webgl2/webgl2-command-buffer.ts"],"names":["WebGL2CommandBuffer","CommandBuffer","cmdPackage","WebGL2CmdPackage","_cmdAllocator","WebGL2CommandAllocator","_isInRenderPass","_curGPUPipelineState","_curGPUDescriptorSets","_curGPUInputAssembler","_curDynamicOffsets","Array","fill","_curDynamicStates","DynamicStates","_isStateInvalied","initialize","info","_type","type","_queue","queue","setCount","WebGL2DeviceManager","instance","bindingMappingInfo","bufferOffsets","length","i","push","destroy","clearCmds","begin","renderPass","subpass","frameBuffer","_numDrawCalls","_numInstances","_numTris","end","bindStates","beginRenderPass","framebuffer","renderArea","clearColors","clearDepth","clearStencil","cmd","beginRenderPassCmdPool","alloc","WebGL2CmdBeginRenderPass","gpuRenderPass","gpuFramebuffer","beginRenderPassCmds","cmds","WebGL2Cmd","BEGIN_RENDER_PASS","endRenderPass","bindPipelineState","pipelineState","gpuPipelineState","bindDescriptorSet","set","descriptorSet","dynamicOffsets","gpuDescriptorSets","gpuDescriptorSet","gpuPipelineLayout","offsets","idx","dynamicOffsetOffsets","bindInputAssembler","inputAssembler","gpuInputAssembler","setViewport","viewport","cache","left","top","width","height","minDepth","maxDepth","setScissor","scissor","x","y","setLineWidth","lineWidth","setDepthBias","depthBiasConstantFactor","depthBiasClamp","depthBiasSlopeFactor","depthBiasConstant","depthBiasSlope","setBlendConstants","blendConstants","blendConstant","z","w","copy","setDepthBound","minDepthBounds","maxDepthBounds","depthMinBounds","depthMaxBounds","setStencilWriteMask","face","writeMask","front","stencilStatesFront","back","stencilStatesBack","StencilFace","FRONT","BACK","setStencilCompareMask","reference","compareMask","draw","infoOrAssembler","CommandBufferType","PRIMARY","SECONDARY","drawInfo","drawCmdPool","WebGL2CmdDraw","drawCmds","DRAW","instanceCount","indexCount","vertexCount","glPrimitive","Math","max","console","error","updateBuffer","buffer","data","size","gpuBuffer","updateBufferCmdPool","WebGL2CmdUpdateBuffer","buffSize","buff","usage","BufferUsageBit","INDIRECT","undefined","byteLength","offset","updateBufferCmds","UPDATE_BUFFER","copyBuffersToTexture","buffers","texture","regions","gpuTexture","copyBufferToTextureCmdPool","WebGL2CmdCopyBufferToTexture","copyBufferToTextureCmds","COPY_BUFFER_TO_TEXTURE","execute","cmdBuffs","count","webGL2CmdBuff","c","array","refCount","bindStatesCmds","concat","pipelineBarrier","globalBarrier","textureBarriers","textures","bindStatesCmd","bindStatesCmdPool","WebGL2CmdBindStates","prototype","apply","dynamicStates","BIND_STATES"],"mappings":"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"}