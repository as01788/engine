{"version":3,"sources":["file:///Users/disstian/Documents/CreatorProjects/engine3.3.0/cocos/core/pipeline/deferred/bloom-stage.ts"],"names":["colors","Color","UBOBloom","TEXTURE_SIZE_OFFSET","COUNT","SIZE","BloomStage","Material","RenderStage","constructor","threshold","intensity","iterations","_renderArea","Rect","_bloomUBO","initialize","info","activate","pipeline","flow","_bloomMaterial","pipelineSceneData","bloomMaterial","destroy","render","camera","_pipeline","generateBloomRenderData","window","swapchain","macros","CC_PIPELINE_TYPE","bloomEnabled","renderObjects","length","passNumber","MAX_BLOOM_FILTER_PASS_NUM","i","device","createBuffer","BufferInfo","BufferUsageBit","UNIFORM","TRANSFER_DST","MemoryUsageBit","HOST","DEVICE","clearFlag","ClearFlagBit","COLOR","x","clearColor","y","z","w","_prefilterPass","_downsamplePass","_upsamplePass","_combinePass","generateRenderArea","width","height","cmdBuff","commandBuffers","sceneData","builtinBloomProcess","pass","passes","BLOOM_PREFILTERPASS_INDEX","renderData","getPipelineRenderData","bloomData","bloom","textureSize","Float32Array","updateBuffer","beginRenderPass","renderPass","prefilterFramebuffer","bindDescriptorSet","SetIndex","GLOBAL","descriptorSet","bindBuffer","bindTexture","outputRenderTargets","bindSampler","sampler","update","MATERIAL","inputAssembler","quadIAOffscreen","quadIAOnscreen","pso","shader","getShaderVariant","PipelineStateManager","getOrCreatePipelineState","bindPipelineState","bindInputAssembler","draw","endRenderPass","downsampleFramebuffers","BLOOM_DOWNSAMPLEPASS_INDEX","prefiterTex","downsampleTexs","index","upsampleFramebuffers","BLOOM_UPSAMPLEPASS_INDEX","upsampleTexs","deferredData","uboIndex","combineFramebuffer","BLOOM_COMBINEPASS_INDEX","initInfo","name","priority","CommonStagePriority","BLOOM","tag","serializable"],"mappings":"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"}