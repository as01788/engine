{"version":3,"sources":["file:///Users/disstian/Documents/CreatorProjects/engine3.3.0/cocos/core/pipeline/render-instanced-queue.ts"],"names":["RenderInstancedQueue","queue","Set","clear","it","values","res","next","done","value","uploadBuffers","cmdBuff","hasPendingModels","recordCommandBuffer","device","renderPass","instances","pass","bindDescriptorSet","SetIndex","MATERIAL","descriptorSet","lastPSO","b","length","instance","count","shader","pso","PipelineStateManager","getOrCreatePipelineState","ia","bindPipelineState","LOCAL","dynamicOffsets","bindInputAssembler","draw"],"mappings":"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"}