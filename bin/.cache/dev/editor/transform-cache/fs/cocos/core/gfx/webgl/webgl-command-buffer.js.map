{"version":3,"sources":["file:///Users/disstian/Documents/CreatorProjects/engine3.3.0/cocos/core/gfx/webgl/webgl-command-buffer.ts"],"names":["WebGLCommandBuffer","CommandBuffer","cmdPackage","WebGLCmdPackage","_cmdAllocator","WebGLCommandAllocator","_isInRenderPass","_curGPUPipelineState","_curGPUInputAssembler","_curGPUDescriptorSets","_curDynamicOffsets","Array","fill","_curDynamicStates","DynamicStates","_isStateInvalied","initialize","info","_type","type","_queue","queue","setCount","WebGLDeviceManager","instance","bindingMappingInfo","bufferOffsets","length","i","push","destroy","clearCmds","begin","renderPass","subpass","frameBuffer","_numDrawCalls","_numInstances","_numTris","end","bindStates","beginRenderPass","framebuffer","renderArea","clearColors","clearDepth","clearStencil","cmd","beginRenderPassCmdPool","alloc","WebGLCmdBeginRenderPass","gpuRenderPass","gpuFramebuffer","beginRenderPassCmds","cmds","WebGLCmd","BEGIN_RENDER_PASS","endRenderPass","bindPipelineState","pipelineState","gpuPipelineState","bindDescriptorSet","set","descriptorSet","dynamicOffsets","gpuDescriptorSet","gpuPipelineLayout","offsets","idx","dynamicOffsetOffsets","bindInputAssembler","inputAssembler","gpuInputAssembler","setViewport","viewport","cache","left","top","width","height","minDepth","maxDepth","setScissor","scissor","x","y","setLineWidth","lineWidth","setDepthBias","depthBiasConstantFactor","depthBiasClamp","depthBiasSlopeFactor","depthBiasConstant","depthBiasSlope","setBlendConstants","blendConstants","blendConstant","z","w","copy","setDepthBound","minDepthBounds","maxDepthBounds","depthMinBounds","depthMaxBounds","setStencilWriteMask","face","writeMask","front","stencilStatesFront","back","stencilStatesBack","StencilFace","FRONT","BACK","setStencilCompareMask","reference","compareMask","draw","infoOrAssembler","CommandBufferType","PRIMARY","SECONDARY","drawInfo","drawCmdPool","WebGLCmdDraw","drawCmds","DRAW","instanceCount","indexCount","vertexCount","glPrimitive","Math","max","console","error","updateBuffer","buffer","data","size","gpuBuffer","updateBufferCmdPool","WebGLCmdUpdateBuffer","buffSize","buff","usage","BufferUsageBit","INDIRECT","undefined","byteLength","offset","updateBufferCmds","UPDATE_BUFFER","copyBuffersToTexture","buffers","texture","regions","gpuTexture","copyBufferToTextureCmdPool","WebGLCmdCopyBufferToTexture","copyBufferToTextureCmds","COPY_BUFFER_TO_TEXTURE","execute","cmdBuffs","count","webGLCmdBuff","c","array","refCount","bindStatesCmds","concat","pipelineBarrier","globalBarrier","textureBarriers","textures","bindStatesCmd","bindStatesCmdPool","WebGLCmdBindStates","prototype","apply","gpuDescriptorSets","dynamicStates","BIND_STATES"],"mappings":"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"}