{"version":3,"sources":["file:///Users/disstian/Documents/CreatorProjects/engine3.3.0/cocos/core/renderer/scene/model.ts"],"names":["m4_1","Mat4","shadowMapPatches","name","value","ModelType","uploadMat4AsVec4x3","mat","v1","v2","v3","m00","m01","m02","m12","m04","m05","m06","m13","m08","m09","m10","m14","lightmapSamplerHash","SamplerInfo","Filter","LINEAR","NONE","Address","CLAMP","lightmapSamplerWithMipHash","Model","subModels","_subModels","inited","_inited","worldBounds","_worldBounds","modelBounds","_modelBounds","localBuffer","_localBuffer","worldBoundBuffer","_worldBoundBuffer","updateStamp","_updateStamp","isInstancingEnabled","_instMatWorldIdx","receiveShadow","_receiveShadow","val","_setReceiveShadow","onMacroPatchesStateChanged","castShadow","_castShadow","JSB","_nativeObj","setCastShadow","node","_node","n","setNode","native","transform","_transform","setTransform","visFlags","_visFlags","seVisFlag","enabled","_enabled","setEnabled","constructor","type","DEFAULT","scene","isDynamicBatching","instancedAttributes","buffer","views","attributes","_device","_descriptorSetCount","_localDataUpdated","_localData","Float32Array","UBOLocal","COUNT","_lightmap","_lightmapUVParam","Vec4","Layers","Enum","legacyCC","director","root","device","setReceiveShadow","_init","NativeModel","initialize","_destroySubmodel","subModel","destroy","_destroy","i","length","attachToScene","detachFromScene","updateTransform","stamp","hasChangedFlags","_dirtyFlags","updateWorldTransform","_mat","_pos","_rot","_scale","updateWorldBound","_applyLocalData","_applyLocalBuffer","setLocalBuffer","_applyWorldBoundBuffer","setWorldBoundBuffer","updateUBOs","update","worldMatrix","idx","attrs","toArray","MAT_WORLD_OFFSET","inverseTranspose","det","Math","abs","determinant","factor","sqrt","multiplyScalar","MAT_WORLD_IT_OFFSET","_updateNativeBounds","setBounds","createBoundingShape","minPos","maxPos","AABB","fromPoints","create","clone","_createSubModel","SubModel","initSubModel","subMeshData","isNewSubModel","passes","getMacroPatches","initPlanarShadowShader","initPlanarShadowInstanceShader","_updateAttributesAndBinding","setSubModel","setSubModelMesh","subMesh","setSubModelMaterial","onGlobalPipelineStateChanged","onPipelineStateChanged","updateLightingmap","texture","uvParam","LIGHTINGMAP_UVPARAM","builtinResMgr","get","gfxTexture","getGFXTexture","sampler","getSampler","mipmaps","descriptorSet","bindTexture","UNIFORM_LIGHTMAP_TEXTURE_BINDING","bindSampler","subModelIndex","_initLocalDescriptors","_updateLocalDescriptors","_initWorldBoundDescriptors","_updateWorldBoundDescriptors","worldBoundDescriptorSet","shader","getShaderVariant","patches","_updateInstancedAttributes","_getInstancedAttributeIndex","_setInstMatWorldIdx","setInstMatWorldIdx","pass","hasFeature","Feature","INSTANCED_ARRAYS","size","j","attribute","isInstanced","FormatInfos","format","Uint8Array","offset","attr","Attribute","isNormalized","location","push","info","typeViewArray","count","batchingScheme","BatchingSchemes","INSTANCING","getInstancedBuffer","INST_MAT_WORLD","setInstancedAttrBlock","createBuffer","BufferInfo","BufferUsageBit","UNIFORM","TRANSFER_DST","MemoryUsageBit","DEVICE","SIZE","UBOWorldBound","bindBuffer","BINDING"],"mappings":"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"}