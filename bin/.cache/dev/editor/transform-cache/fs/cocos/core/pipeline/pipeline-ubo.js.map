{"version":3,"sources":["file:///Users/disstian/Documents/CreatorProjects/engine3.3.0/cocos/core/pipeline/pipeline-ubo.ts"],"names":["_matShadowView","Mat4","_matShadowProj","_matShadowViewProj","_vec4ShadowInfo","Vec4","PipelineUBO","_globalUBO","Float32Array","UBOGlobal","COUNT","_cameraUBO","UBOCamera","_shadowUBO","UBOShadow","updateGlobalUBOView","window","bufferView","root","legacyCC","director","fv","shadingWidth","Math","floor","width","shadingHeight","height","TIME_OFFSET","cumulativeTime","frameTime","getTotalFrames","SCREEN_SIZE_OFFSET","NATIVE_SIZE_OFFSET","updateCameraUBOView","pipeline","camera","scene","getScene","renderScene","mainLight","sceneData","pipelineSceneData","ambient","fog","cv","exposure","isHDR","SCREEN_SCALE_OFFSET","shadingScale","EXPOSURE_OFFSET","Vec3","toArray","direction","MAIN_LIT_DIR_OFFSET","color","MAIN_LIT_COLOR_OFFSET","useColorTemperature","colorTempRGB","colorTemperatureRGB","x","y","z","illuminance","UNIT_Z","ZERO","skyColor","w","skyIllum","AMBIENT_SKY_OFFSET","AMBIENT_GROUND_OFFSET","groundAlbedo","matView","MAT_VIEW_OFFSET","node","worldMatrix","MAT_VIEW_INV_OFFSET","position","CAMERA_POS_OFFSET","matProj","MAT_PROJ_OFFSET","matProjInv","MAT_PROJ_INV_OFFSET","matViewProj","MAT_VIEW_PROJ_OFFSET","matViewProjInv","MAT_VIEW_PROJ_INV_OFFSET","getCombineSignY","colorArray","GLOBAL_FOG_COLOR_OFFSET","GLOBAL_FOG_BASE_OFFSET","fogStart","fogEnd","fogDensity","GLOBAL_FOG_ADD_OFFSET","fogTop","fogRange","fogAtten","NEAR_FAR_OFFSET","nearClip","farClip","VIEW_PORT_OFFSET","viewport","updateShadowUBOView","device","shadowInfo","shadows","sv","enabled","type","ShadowType","ShadowMap","near","far","matShadowView","matShadowProj","matShadowViewProj","fixedArea","shadowCameraFar","invert","getWorldMatrix","orthoSize","ortho","capabilities","clipSpaceMinZ","clipSpaceSignY","multiply","MAT_LIGHT_VIEW_OFFSET","SHADOW_PROJ_DEPTH_INFO_OFFSET","m10","m14","m11","m15","SHADOW_PROJ_INFO_OFFSET","m00","m05","MAT_LIGHT_VIEW_PROJ_OFFSET","linear","packing","SHADOW_NEAR_FAR_LINEAR_SATURATION_INFO_OFFSET","saturation","SHADOW_WIDTH_HEIGHT_PCF_BIAS_INFO_OFFSET","size","pcf","bias","SHADOW_LIGHT_PACKING_NBIAS_NULL_INFO_OFFSET","normalBias","Planar","Color","shadowColor","SHADOW_COLOR_OFFSET","updateShadowUBOLightView","light","LightType","DIRECTIONAL","set","SPOT","perspective","angle","aspect","range","_combineSignY","_initCombineSignY","_device","screenSpaceSignY","activate","_pipeline","ds","descriptorSet","globalUBO","createBuffer","BufferInfo","BufferUsageBit","UNIFORM","TRANSFER_DST","MemoryUsageBit","HOST","DEVICE","SIZE","bindBuffer","BINDING","cameraUBO","shadowUBO","updateGlobalUBO","globalDSManager","cmdBuffer","commandBuffers","update","updateBuffer","getBuffer","updateCameraUBO","updateShadowUBO","shadowFrameBufferMap","has","bindTexture","UNIFORM_SHADOWMAP_BINDING","get","colorTextures","updateShadowUBOLight","globalDS","builtinResMgr","getGFXTexture","UNIFORM_SPOT_LIGHTING_MAP_TEXTURE_BINDING","updateShadowUBORange","offset","data","destroy"],"mappings":"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"}