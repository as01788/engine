{"version":3,"sources":["file:///Users/disstian/Documents/CreatorProjects/engine3.3.0/cocos/core/animation/marionette/graph-eval.ts"],"names":["AnimationGraphEval","constructor","graph","root","controller","_blendBuffer","BlendStateBuffer","_currentTransitionCache","duration","time","_varInstances","name","type","value","variables","VarInstance","context","blendBuffer","node","getVar","id","triggerResetFn","setValue","_layerEvaluations","Array","from","layers","map","layer","layerEval","LayerEval","mask","undefined","update","deltaTime","GRAPH_DEBUG_ENABLED","apply","getVariables","Object","entries","getCurrentStateStatus","getCurrentClipStatuses","getCurrentTransition","currentTransition","isInTransition","getNextStateStatus","getNextClipStatuses","getValue","varInstance","_weight","_nodes","_topLevelEntry","_topLevelExit","_currentNode","_currentTransitionToNode","_currentTransitionPath","_transitionProgress","_fromWeight","_toWeight","_fromUpdated","_toUpdated","_controller","weight","entry","exit","_addStateMachine","stateMachine","_resetTrigger","exited","_eval","_sample","currentNode","kind","NodeKind","animation","getFromPortStatus","getClipStatuses","emptyClipStatusesIterable","transitionStatus","currentTransitionPath","length","lastNode","to","normalizedDuration","durationInSeconds","getToPortStatus","nCurrentTransitionPath","parentStateMachineInfo","__DEBUG_ID__","nodes","states","entryEval","anyNode","exitEval","nodeEvaluations","MotionState","MotionStateEval","entryState","SpecialStateEval","exitState","anyState","any","SubStateMachine","stateMachineInfo","components","parent","iNode","nodeEval","subStateMachineInfos","subStateMachineInfo","InstantiatedComponents","DEBUG","outgoingTemplates","getOutgoings","outgoingTransitions","fromNode","outgoing","outgoingNode","iOutgoingNode","findIndex","nodeTemplate","toNode","transitionEval","conditions","condition","createEval","relativeDuration","exitConditionEnabled","exitCondition","triggers","forEach","conditionEval","iCondition","TriggerCondition","trigger","push","haltOnNonMotionState","_continueDanglingTransition","MAX_ITERATIONS","passConsumed","remainTimePiece","continueNextIterationForce","iterations","currentUpdatingConsume","_updateCurrentTransition","transitionMatch","_matchCurrentNodeTransition","transition","requires","updateRequires","updateFromPort","ranIntoNonMotionState","_switchTo","triggerFromPortUpdate","triggerToPortUpdate","currentTransitionToNode","fromWeight","sampleFromPort","sampleToPort","minDeltaTimeRequired","Infinity","transitionRequiringMinDeltaTime","match0","_matchTransition","transitionMatchCacheRegular","ancestor","anyMatch","transitionMatchCacheAny","result","transitionMatchCache","set","realNode","nTransitions","iTransition","nConditions","deltaTimeRequired","exitTime","Math","max","fromPortTime","satisfied","eval","_consumeTransition","motionNode","_matchTransitionPathUntilMotion","_doTransitionToMotion","lenCurrentTransitionPath","lastTransition","tailNode","_callEnterMethods","_resetTriggersAlongThePath","_resetTriggersOnTransition","targetNode","resetToPort","transitionDuration","contrib","ratio","transitionProgress","durationSeconds","progressSeconds","remain","min","toNodeName","shouldUpdatePorts","hasFinished","updateToPort","_callExitMethods","transitions","nTransition","finishTransition","nTriggers","iTrigger","_triggerReset","callMotionStateEnterMethods","callStateMachineEnterMethods","callMotionStateExitMethods","callStateMachineExitMethods","createStateStatusCache","progress","emptyClipStatusesIterator","freeze","next","done","Symbol","iterator","TransitionMatchCache","StateEval","_components","instantiateComponents","status","_callMotionStateCallbackIfNonDefault","callMotionStateUpdateMethods","_callStateMachineCallbackIfNonDefault","methodName","nComponents","iComponent","component","StateMachineComponent","prototype","_source","_speed","_fromPort","statusCache","_toPort","speed","VariableType","FLOAT","_setSpeed","sourceEvalContext","sourceEval","motion","defineProperty","calcProgressUpdate","stateStatus","normalizeProgress","sample","baseWeight","source","currentProgress","trunc","_value","_refs","fn","thisArg","args","call","bind"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AAGA;;AAEA;;AACA;;AAEA;;AAEA;;AACA;;AACA;;AAGA;;AAGO,MAAMA,kBAAN,CAAyB;AAQ5BC,EAAAA,WAAW,CAAEC,KAAF,EAAyBC,IAAzB,EAAqCC,UAArC,EAAsE;AAAA,SANzEC,YAMyE,GAN1D,IAAIC,2CAAJ,EAM0D;AAAA,SALzEC,uBAKyE,GAL7B;AAChDC,MAAAA,QAAQ,EAAE,GADsC;AAEhDC,MAAAA,IAAI,EAAE;AAF0C,KAK6B;AAAA,SAsFzEC,aAtFyE,GAsF5B,EAtF4B;;AAC7E,SAAK,MAAM,CAACC,IAAD,EAAO;AAAEC,MAAAA,IAAF;AAAQC,MAAAA;AAAR,KAAP,CAAX,IAAsCX,KAAK,CAACY,SAA5C,EAAuD;AACnD,WAAKJ,aAAL,CAAmBC,IAAnB,IAA2B,IAAII,WAAJ,CAAgBH,IAAhB,EAAsBC,KAAtB,CAA3B;AACH;;AAED,UAAMG,OAAqB,GAAG;AAC1BZ,MAAAA,UAD0B;AAE1Ba,MAAAA,WAAW,EAAE,KAAKZ,YAFQ;AAG1Ba,MAAAA,IAAI,EAAEf,IAHoB;AAI1BgB,MAAAA,MAAM,EAAGC,EAAD,IAAyC,KAAKV,aAAL,CAAmBU,EAAnB,CAJvB;AAK1BC,MAAAA,cAAc,EAAGV,IAAD,IAAkB;AAC9B,aAAKW,QAAL,CAAcX,IAAd,EAAoB,KAApB;AACH;AAPyB,KAA9B;AAUA,SAAKY,iBAAL,GAAyBC,KAAK,CAACC,IAAN,CAAWvB,KAAK,CAACwB,MAAjB,EAAyBC,GAAzB,CAA8BC,KAAD,IAAW;AAAA;;AAC7D,YAAMC,SAAS,GAAG,IAAIC,SAAJ,CAAcF,KAAd,EAAqB,EACnC,GAAGZ,OADgC;AAEnCe,QAAAA,IAAI,iBAAEH,KAAK,CAACG,IAAR,qDAAgBC;AAFe,OAArB,CAAlB;AAIA,aAAOH,SAAP;AACH,KANwB,CAAzB;AAOH;;AAEMI,EAAAA,MAAM,CAAEC,SAAF,EAAqB;AAC9B,qCAAiB,oBAAjB;;AACA,QAAIC,+BAAJ,EAAyB;AACrB;AACH;;AACD,SAAK,MAAMN,SAAX,IAAwB,KAAKN,iBAA7B,EAAgD;AAC5CM,MAAAA,SAAS,CAACI,MAAV,CAAiBC,SAAjB;AACH;;AACD,QAAIC,+BAAJ,EAAyB;AACrB,kCAAY,YAAW,kCAAkB,EAAzC;AACH;;AACD,SAAK9B,YAAL,CAAkB+B,KAAlB;;AACA;AACH;;AAEMC,EAAAA,YAAY,GAAoE;AACnF,WAAOC,MAAM,CAACC,OAAP,CAAe,KAAK7B,aAApB,CAAP;AACH;;AAEM8B,EAAAA,qBAAqB,CAAEZ,KAAF,EAAqD;AAC7E,WAAO,KAAKL,iBAAL,CAAuBK,KAAvB,EAA8BY,qBAA9B,EAAP;AACH;;AAEMC,EAAAA,sBAAsB,CAAEb,KAAF,EAAiD;AAC1E,WAAO,KAAKL,iBAAL,CAAuBK,KAAvB,EAA8Ba,sBAA9B,EAAP;AACH;;AAEMC,EAAAA,oBAAoB,CAAEd,KAAF,EAAoD;AAC3E,UAAM;AACFL,MAAAA,iBAAiB,EAAEG,MADjB;AAEFnB,MAAAA,uBAAuB,EAAEoC;AAFvB,QAGF,IAHJ;AAIA,UAAMC,cAAc,GAAGlB,MAAM,CAACE,KAAD,CAAN,CAAcc,oBAAd,CAAmCC,iBAAnC,CAAvB;AACA,WAAOC,cAAc,GAAGD,iBAAH,GAAuB,IAA5C;AACH;;AAEME,EAAAA,kBAAkB,CAAEjB,KAAF,EAAqD;AAC1E,WAAO,KAAKL,iBAAL,CAAuBK,KAAvB,EAA8BiB,kBAA9B,EAAP;AACH;;AAEMC,EAAAA,mBAAmB,CAAElB,KAAF,EAAiD;AACvE,sCAAoB,KAAKc,oBAAL,CAA0Bd,KAA1B,CAApB,EAAsD,oCAAtD;AACA,WAAO,KAAKL,iBAAL,CAAuBK,KAAvB,EAA8BkB,mBAA9B,EAAP;AACH;;AAEMC,EAAAA,QAAQ,CAAEpC,IAAF,EAAgB;AAC3B,UAAMqC,WAAW,GAAG,KAAKtC,aAAL,CAAmBC,IAAnB,CAApB;;AACA,QAAI,CAACqC,WAAL,EAAkB;AACd,aAAOhB,SAAP;AACH,KAFD,MAEO;AACH,aAAOgB,WAAW,CAACnC,KAAnB;AACH;AACJ;;AAEMS,EAAAA,QAAQ,CAAEX,IAAF,EAAgBE,KAAhB,EAA8B;AACzC,UAAMmC,WAAW,GAAG,KAAKtC,aAAL,CAAmBC,IAAnB,CAApB;;AACA,QAAI,CAACqC,WAAL,EAAkB;AACd;AACH;;AACDA,IAAAA,WAAW,CAACnC,KAAZ,GAAoBA,KAApB;AACH;;AA5F2B;;;;AAmJhC,MAAMiB,SAAN,CAAgB;AAGZ7B,EAAAA,WAAW,CAAE2B,KAAF,EAAgBZ,OAAhB,EAAuC;AAAA,SAmF1CiC,OAnF0C;AAAA,SAoF1CC,MApF0C,GAoFrB,EApFqB;AAAA,SAqF1CC,cArF0C;AAAA,SAsF1CC,aAtF0C;AAAA,SAuF1CC,YAvF0C;AAAA,SAwF1CC,wBAxF0C,GAwFS,IAxFT;AAAA,SAyF1CC,sBAzF0C,GAyFC,EAzFD;AAAA,SA0F1CC,mBA1F0C,GA0FpB,CA1FoB;AAAA,SA4F1CC,WA5F0C,GA4F5B,GA5F4B;AAAA,SA6F1CC,SA7F0C,GA6F9B,GA7F8B;AAAA,SA8F1CC,YA9F0C,GA8F3B,KA9F2B;AAAA,SA+F1CC,UA/F0C,GA+F7B,KA/F6B;AAC9C,SAAKjD,IAAL,GAAYiB,KAAK,CAACjB,IAAlB;AACA,SAAKkD,WAAL,GAAmB7C,OAAO,CAACZ,UAA3B;AACA,SAAK6C,OAAL,GAAerB,KAAK,CAACkC,MAArB;;AACA,UAAM;AAAEC,MAAAA,KAAF;AAASC,MAAAA;AAAT,QAAkB,KAAKC,gBAAL,CAAsBrC,KAAK,CAACsC,YAA5B,EAA0C,IAA1C,EAAgD,EACpE,GAAGlD;AADiE,KAAhD,EAErBY,KAAK,CAACjB,IAFe,CAAxB;;AAGA,SAAKwC,cAAL,GAAsBY,KAAtB;AACA,SAAKX,aAAL,GAAqBY,IAArB;AACA,SAAKX,YAAL,GAAoBU,KAApB;AACA,SAAKI,aAAL,GAAqBnD,OAAO,CAACK,cAA7B;AACH;AAED;AACJ;AACA;;;AACc,MAAN+C,MAAM,GAAI;AACV,WAAO,KAAKf,YAAL,KAAsB,KAAKD,aAAlC;AACH;;AAEMnB,EAAAA,MAAM,CAAEC,SAAF,EAAqB;AAC9B,QAAI,CAAC,KAAKkC,MAAV,EAAkB;AACd,WAAKX,WAAL,GAAmB,GAAnB;AACA,WAAKC,SAAL,GAAiB,GAAjB;;AACA,WAAKW,KAAL,CAAWnC,SAAX;;AACA,WAAKoC,OAAL;AACH;AACJ;;AAEM9B,EAAAA,qBAAqB,GAAwC;AAChE,UAAM;AAAEa,MAAAA,YAAY,EAAEkB;AAAhB,QAAgC,IAAtC;;AACA,QAAIA,WAAW,CAACC,IAAZ,KAAqBC,QAAQ,CAACC,SAAlC,EAA6C;AACzC,aAAOH,WAAW,CAACI,iBAAZ,EAAP;AACH,KAFD,MAEO;AACH,aAAO,IAAP;AACH;AACJ;;AAEMlC,EAAAA,sBAAsB,GAA0B;AACnD,UAAM;AAAEY,MAAAA,YAAY,EAAEkB;AAAhB,QAAgC,IAAtC;;AACA,QAAIA,WAAW,CAACC,IAAZ,KAAqBC,QAAQ,CAACC,SAAlC,EAA6C;AACzC,aAAOH,WAAW,CAACK,eAAZ,CAA4B,KAAKnB,WAAjC,CAAP;AACH,KAFD,MAEO;AACH,aAAOoB,yBAAP;AACH;AACJ;;AAEMnC,EAAAA,oBAAoB,CAAEoC,gBAAF,EAA+C;AACtE,UAAM;AAAEvB,MAAAA,sBAAsB,EAAEwB;AAA1B,QAAoD,IAA1D;;AACA,QAAIA,qBAAqB,CAACC,MAAtB,KAAiC,CAArC,EAAwC;AACpC,YAAMC,QAAQ,GAAGF,qBAAqB,CAACA,qBAAqB,CAACC,MAAtB,GAA+B,CAAhC,CAAtC;;AACA,UAAIC,QAAQ,CAACC,EAAT,CAAYV,IAAZ,KAAqBC,QAAQ,CAACC,SAAlC,EAA6C;AACzC,eAAO,KAAP;AACH;;AACD,YAAM;AACFlE,QAAAA,QADE;AAEF2E,QAAAA;AAFE,UAGFJ,qBAAqB,CAAC,CAAD,CAHzB;AAIA,YAAMK,iBAAiB,GAAGN,gBAAgB,CAACtE,QAAjB,GAA4B2E,kBAAkB,GAClE3E,QAAQ,IAAI,KAAK6C,YAAL,CAAkBmB,IAAlB,KAA2BC,QAAQ,CAACC,SAApC,GAAgD,KAAKrB,YAAL,CAAkB7C,QAAlE,GAA6E,GAAjF,CAD0D,GAElEA,QAFN;AAGAsE,MAAAA,gBAAgB,CAACrE,IAAjB,GAAwB,KAAK+C,mBAAL,GAA2B4B,iBAAnD;AACA,aAAO,IAAP;AACH,KAdD,MAcO;AACH,aAAO,KAAP;AACH;AACJ;;AAEMvC,EAAAA,kBAAkB,GAAwC;AAC7D,+BAAa,KAAKS,wBAAlB,EAA4C,4CAA5C;AACA,WAAO,KAAKA,wBAAL,CAA8B+B,eAA9B,EAAP;AACH;;AAEMvC,EAAAA,mBAAmB,GAA0B;AAAA;;AAChD,UAAM;AAAES,MAAAA,sBAAsB,EAAEwB;AAA1B,QAAoD,IAA1D;AACA,UAAMO,sBAAsB,GAAGP,qBAAqB,CAACC,MAArD;AACA,+BAAaM,sBAAsB,GAAG,CAAtC,EAAyC,4CAAzC;AACA,UAAMJ,EAAE,GAAGH,qBAAqB,CAACO,sBAAsB,GAAG,CAA1B,CAArB,CAAkDJ,EAA7D;AACA,+BAAaA,EAAE,CAACV,IAAH,KAAYC,QAAQ,CAACC,SAAlC;AACA,kCAAOQ,EAAE,CAACN,eAAH,CAAmB,KAAKlB,SAAxB,CAAP,qEAA6CmB,yBAA7C;AACH;;AAiBOZ,EAAAA,gBAAgB,CACpB/D,KADoB,EACCqF,sBADD,EACkDvE,OADlD,EACyEwE,YADzE,EAEJ;AAChB,UAAMC,KAAK,GAAGjE,KAAK,CAACC,IAAN,CAAWvB,KAAK,CAACwF,MAAN,EAAX,CAAd;AAEA,QAAIC,SAAJ;AACA,QAAIC,OAAJ;AACA,QAAIC,QAAJ;AAEA,UAAMC,eAAe,GAAGL,KAAK,CAAC9D,GAAN,CAAWT,IAAD,IAA2B;AACzD,UAAIA,IAAI,YAAY6E,wBAApB,EAAiC;AAC7B,eAAO,IAAIC,eAAJ,CAAoB9E,IAApB,EAA0BF,OAA1B,CAAP;AACH,OAFD,MAEO,IAAIE,IAAI,KAAKhB,KAAK,CAAC+F,UAAnB,EAA+B;AAClC,eAAON,SAAS,GAAG,IAAIO,gBAAJ,CAAqBhF,IAArB,EAA2BuD,QAAQ,CAACV,KAApC,EAA2C7C,IAAI,CAACP,IAAhD,CAAnB;AACH,OAFM,MAEA,IAAIO,IAAI,KAAKhB,KAAK,CAACiG,SAAnB,EAA8B;AACjC,eAAON,QAAQ,GAAG,IAAIK,gBAAJ,CAAqBhF,IAArB,EAA2BuD,QAAQ,CAACT,IAApC,EAA0C9C,IAAI,CAACP,IAA/C,CAAlB;AACH,OAFM,MAEC,IAAIO,IAAI,KAAKhB,KAAK,CAACkG,QAAnB,EAA6B;AACjC,eAAOR,OAAO,GAAG,IAAIM,gBAAJ,CAAqBhF,IAArB,EAA2BuD,QAAQ,CAAC4B,GAApC,EAAyCnF,IAAI,CAACP,IAA9C,CAAjB;AACH,OAFO,MAED;AACH,mCAAaO,IAAI,YAAYoF,+BAA7B;AACA,eAAO,IAAP;AACH;AACJ,KAbuB,CAAxB;AAeA,sCAAoBX,SAApB,EAA+B,uBAA/B;AACA,sCAAoBE,QAApB,EAA8B,sBAA9B;AACA,sCAAoBD,OAApB,EAA6B,qBAA7B;AAEA,UAAMW,gBAAkC,GAAG;AACvCC,MAAAA,UAAU,EAAE,IAD2B;AAEvCC,MAAAA,MAAM,EAAElB,sBAF+B;AAGvCxB,MAAAA,KAAK,EAAE4B,SAHgC;AAIvC3B,MAAAA,IAAI,EAAE6B,QAJiC;AAKvCQ,MAAAA,GAAG,EAAET;AALkC,KAA3C;;AAQA,SAAK,IAAIc,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAGjB,KAAK,CAACT,MAAlC,EAA0C,EAAE0B,KAA5C,EAAmD;AAC/C,YAAMC,QAAQ,GAAGb,eAAe,CAACY,KAAD,CAAhC;;AACA,UAAIC,QAAJ,EAAc;AACVA,QAAAA,QAAQ,CAACzC,YAAT,GAAwBqC,gBAAxB;AACH;AACJ;;AAED,UAAMK,oBAAoB,GAAGnB,KAAK,CAAC9D,GAAN,CAAWT,IAAD,IAAU;AAC7C,UAAIA,IAAI,YAAYoF,+BAApB,EAAqC;AACjC,cAAMO,mBAAmB,GAAG,KAAK5C,gBAAL,CAAsB/C,IAAI,CAACgD,YAA3B,EAAyCqC,gBAAzC,EAA2DvF,OAA3D,EAAqE,GAAEwE,YAAa,IAAGtE,IAAI,CAACP,IAAK,EAAjG,CAA5B;;AACAkG,QAAAA,mBAAmB,CAACL,UAApB,GAAiC,IAAIM,sBAAJ,CAA2B5F,IAA3B,CAAjC;AACA,eAAO2F,mBAAP;AACH,OAJD,MAIO;AACH,eAAO,IAAP;AACH;AACJ,KAR4B,CAA7B;;AAUA,QAAIE,4BAAJ,EAAW;AACP,WAAK,MAAMJ,QAAX,IAAuBb,eAAvB,EAAwC;AACpC,YAAIa,QAAJ,EAAc;AACVA,UAAAA,QAAQ,CAACnB,YAAT,GAAyB,GAAEmB,QAAQ,CAAChG,IAAK,SAAQ6E,YAAa,GAA9D;AACH;AACJ;AACJ;;AAED,SAAK,IAAIkB,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAGjB,KAAK,CAACT,MAAlC,EAA0C,EAAE0B,KAA5C,EAAmD;AAC/C,YAAMxF,IAAI,GAAGuE,KAAK,CAACiB,KAAD,CAAlB;AACA,YAAMM,iBAAiB,GAAG9G,KAAK,CAAC+G,YAAN,CAAmB/F,IAAnB,CAA1B;AACA,YAAMgG,mBAAqC,GAAG,EAA9C;AAEA,UAAIC,QAAJ;;AACA,UAAIjG,IAAI,YAAYoF,+BAApB,EAAqC;AACjC,cAAMO,mBAAmB,GAAGD,oBAAoB,CAACF,KAAD,CAAhD;AACA,0CAAoBG,mBAApB;AACAM,QAAAA,QAAQ,GAAGN,mBAAmB,CAAC7C,IAA/B;AACH,OAJD,MAIO;AACH,cAAM2C,QAAQ,GAAGb,eAAe,CAACY,KAAD,CAAhC;AACA,0CAAoBC,QAApB;AACAQ,QAAAA,QAAQ,GAAGR,QAAX;AACH;;AAED,WAAK,MAAMS,QAAX,IAAuBJ,iBAAvB,EAA0C;AACtC,cAAMK,YAAY,GAAGD,QAAQ,CAAClC,EAA9B;AACA,cAAMoC,aAAa,GAAG7B,KAAK,CAAC8B,SAAN,CAAiBC,YAAD,IAAkBA,YAAY,KAAKJ,QAAQ,CAAClC,EAA5D,CAAtB;;AACA,YAAIoC,aAAa,GAAG,CAApB,EAAuB;AACnB,qCAAa,KAAb,EAAoB,oBAApB;AACH;;AAED,YAAIG,MAAJ;;AACA,YAAIJ,YAAY,YAAYf,+BAA5B,EAA6C;AACzC,gBAAMO,mBAAmB,GAAGD,oBAAoB,CAACU,aAAD,CAAhD;AACA,4CAAoBT,mBAApB;AACAY,UAAAA,MAAM,GAAGZ,mBAAmB,CAAC9C,KAA7B;AACH,SAJD,MAIO;AACH,gBAAM4C,QAAQ,GAAGb,eAAe,CAACwB,aAAD,CAAhC;AACA,4CAAoBX,QAApB;AACAc,UAAAA,MAAM,GAAGd,QAAT;AACH;;AAED,cAAMe,cAA8B,GAAG;AACnCxC,UAAAA,EAAE,EAAEuC,MAD+B;AAEnCE,UAAAA,UAAU,EAAEP,QAAQ,CAACO,UAAT,CAAoBhG,GAApB,CAAyBiG,SAAD,IAAeA,SAAS,CAACC,sBAAD,CAAT,CAAsB7G,OAAtB,CAAvC,CAFuB;AAGnCR,UAAAA,QAAQ,EAAE,2CAAsB4G,QAAtB,IAAkCA,QAAQ,CAAC5G,QAA3C,GAAsD,GAH7B;AAInC2E,UAAAA,kBAAkB,EAAE,2CAAsBiC,QAAtB,IAAkCA,QAAQ,CAACU,gBAA3C,GAA8D,KAJ/C;AAKnCC,UAAAA,oBAAoB,EAAE,2CAAsBX,QAAtB,IAAkCA,QAAQ,CAACW,oBAA3C,GAAkE,KALrD;AAMnCC,UAAAA,aAAa,EAAE,2CAAsBZ,QAAtB,IAAkCA,QAAQ,CAACY,aAA3C,GAA2D,GANvC;AAOnCC,UAAAA,QAAQ,EAAEjG;AAPyB,SAAvC;AASA0F,QAAAA,cAAc,CAACC,UAAf,CAA0BO,OAA1B,CAAkC,CAACC,aAAD,EAAgBC,UAAhB,KAA+B;AAC7D,gBAAMR,SAAS,GAAGR,QAAQ,CAACO,UAAT,CAAoBS,UAApB,CAAlB;;AACA,cAAIR,SAAS,YAAYS,2BAArB,IAAyCT,SAAS,CAACU,OAAvD,EAAgE;AAAA;;AAC5D;AACA,sCAACZ,cAAc,CAACO,QAAhB,yEAACP,cAAc,CAACO,QAAhB,GAA6B,EAA7B,EAAiCM,IAAjC,CAAsCX,SAAS,CAACU,OAAhD;AACH;AACJ,SAND;AAOApB,QAAAA,mBAAmB,CAACqB,IAApB,CAAyBb,cAAzB;AACH;;AAEDP,MAAAA,QAAQ,CAACD,mBAAT,GAA+BA,mBAA/B;AACH;;AAED,WAAOX,gBAAP;AACH;AAED;AACJ;AACA;AACA;AACA;;;AACYlC,EAAAA,KAAK,CAAEnC,SAAF,EAA+B;AACxC,+BAAa,CAAC,KAAKkC,MAAnB;AACA,qCAAiB,UAAS,KAAKzD,IAAK,kBAAiBuB,SAAU,GAA/D;;AAEA,UAAMsG,oBAAoB,GAAG,KAAKC,2BAAL,EAA7B;;AACA,QAAID,oBAAJ,EAA0B;AACtB,aAAO,GAAP;AACH;;AAED,UAAME,cAAc,GAAG,GAAvB;AACA,QAAIC,YAAY,GAAG,GAAnB;AAEA,QAAIC,eAAe,GAAG1G,SAAtB;;AACA,SAAK,IAAI2G,0BAA0B,GAAG,IAAjC,EAAuC;AACxCC,IAAAA,UAAU,GAAG,CADjB,EAEID,0BAA0B,IAAID,eAAe,GAAG,GAFpD,GAGE;AACEC,MAAAA,0BAA0B,GAAG,KAA7B;;AAEA,UAAIC,UAAU,KAAK,CAAnB,EAAsB;AAClB,oCAAY,sBAAqBH,YAAa,cAAaC,eAAgB,GAA3E;AACH;;AAED,UAAIE,UAAU,KAAKJ,cAAnB,EAAmC;AAC/B,2BAAO,KAAP,EAAcA,cAAd;AACA;AACH;;AAED,kCAAY,QAAOI,UAAW,WAA9B;;AAEA,UAAI3G,+BAAJ,EAAyB;AACrBwG,QAAAA,YAAY,GAAG,GAAf;AACH;;AAED,QAAEG,UAAF,CAlBF,CAoBE;AACA;;AACA,UAAI,KAAKvF,sBAAL,CAA4ByB,MAA5B,GAAqC,CAAzC,EAA4C;AACxC,cAAM+D,sBAAsB,GAAG,KAAKC,wBAAL,CAA8BJ,eAA9B,CAA/B;;AACA,YAAIzG,+BAAJ,EAAyB;AACrBwG,UAAAA,YAAY,GAAGI,sBAAf;AACH;;AACDH,QAAAA,eAAe,IAAIG,sBAAnB;;AACA,YAAI,KAAK1F,YAAL,CAAkBmB,IAAlB,KAA2BC,QAAQ,CAACT,IAAxC,EAA8C;AAC1C;AACH;;AACD,YAAI,KAAKT,sBAAL,CAA4ByB,MAA5B,KAAuC,CAA3C,EAA8C;AAC1C;AACA;AACA6D,UAAAA,0BAA0B,GAAG,IAA7B;AACH;;AACD;AACH;;AAED,YAAM;AAAExF,QAAAA,YAAY,EAAEkB;AAAhB,UAAgC,IAAtC;;AAEA,YAAM0E,eAAe,GAAG,KAAKC,2BAAL,CAAiCN,eAAjC,CAAxB;;AAEA,UAAIK,eAAJ,EAAqB;AACjB,cAAM;AACFE,UAAAA,UADE;AAEFC,UAAAA,QAAQ,EAAEC;AAFR,YAGFJ,eAHJ;AAKA,oCAAY,oBAAmB,KAAKtI,IAAK,yBAAwB4D,WAAW,CAAC5D,IAAK,EAAlF;;AACA,YAAIwB,+BAAJ,EAAyB;AACrBwG,UAAAA,YAAY,GAAGU,cAAf;AACH;;AACDT,QAAAA,eAAe,IAAIS,cAAnB;;AAEA,YAAI9E,WAAW,CAACC,IAAZ,KAAqBC,QAAQ,CAACC,SAAlC,EAA6C;AACzCH,UAAAA,WAAW,CAAC+E,cAAZ,CAA2BD,cAA3B;AACA,eAAK1F,YAAL,GAAoB,IAApB;AACH;;AAED,cAAM4F,qBAAqB,GAAG,KAAKC,SAAL,CAAeL,UAAf,CAA9B;;AACA,YAAII,qBAAJ,EAA2B;AACvB;AACH;;AAEDV,QAAAA,0BAA0B,GAAG,IAA7B;AACH,OAvBD,MAuBO;AAAE;AACL,oCAAY,oBAAmB,KAAKlI,IAAK,yBAAwB4D,WAAW,CAAC5D,IAAK,EAAlF;;AACA,YAAI4D,WAAW,CAACC,IAAZ,KAAqBC,QAAQ,CAACC,SAAlC,EAA6C;AACzCH,UAAAA,WAAW,CAAC+E,cAAZ,CAA2BV,eAA3B;AACA,eAAKjF,YAAL,GAAoB,IAApB,CAFyC,CAGzC;;AACAiF,UAAAA,eAAe,GAAG,GAAlB;AACH;;AACD,YAAIzG,+BAAJ,EAAyB;AACrBwG,UAAAA,YAAY,GAAGC,eAAf;AACH;;AACD;AACH;AACJ;;AAED,gCAAY,oBAAmB,KAAKjI,IAAK,cAAzC;AACA;;AAEA,QAAI,KAAKgD,YAAL,IAAqB,KAAKN,YAAL,CAAkBmB,IAAlB,KAA2BC,QAAQ,CAACC,SAA7D,EAAwE;AACpE,WAAKf,YAAL,GAAoB,KAApB;;AACA,WAAKN,YAAL,CAAkBoG,qBAAlB,CAAwC,KAAK5F,WAA7C;AACH;;AAED,QAAI,KAAKP,wBAAL,IAAiC,KAAKM,UAAtC,IAAoD,KAAKP,YAAL,CAAkBmB,IAAlB,KAA2BC,QAAQ,CAACC,SAA5F,EAAuG;AACnG,WAAKd,UAAL,GAAkB,KAAlB;;AACA,WAAKN,wBAAL,CAA8BoG,mBAA9B,CAAkD,KAAK7F,WAAvD;AACH;;AAED,WAAO+E,eAAP;AACH;;AAEOtE,EAAAA,OAAO,GAAI;AACf,UAAM;AACFjB,MAAAA,YAAY,EAAEkB,WADZ;AAEFjB,MAAAA,wBAAwB,EAAEqG,uBAFxB;AAGFlG,MAAAA,WAAW,EAAEmG;AAHX,QAIF,IAJJ;;AAKA,QAAIrF,WAAW,CAACC,IAAZ,KAAqBC,QAAQ,CAACC,SAAlC,EAA6C;AACzCH,MAAAA,WAAW,CAACsF,cAAZ,CAA2BD,UAA3B;AACH;;AACD,QAAID,uBAAJ,EAA6B;AACzB,UAAIA,uBAAuB,CAACnF,IAAxB,KAAiCC,QAAQ,CAACC,SAA9C,EAAyD;AACrDiF,QAAAA,uBAAuB,CAACG,YAAxB,CAAqC,KAAKpG,SAA1C;AACH;AACJ;AACJ;AAED;AACJ;AACA;AACA;AACA;AACA;;;AACYwF,EAAAA,2BAA2B,CAAEhH,SAAF,EAA+B;AAC9D,UAAMqC,WAAW,GAAG,KAAKlB,YAAzB;AAEA,QAAI0G,oBAAoB,GAAGC,QAA3B;AACA,QAAIC,+BAAsD,GAAG,IAA7D;;AAEA,UAAMC,MAAM,GAAG,KAAKC,gBAAL,CACX5F,WADW,EAEXA,WAFW,EAGXrC,SAHW,EAIXkI,2BAJW,CAAf;;AAMA,QAAIF,MAAJ,EAAY;AACR,OAAC;AACGd,QAAAA,QAAQ,EAAEW,oBADb;AAEGZ,QAAAA,UAAU,EAAEc;AAFf,UAGGC,MAHJ;AAIH;;AAED,QAAI3F,WAAW,CAACC,IAAZ,KAAqBC,QAAQ,CAACC,SAAlC,EAA6C;AACzC,WAAK,IAAI2F,QAAiC,GAAG9F,WAAW,CAACL,YAAzD,EACImG,QAAQ,KAAK,IADjB,EAEIA,QAAQ,GAAGA,QAAQ,CAAC5D,MAFxB,EAEgC;AAC5B,cAAM6D,QAAQ,GAAG,KAAKH,gBAAL,CACbE,QAAQ,CAAChE,GADI,EAEb9B,WAFa,EAGbrC,SAHa,EAIbqI,uBAJa,CAAjB;;AAMA,YAAID,QAAQ,IAAIA,QAAQ,CAAClB,QAAT,GAAoBW,oBAApC,EAA0D;AACtD,WAAC;AACGX,YAAAA,QAAQ,EAAEW,oBADb;AAEGZ,YAAAA,UAAU,EAAEc;AAFf,cAGGK,QAHJ;AAIH;AACJ;AACJ;;AAED,UAAME,MAAM,GAAGC,oBAAf;;AAEA,QAAIR,+BAAJ,EAAqC;AACjC,aAAOO,MAAM,CAACE,GAAP,CAAWT,+BAAX,EAA4CF,oBAA5C,CAAP;AACH;;AAED,WAAO,IAAP;AACH;AAED;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;;;AACYI,EAAAA,gBAAgB,CACpBjJ,IADoB,EACJyJ,QADI,EACgBzI,SADhB,EAC6CsI,MAD7C,EAEE;AACtB,+BAAatJ,IAAI,KAAKyJ,QAAT,IAAqBzJ,IAAI,CAACsD,IAAL,KAAcC,QAAQ,CAAC4B,GAAzD;AACA,UAAM;AAAEa,MAAAA;AAAF,QAA0BhG,IAAhC;AACA,UAAM0J,YAAY,GAAG1D,mBAAmB,CAAClC,MAAzC;AACA,QAAI+E,oBAAoB,GAAGC,QAA3B;AACA,QAAIC,+BAAsD,GAAG,IAA7D;;AACA,SAAK,IAAIY,WAAW,GAAG,CAAvB,EAA0BA,WAAW,GAAGD,YAAxC,EAAsD,EAAEC,WAAxD,EAAqE;AACjE,YAAM1B,UAAU,GAAGjC,mBAAmB,CAAC2D,WAAD,CAAtC;AACA,YAAM;AAAElD,QAAAA;AAAF,UAAiBwB,UAAvB;AACA,YAAM2B,WAAW,GAAGnD,UAAU,CAAC3C,MAA/B,CAHiE,CAKjE;;AACA,UAAI8F,WAAW,KAAK,CAApB,EAAuB;AACnB,YAAI5J,IAAI,CAACsD,IAAL,KAAcC,QAAQ,CAACV,KAAvB,IAAgC7C,IAAI,CAACsD,IAAL,KAAcC,QAAQ,CAACT,IAA3D,EAAiE;AAC7D;AACA,iBAAOwG,MAAM,CAACE,GAAP,CAAWvB,UAAX,EAAuB,GAAvB,CAAP;AACH;;AACD,YAAI,CAACA,UAAU,CAACpB,oBAAhB,EAAsC;AAClC;AACA;AACH;AACJ;;AAED,UAAIgD,iBAAiB,GAAG,GAAxB;;AAEA,UAAIJ,QAAQ,CAACnG,IAAT,KAAkBC,QAAQ,CAACC,SAA3B,IAAwCyE,UAAU,CAACpB,oBAAvD,EAA6E;AACzE,cAAMiD,QAAQ,GAAGL,QAAQ,CAACnK,QAAT,GAAoB2I,UAAU,CAACnB,aAAhD;AACA+C,QAAAA,iBAAiB,GAAGE,IAAI,CAACC,GAAL,CAASF,QAAQ,GAAGL,QAAQ,CAACQ,YAA7B,EAA2C,GAA3C,CAApB;;AACA,YAAIJ,iBAAiB,GAAG7I,SAAxB,EAAmC;AAC/B;AACH;AACJ;;AAED,UAAIkJ,SAAS,GAAG,IAAhB;;AACA,WAAK,IAAIhD,UAAU,GAAG,CAAtB,EAAyBA,UAAU,GAAG0C,WAAtC,EAAmD,EAAE1C,UAArD,EAAiE;AAC7D,cAAMR,SAAS,GAAGD,UAAU,CAACS,UAAD,CAA5B;;AACA,YAAI,CAACR,SAAS,CAACyD,IAAV,EAAL,EAAuB;AACnBD,UAAAA,SAAS,GAAG,KAAZ;AACA;AACH;AACJ;;AACD,UAAI,CAACA,SAAL,EAAgB;AACZ;AACH;;AAED,UAAIL,iBAAiB,KAAK,GAA1B,EAA+B;AAC3B;AACA,eAAOP,MAAM,CAACE,GAAP,CAAWvB,UAAX,EAAuB,GAAvB,CAAP;AACH;;AAED,UAAI4B,iBAAiB,GAAGhB,oBAAxB,EAA8C;AAC1CA,QAAAA,oBAAoB,GAAGgB,iBAAvB;AACAd,QAAAA,+BAA+B,GAAGd,UAAlC;AACH;AACJ;;AACD,QAAIc,+BAAJ,EAAqC;AACjC,aAAOO,MAAM,CAACE,GAAP,CAAWT,+BAAX,EAA4CF,oBAA5C,CAAP;AACH;;AACD,WAAO,IAAP;AACH;AAED;AACJ;AACA;AACA;AACA;;;AACYP,EAAAA,SAAS,CAAEL,UAAF,EAA8B;AAC3C,UAAM;AAAE9F,MAAAA,YAAY,EAAEkB;AAAhB,QAAgC,IAAtC;AAEA,qCAAiB,oBAAmB,KAAK5D,IAAK,cAAa4D,WAAW,CAAC5D,IAAK,OAAMwI,UAAU,CAACjE,EAAX,CAAcvE,IAAK,GAArG;AAEA,UAAM;AAAE4C,MAAAA,sBAAsB,EAAEwB;AAA1B,QAAoD,IAA1D;;AAEA,SAAKuG,kBAAL,CAAwBnC,UAAxB;;AACApE,IAAAA,qBAAqB,CAACwD,IAAtB,CAA2BY,UAA3B;;AAEA,UAAMoC,UAAU,GAAG,KAAKC,+BAAL,EAAnB;;AACA,QAAID,UAAJ,EAAgB;AACZ;AACA,WAAKE,qBAAL,CAA2BF,UAA3B;;AACA,aAAO,KAAP;AACH,KAJD,MAIO;AACH,aAAO,IAAP;AACH;AACJ;AAED;AACJ;AACA;AACA;;;AACY9C,EAAAA,2BAA2B,GAAI;AACnC,UAAM;AACFlF,MAAAA,sBAAsB,EAAEwB;AADtB,QAEF,IAFJ;AAIA,UAAM2G,wBAAwB,GAAG3G,qBAAqB,CAACC,MAAvD;;AAEA,QAAI0G,wBAAwB,KAAK,CAAjC,EAAoC;AAChC,aAAO,KAAP;AACH;;AAED,UAAMC,cAAc,GAAG5G,qBAAqB,CAAC2G,wBAAwB,GAAG,CAA5B,CAA5C;AACA,UAAME,QAAQ,GAAGD,cAAc,CAACzG,EAAhC;;AAEA,QAAI0G,QAAQ,CAACpH,IAAT,KAAkBC,QAAQ,CAACC,SAA/B,EAA0C;AACtC,YAAM6G,UAAU,GAAG,KAAKC,+BAAL,EAAnB;;AACA,UAAID,UAAJ,EAAgB;AACZ;AACA,aAAKE,qBAAL,CAA2BF,UAA3B;;AACA,eAAO,KAAP;AACH,OAJD,MAIO;AACH,eAAO,IAAP;AACH;AACJ;;AAED,WAAO,KAAP;AACH;;AAEOC,EAAAA,+BAA+B,GAAI;AACvC,UAAM;AACFjI,MAAAA,sBAAsB,EAAEwB;AADtB,QAEF,IAFJ;AAIA,UAAM2G,wBAAwB,GAAG3G,qBAAqB,CAACC,MAAvD;AACA,+BAAa0G,wBAAwB,KAAK,CAA1C;AAEA,UAAMC,cAAc,GAAG5G,qBAAqB,CAAC2G,wBAAwB,GAAG,CAA5B,CAA5C;AACA,QAAIE,QAAQ,GAAGD,cAAc,CAACzG,EAA9B;;AACA,WAAO0G,QAAQ,CAACpH,IAAT,KAAkBC,QAAQ,CAACC,SAAlC,GAA8C;AAC1C,YAAMuE,eAAe,GAAG,KAAKkB,gBAAL,CACpByB,QADoB,EAEpBA,QAFoB,EAGpB,GAHoB,EAIpBnB,oBAJoB,CAAxB;;AAMA,UAAI,CAACxB,eAAL,EAAsB;AAClB;AACH;;AACD,YAAME,UAAU,GAAGF,eAAe,CAACE,UAAnC;;AACA,WAAKmC,kBAAL,CAAwBnC,UAAxB;;AACApE,MAAAA,qBAAqB,CAACwD,IAAtB,CAA2BY,UAA3B;AACAyC,MAAAA,QAAQ,GAAGzC,UAAU,CAACjE,EAAtB;AACH;;AAED,WAAO0G,QAAQ,CAACpH,IAAT,KAAkBC,QAAQ,CAACC,SAA3B,GAAuCkH,QAAvC,GAAkD,IAAzD;AACH;;AAEON,EAAAA,kBAAkB,CAAEnC,UAAF,EAA8B;AACpD,UAAM;AAAEjE,MAAAA;AAAF,QAASiE,UAAf;;AAEA,QAAIjE,EAAE,CAACV,IAAH,KAAYC,QAAQ,CAACV,KAAzB,EAAgC;AAC5B;AACA,WAAK8H,iBAAL,CAAuB3G,EAAvB;AACH;AACJ;;AAEO4G,EAAAA,0BAA0B,GAAI;AAClC,UAAM;AAAEvI,MAAAA,sBAAsB,EAAEwB;AAA1B,QAAoD,IAA1D;AAEA,UAAM6F,YAAY,GAAG7F,qBAAqB,CAACC,MAA3C;;AACA,SAAK,IAAI6F,WAAW,GAAG,CAAvB,EAA0BA,WAAW,GAAGD,YAAxC,EAAsD,EAAEC,WAAxD,EAAqE;AACjE,YAAM1B,UAAU,GAAGpE,qBAAqB,CAAC8F,WAAD,CAAxC;;AACA,WAAKkB,0BAAL,CAAgC5C,UAAhC;AACH;AACJ;;AAEOsC,EAAAA,qBAAqB,CAAEO,UAAF,EAA+B;AACxD;AACA,SAAKF,0BAAL;;AAEA,SAAKtI,mBAAL,GAA2B,GAA3B;AACA,SAAKF,wBAAL,GAAgC0I,UAAhC;AACA,SAAKpI,UAAL,GAAkB,KAAlB;AAEAoI,IAAAA,UAAU,CAACC,WAAX;;AACA,SAAKJ,iBAAL,CAAuBG,UAAvB;AACH;AAED;AACJ;AACA;AACA;AACA;AACA;;;AACYhD,EAAAA,wBAAwB,CAAE9G,SAAF,EAAqB;AAAA;;AACjD,UAAM;AACFqB,MAAAA,sBAAsB,EAAEwB,qBADtB;AAEFzB,MAAAA,wBAAwB,EAAEqG;AAFxB,QAGF,IAHJ;AAKA,sCAAoB5E,qBAAqB,CAACC,MAAtB,GAA+B,CAAnD;AACA,sCAAoB2E,uBAApB;AAEA,UAAMhH,iBAAiB,GAAGoC,qBAAqB,CAAC,CAAD,CAA/C;AAEA,UAAM;AACFvE,MAAAA,QAAQ,EAAE0L,kBADR;AAEF/G,MAAAA;AAFE,QAGFxC,iBAHJ;AAKA,UAAMwE,QAAQ,GAAG,KAAK9D,YAAtB;AACA,UAAMoE,MAAM,GAAGkC,uBAAf;AAEA,QAAIwC,OAAO,GAAG,GAAd;AACA,QAAIC,KAAK,GAAG,GAAZ;;AACA,QAAIF,kBAAkB,IAAI,CAA1B,EAA6B;AACzBC,MAAAA,OAAO,GAAG,GAAV;AACAC,MAAAA,KAAK,GAAG,GAAR;AACH,KAHD,MAGO;AACH,iCAAajF,QAAQ,CAAC3C,IAAT,KAAkBC,QAAQ,CAACC,SAAxC;AACA,YAAM;AAAElB,QAAAA,mBAAmB,EAAE6I;AAAvB,UAA8C,IAApD;AACA,YAAMC,eAAe,GAAGnH,kBAAkB,GAAG+G,kBAAkB,GAAG/E,QAAQ,CAAC3G,QAAjC,GAA4C0L,kBAAtF;AACA,YAAMK,eAAe,GAAGF,kBAAkB,GAAGC,eAA7C;AACA,YAAME,MAAM,GAAGF,eAAe,GAAGC,eAAjC;AACA,iCAAaC,MAAM,IAAI,GAAvB;AACAL,MAAAA,OAAO,GAAGlB,IAAI,CAACwB,GAAL,CAASD,MAAT,EAAiBtK,SAAjB,CAAV;AACAkK,MAAAA,KAAK,GAAG,KAAK5I,mBAAL,GAA2B,CAAC+I,eAAe,GAAGJ,OAAnB,IAA8BG,eAAjE;AACA,iCAAaF,KAAK,IAAI,GAAT,IAAgBA,KAAK,IAAI,GAAtC;AACH;;AAED,UAAMM,UAAU,mBAAGjF,MAAH,aAAGA,MAAH,uBAAGA,MAAM,CAAE9G,IAAX,uDAAmB,SAAnC;AAEA,UAAMmD,MAAM,GAAG,KAAKb,OAApB;AACA,qCACK,oBAAmB,KAAKtC,IAAK,wBAAuBwG,QAAQ,CAACxG,IAAK,OAAM+L,UAAW,EAApF,GACG,cAAaN,KAAM,mBAAkB,KAAKnJ,OAAQ,GAFzD;AAKA,SAAKQ,WAAL,GAAmBK,MAAM,IAAI,MAAMsI,KAAV,CAAzB;AACA,SAAK1I,SAAL,GAAiBI,MAAM,GAAGsI,KAA1B;AAEA,UAAMO,iBAAiB,GAAGR,OAAO,KAAK,CAAtC;AACA,UAAMS,WAAW,GAAGR,KAAK,KAAK,GAA9B;;AAEA,QAAIjF,QAAQ,CAAC3C,IAAT,KAAkBC,QAAQ,CAACC,SAA3B,IAAwCiI,iBAA5C,EAA+D;AAC3D,uCAAiB,UAASxF,QAAQ,CAACxG,IAAK,EAAxC;AACAwG,MAAAA,QAAQ,CAACmC,cAAT,CAAwB6C,OAAxB;AACA,WAAKxI,YAAL,GAAoB,IAApB;AACA;AACH;;AAED,QAAI8D,MAAM,IAAIkF,iBAAd,EAAiC;AAC7B,uCAAiB,UAASlF,MAAM,CAAC9G,IAAK,EAAtC;AACA8G,MAAAA,MAAM,CAACoF,YAAP,CAAoBV,OAApB;AACA,WAAKvI,UAAL,GAAkB,IAAlB;AACA;AACH;;AAED;;AAEA,QAAIgJ,WAAJ,EAAiB;AACb;AACA,kCAAY,oBAAmB,KAAKjM,IAAK,4BAA2BwG,QAAQ,CAACxG,IAAK,OAAM+L,UAAW,GAAnG;;AAEA,WAAKI,gBAAL,CAAsB3F,QAAtB,EAJa,CAKb;AACA;AACA;;;AACA,YAAM;AAAE5D,QAAAA,sBAAsB,EAAEwJ;AAA1B,UAA0C,IAAhD;AACA,YAAMC,WAAW,GAAGD,WAAW,CAAC/H,MAAhC;;AACA,WAAK,IAAI6F,WAAW,GAAG,CAAvB,EAA0BA,WAAW,GAAGmC,WAAxC,EAAqD,EAAEnC,WAAvD,EAAoE;AAChE,cAAM;AAAE3F,UAAAA;AAAF,YAAS6H,WAAW,CAAClC,WAAD,CAA1B;;AACA,YAAI3F,EAAE,CAACV,IAAH,KAAYC,QAAQ,CAACT,IAAzB,EAA+B;AAC3B,eAAK8I,gBAAL,CAAsB5H,EAAtB;AACH;AACJ;;AACD,WAAKvB,YAAL,GAAoB,KAAKC,UAAzB;AACA,WAAKA,UAAL,GAAkB,KAAlB;AACA6D,MAAAA,MAAM,CAACwF,gBAAP;AACA,WAAK5J,YAAL,GAAoBoE,MAApB;AACA,WAAKnE,wBAAL,GAAgC,IAAhC;AACA,WAAKC,sBAAL,CAA4ByB,MAA5B,GAAqC,CAArC;AACA,WAAKvB,WAAL,GAAmB,GAAnB;AACA,WAAKC,SAAL,GAAiB,GAAjB;AACH;;AAED,WAAOyI,OAAP;AACH;;AAEOJ,EAAAA,0BAA0B,CAAE5C,UAAF,EAA8B;AAC5D,UAAM;AAAElB,MAAAA;AAAF,QAAekB,UAArB;;AACA,QAAIlB,QAAJ,EAAc;AACV,YAAMiF,SAAS,GAAGjF,QAAQ,CAACjD,MAA3B;;AACA,WAAK,IAAImI,QAAQ,GAAG,CAApB,EAAuBA,QAAQ,GAAGD,SAAlC,EAA6C,EAAEC,QAA/C,EAAyD;AACrD,cAAM7E,OAAO,GAAGL,QAAQ,CAACkF,QAAD,CAAxB;;AACA,aAAKhJ,aAAL,CAAmBmE,OAAnB;AACH;AACJ;AACJ;;AAEOnE,EAAAA,aAAa,CAAExD,IAAF,EAAgB;AACjC,UAAM;AAAEyM,MAAAA,aAAa,EAAE/L;AAAjB,QAAoC,IAA1C;AACAA,IAAAA,cAAc,CAACV,IAAD,CAAd;AACH;;AAEOkL,EAAAA,iBAAiB,CAAE3K,IAAF,EAAkB;AAAA;;AACvC,UAAM;AAAE2C,MAAAA,WAAW,EAAEzD;AAAf,QAA8B,IAApC;;AACA,YAAQc,IAAI,CAACsD,IAAb;AACA;AACI;;AACJ,WAAKC,QAAQ,CAACC,SAAd;AAAyB;AACrBxD,UAAAA,IAAI,CAACsF,UAAL,CAAgB6G,2BAAhB,CAA4CjN,UAA5C,EAAwDc,IAAI,CAACmE,eAAL,EAAxD;AACA;AACH;;AACD,WAAKZ,QAAQ,CAACV,KAAd;AACI,iCAAA7C,IAAI,CAACgD,YAAL,CAAkBsC,UAAlB,gFAA8B8G,4BAA9B,CAA2DlN,UAA3D;AACA;AATJ;AAWH;;AAEO0M,EAAAA,gBAAgB,CAAE5L,IAAF,EAAkB;AAAA;;AACtC,UAAM;AAAE2C,MAAAA,WAAW,EAAEzD;AAAf,QAA8B,IAApC;;AACA,YAAQc,IAAI,CAACsD,IAAb;AACA;AACI;;AACJ,WAAKC,QAAQ,CAACC,SAAd;AAAyB;AACrBxD,UAAAA,IAAI,CAACsF,UAAL,CAAgB+G,0BAAhB,CAA2CnN,UAA3C,EAAuDc,IAAI,CAACyD,iBAAL,EAAvD;AACA;AACH;;AACD,WAAKF,QAAQ,CAACT,IAAd;AACI,kCAAA9C,IAAI,CAACgD,YAAL,CAAkBsC,UAAlB,kFAA8BgH,2BAA9B,CAA0DpN,UAA1D;AACA;AATJ;AAWH;;AApuBW;;AAuuBhB,SAASqN,sBAAT,GAAsD;AAClD,SAAO;AACHC,IAAAA,QAAQ,EAAE;AADP,GAAP;AAGH;;AAED,MAAMC,yBAA+C,GAAGrL,MAAM,CAACsL,MAAP,CAAc;AAClEC,EAAAA,IAAI,GAAI;AACJ,WAAO;AACHC,MAAAA,IAAI,EAAE,IADH;AAEHjN,MAAAA,KAAK,EAAEmB;AAFJ,KAAP;AAIH;;AANiE,CAAd,CAAxD;AASA,MAAM6C,yBAA+C,GAAGvC,MAAM,CAACsL,MAAP,CAAc;AAClE,GAACG,MAAM,CAACC,QAAR,IAAqB;AACjB,WAAOL,yBAAP;AACH;;AAHiE,CAAd,CAAxD;;AAkBA,MAAMM,oBAAN,CAA2B;AAAA;AAAA,SAChB9E,UADgB,GACmC,IADnC;AAAA,SAGhBC,QAHgB,GAGL,GAHK;AAAA;;AAKhBsB,EAAAA,GAAG,CAAEvB,UAAF,EAA6CC,QAA7C,EAA+D;AACrE,SAAKD,UAAL,GAAkBA,UAAlB;AACA,SAAKC,QAAL,GAAgBA,QAAhB;AACA,WAAO,IAAP;AACH;;AATsB;;AAY3B,MAAMqB,oBAAoB,GAAG,IAAIwD,oBAAJ,EAA7B;AAEA,MAAM7D,2BAA2B,GAAG,IAAI6D,oBAAJ,EAApC;AAEA,MAAM1D,uBAAuB,GAAG,IAAI0D,oBAAJ,EAAhC;IAEKxJ,Q;;WAAAA,Q;AAAAA,EAAAA,Q,CAAAA,Q;AAAAA,EAAAA,Q,CAAAA,Q;AAAAA,EAAAA,Q,CAAAA,Q;AAAAA,EAAAA,Q,CAAAA,Q;GAAAA,Q,KAAAA,Q;;AAIE,MAAMyJ,SAAN,CAAgB;AAKnBjO,EAAAA,WAAW,CAAEiB,IAAF,EAAe;AAAA,SAIVP,IAJU;AAAA,SAMnBuG,mBANmB,GAM8B,EAN9B;AACtB,SAAKvG,IAAL,GAAYO,IAAI,CAACP,IAAjB;AACH;;AAPkB;;;;AAwBvB,MAAMmG,sBAAN,CAA6B;AACzB7G,EAAAA,WAAW,CAAEiB,IAAF,EAA0B;AACjC,SAAKiN,WAAL,GAAmBjN,IAAI,CAACkN,qBAAL,EAAnB;AACH;;AAEMf,EAAAA,2BAA2B,CAAEjN,UAAF,EAAmCiO,MAAnC,EAAwE;AACtG,SAAKC,oCAAL,CAA0C,oBAA1C,EAAgElO,UAAhE,EAA4EiO,MAA5E;AACH;;AAEME,EAAAA,4BAA4B,CAAEnO,UAAF,EAAmCiO,MAAnC,EAAwE;AACvG,SAAKC,oCAAL,CAA0C,qBAA1C,EAAiElO,UAAjE,EAA6EiO,MAA7E;AACH;;AAEMd,EAAAA,0BAA0B,CAAEnN,UAAF,EAAmCiO,MAAnC,EAAwE;AACrG,SAAKC,oCAAL,CAA0C,mBAA1C,EAA+DlO,UAA/D,EAA2EiO,MAA3E;AACH;;AAEMf,EAAAA,4BAA4B,CAAElN,UAAF,EAAmC;AAClE,SAAKoO,qCAAL,CAA2C,qBAA3C,EAAkEpO,UAAlE;AACH;;AAEMoN,EAAAA,2BAA2B,CAAEpN,UAAF,EAAmC;AACjE,SAAKoO,qCAAL,CAA2C,oBAA3C,EAAiEpO,UAAjE;AACH;;AAIOkO,EAAAA,oCAAoC,CAGxCG,UAHwC,EAIxCrO,UAJwC,EAKxCiO,MALwC,EAM1C;AACE,UAAM;AAAEF,MAAAA,WAAW,EAAE3H;AAAf,QAA8B,IAApC;AACA,UAAMkI,WAAW,GAAGlI,UAAU,CAACxB,MAA/B;;AACA,SAAK,IAAI2J,UAAU,GAAG,CAAtB,EAAyBA,UAAU,GAAGD,WAAtC,EAAmD,EAAEC,UAArD,EAAiE;AAC7D,YAAMC,SAAS,GAAGpI,UAAU,CAACmI,UAAD,CAA5B;;AACA,UAAIC,SAAS,CAACH,UAAD,CAAT,KAA0BI,6CAAsBC,SAAtB,CAAgCL,UAAhC,CAA9B,EAA2E;AACvEG,QAAAA,SAAS,CAACH,UAAD,CAAT,CAAsBrO,UAAtB,EAAkCiO,MAAlC;AACH;AACJ;AACJ;;AAEOG,EAAAA,qCAAqC,CAGzCC,UAHyC,EAIzCrO,UAJyC,EAK3C;AACE,UAAM;AAAE+N,MAAAA,WAAW,EAAE3H;AAAf,QAA8B,IAApC;AACA,UAAMkI,WAAW,GAAGlI,UAAU,CAACxB,MAA/B;;AACA,SAAK,IAAI2J,UAAU,GAAG,CAAtB,EAAyBA,UAAU,GAAGD,WAAtC,EAAmD,EAAEC,UAArD,EAAiE;AAC7D,YAAMC,SAAS,GAAGpI,UAAU,CAACmI,UAAD,CAA5B;;AACA,UAAIC,SAAS,CAACH,UAAD,CAAT,KAA0BI,6CAAsBC,SAAtB,CAAgCL,UAAhC,CAA9B,EAA2E;AACvEG,QAAAA,SAAS,CAACH,UAAD,CAAT,CAAsBrO,UAAtB;AACH;AACJ;AACJ;;AA1DwB;;AAqEtB,MAAM4F,eAAN,SAA8BkI,SAA9B,CAAwC;AAC3CjO,EAAAA,WAAW,CAAEiB,IAAF,EAAqBF,OAArB,EAA4C;AAAA;;AACnD,UAAME,IAAN;AADmD,SAqBvCsD,IArBuC,GAqBhCC,QAAQ,CAACC,SArBuB;AAAA,SAsG/CqK,OAtG+C,GAsGlB,IAtGkB;AAAA,SAuG/CC,MAvG+C,GAuGtC,GAvGsC;AAAA,SAwG/CC,SAxG+C,GAwGnB;AAChCvB,MAAAA,QAAQ,EAAE,GADsB;AAEhCwB,MAAAA,WAAW,EAAEzB,sBAAsB;AAFH,KAxGmB;AAAA,SA4G/C0B,OA5G+C,GA4GrB;AAC9BzB,MAAAA,QAAQ,EAAE,GADoB;AAE9BwB,MAAAA,WAAW,EAAEzB,sBAAsB;AAFL,KA5GqB;AAEnD,UAAM2B,KAAK,GAAG,wBACVpO,OADU,EAEVE,IAAI,CAACkO,KAFK,EAGVC,yBAAaC,KAHH,EAIV,KAAKC,SAJK,EAKV,IALU,CAAd;AAOA,SAAKP,MAAL,GAAcI,KAAd;AACA,UAAMI,iBAAoC,GAAG,EACzC,GAAGxO;AADsC,KAA7C;AAGA,UAAMyO,UAAU,4CAAGvO,IAAI,CAACwO,MAAR,iDAAG,aAAc7H,sBAAd,EAA0B2H,iBAA1B,CAAH,yEAAmD,IAAnE;;AACA,QAAIC,UAAJ,EAAgB;AACZnN,MAAAA,MAAM,CAACqN,cAAP,CAAsBF,UAAtB,EAAkC,cAAlC,EAAkD;AAAE5O,QAAAA,KAAK,EAAE,KAAKF;AAAd,OAAlD;AACH;;AACD,SAAKoO,OAAL,GAAeU,UAAf;AACA,SAAKjJ,UAAL,GAAkB,IAAIM,sBAAJ,CAA2B5F,IAA3B,CAAlB;AACH;;AAMW,MAARV,QAAQ,GAAI;AAAA;;AACZ,qDAAO,KAAKuO,OAAZ,kDAAO,cAAcvO,QAArB,yEAAiC,GAAjC;AACH;;AAEe,MAAZ2K,YAAY,GAAI;AAChB,WAAO,KAAK8D,SAAL,CAAevB,QAAf,GAA0B,KAAKlN,QAAtC;AACH;;AAEM8I,EAAAA,cAAc,CAAEpH,SAAF,EAAqB;AACtC,SAAK+M,SAAL,CAAevB,QAAf,GAA0BkC,kBAAkB,CACxC,KAAKX,SAAL,CAAevB,QADyB,EAExC,KAAKlN,QAFmC,EAGxC0B,SAAS,GAAG,KAAK8M,MAHuB,CAA5C;AAKH;;AAEMnC,EAAAA,YAAY,CAAE3K,SAAF,EAAqB;AACpC,SAAKiN,OAAL,CAAazB,QAAb,GAAwBkC,kBAAkB,CACtC,KAAKT,OAAL,CAAazB,QADyB,EAEtC,KAAKlN,QAFiC,EAGtC0B,SAAS,GAAG,KAAK8M,MAHqB,CAA1C;AAKH;;AAEMvF,EAAAA,qBAAqB,CAAErJ,UAAF,EAAmC;AAC3D,SAAKoG,UAAL,CAAgB+H,4BAAhB,CAA6CnO,UAA7C,EAAyD,KAAKuE,iBAAL,EAAzD;AACH;;AAEM+E,EAAAA,mBAAmB,CAAEtJ,UAAF,EAAmC;AACzD,SAAKoG,UAAL,CAAgB+H,4BAAhB,CAA6CnO,UAA7C,EAAyD,KAAKiF,eAAL,EAAzD;AACH;;AAEMV,EAAAA,iBAAiB,GAAiC;AACrD,UAAM;AAAEuK,MAAAA,WAAW,EAAEW;AAAf,QAA+B,KAAKZ,SAA1C;;AACA,QAAIlI,4BAAJ,EAAW;AACP8I,MAAAA,WAAW,CAACrK,YAAZ,GAA2B,KAAK7E,IAAhC;AACH;;AACDkP,IAAAA,WAAW,CAACnC,QAAZ,GAAuBoC,iBAAiB,CAAC,KAAKb,SAAL,CAAevB,QAAhB,CAAxC;AACA,WAAOmC,WAAP;AACH;;AAEMxK,EAAAA,eAAe,GAAiC;AACnD,UAAM;AAAE6J,MAAAA,WAAW,EAAEW;AAAf,QAA+B,KAAKV,OAA1C;;AACA,QAAIpI,4BAAJ,EAAW;AACP8I,MAAAA,WAAW,CAACrK,YAAZ,GAA2B,KAAK7E,IAAhC;AACH;;AACDkP,IAAAA,WAAW,CAACnC,QAAZ,GAAuBoC,iBAAiB,CAAC,KAAKX,OAAL,CAAazB,QAAd,CAAxC;AACA,WAAOmC,WAAP;AACH;;AAEM5D,EAAAA,WAAW,GAAI;AAClB,SAAKkD,OAAL,CAAazB,QAAb,GAAwB,GAAxB;AACH;;AAEMT,EAAAA,gBAAgB,GAAI;AACvB,SAAKgC,SAAL,CAAevB,QAAf,GAA0B,KAAKyB,OAAL,CAAazB,QAAvC;AACH;;AAEM7D,EAAAA,cAAc,CAAE/F,MAAF,EAAkB;AAAA;;AACnC,2BAAKiL,OAAL,kEAAcgB,MAAd,CAAqB,KAAKd,SAAL,CAAevB,QAApC,EAA8C5J,MAA9C;AACH;;AAEMgG,EAAAA,YAAY,CAAEhG,MAAF,EAAkB;AAAA;;AACjC,2BAAKiL,OAAL,kEAAcgB,MAAd,CAAqB,KAAKZ,OAAL,CAAazB,QAAlC,EAA4C5J,MAA5C;AACH;;AAEMc,EAAAA,eAAe,CAAEoL,UAAF,EAA4C;AAC9D,UAAM;AAAEjB,MAAAA,OAAO,EAAEkB;AAAX,QAAsB,IAA5B;;AACA,QAAI,CAACA,MAAL,EAAa;AACT,aAAOpL,yBAAP;AACH,KAFD,MAEO;AACH,aAAO;AACH,SAACkJ,MAAM,CAACC,QAAR,GAAmB,MAAMiC,MAAM,CAACrL,eAAP,CAAuBoL,UAAvB;AADtB,OAAP;AAGH;AACJ;;AAaOT,EAAAA,SAAS,CAAE1O,KAAF,EAAiB;AAC9B,SAAKmO,MAAL,GAAcnO,KAAd;AACH;;AApH0C;;;;AAuH/C,SAAS+O,kBAAT,CAA6BM,eAA7B,EAAsD1P,QAAtD,EAAwE0B,SAAxE,EAA2F;AACvF,MAAI1B,QAAQ,KAAK,GAAjB,EAAsB;AAClB;AACA,WAAO,GAAP;AACH;;AACD,QAAMkN,QAAQ,GAAGwC,eAAe,GAAGhO,SAAS,GAAG1B,QAA/C;AACA,SAAOkN,QAAP;AACH;;AAED,SAASoC,iBAAT,CAA4BpC,QAA5B,EAA8C;AAC1C,SAAOA,QAAQ,GAAGzC,IAAI,CAACkF,KAAL,CAAWzC,QAAX,CAAlB;AACH;;AAOM,MAAMxH,gBAAN,SAA+BgI,SAA/B,CAAyC;AAC5CjO,EAAAA,WAAW,CAAEiB,IAAF,EAAesD,IAAf,EAA+C7D,IAA/C,EAA6D;AACpE,UAAMO,IAAN;AADoE,SAKxDsD,IALwD;AAEpE,SAAKA,IAAL,GAAYA,IAAZ;AACH;;AAJ2C;;;;AAwBhD,MAAMzD,WAAN,CAAkB;AAGdd,EAAAA,WAAW,CAAEW,IAAF,EAAsBC,KAAtB,EAAoC;AAAA,SAFxCD,IAEwC;AAAA,SA6BvCwP,MA7BuC;AAAA,SA8BvCC,KA9BuC,GA8BrB,EA9BqB;AAC3C,SAAKzP,IAAL,GAAYA,IAAZ;AACA,SAAKwP,MAAL,GAAcvP,KAAd;AACH;;AAEQ,MAALA,KAAK,GAAI;AACT,WAAO,KAAKuP,MAAZ;AACH;;AAEQ,MAALvP,KAAK,CAAEA,KAAF,EAAS;AACd,SAAKuP,MAAL,GAAcvP,KAAd;;AACA,SAAK,MAAM;AAAEyP,MAAAA,EAAF;AAAMC,MAAAA,OAAN;AAAeC,MAAAA;AAAf,KAAX,IAAoC,KAAKH,KAAzC,EAAgD;AAC5CC,MAAAA,EAAE,CAACG,IAAH,CAAQF,OAAR,EAAiB1P,KAAjB,EAAwB,GAAG2P,IAA3B;AACH;AACJ;;AAEME,EAAAA,IAAI,CACPJ,EADO,EAEPC,OAFO,EAGP,GAAGC,IAHI,EAIT;AACE,SAAKH,KAAL,CAAW9H,IAAX,CAAgB;AACZ+H,MAAAA,EAAE,EAAEA,EADQ;AAEZC,MAAAA,OAFY;AAGZC,MAAAA;AAHY,KAAhB;;AAKA,WAAO,KAAKJ,MAAZ;AACH;;AA9Ba"}