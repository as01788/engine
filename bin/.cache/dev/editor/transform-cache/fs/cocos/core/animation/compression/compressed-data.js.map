{"version":3,"sources":["file:///Users/disstian/Documents/CreatorProjects/engine3.3.0/cocos/core/animation/compression/compressed-data.ts"],"names":["CompressedData","CLASS_NAME_PREFIX_ANIM","compressRealTrack","track","curve","channel","mayBeCompressed","KeySharedRealCurves","allowedForCurve","_tracks","push","type","CompressedDataTrackType","FLOAT","binding","trackBindingTag","components","_addRealCurve","compressVectorTrack","vectorTrack","nComponents","componentsCount","channels","every","Array","i","VEC2","VEC3","VEC4","compressQuatTrack","KeySharedQuatCurves","_quatTracks","pointer","_addQuatCurve","createEval","binder","compressedDataEvalStatus","keySharedCurvesEvalStatuses","trackEvalStatuses","keysSharedQuatCurvesEvalStatues","quatTrackEvalStatuses","curves","_curves","result","curveCount","fill","trackTarget","immediate","Vec2","Vec3","Vec4","target","_quatCurves","from","length","Quat","CompressedDataEvaluator","collectAnimatedJoints","joints","trsPath","parseTrsPath","node","times","iKeySharedCurves","findIndex","shared","matchCurve","keySharedCurves","iCurve","addCurve","component","validate","serializable","constructor","_compressedDataEvalStatus","evaluate","time","compressedTrackEvalStatuses","getPreEvaluated","value","set","setValue"],"mappings":"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"}