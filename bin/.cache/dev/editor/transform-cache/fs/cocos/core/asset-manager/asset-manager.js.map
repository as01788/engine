{"version":3,"sources":["file:///Users/disstian/Documents/CreatorProjects/engine3.3.0/cocos/core/asset-manager/asset-manager.ts"],"names":["AssetManager","pipeline","append","preprocess","load","fetchPipeline","fetch","transformPipeline","parse","combine","bundles","assets","generalImportBase","generalNativeBase","dependUtil","force","EDITOR","PREVIEW","allowImageBitmap","sys","isMobile","utils","helper","downloader","parser","packManager","cacheAsset","cacheManager","presets","factory","preprocessPipe","fetchPipe","loadPipe","references","_releaseManager","releaseManager","_files","files","_parsed","parsed","_parsePipeline","BUILD","Pipeline","main","get","BuiltinBundleName","MAIN","resources","RESOURCES","init","options","clear","server","bundleVers","remoteBundles","importBase","endsWith","substr","length","nativeBase","getBundle","name","removeBundle","bundle","_destroy","remove","loadAny","requests","onProgress","onComplete","opts","onProg","onComp","preset","Array","isArray","slice","task","Task","create","input","async","preloadAny","loadRemote","url","undefined","reloadAsset","has","__isNative__","err","data","message","stack","ext","p1","p2","loadBundle","nameOrUrl","bundleName","releaseAsset","asset","tryRelease","releaseUnusedAssets","forEach","releaseAll","loadWithJson","json","Error","item","RequestItem","isNative","uuid","assetId","Date","getTime","Math","random","file","_uuid","Cache","Bundle","legacyCC","assetManager"],"mappings":"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"}