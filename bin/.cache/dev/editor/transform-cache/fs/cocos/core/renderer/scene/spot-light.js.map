{"version":3,"sources":["file:///Users/disstian/Documents/CreatorProjects/engine3.3.0/cocos/core/renderer/scene/spot-light.ts"],"names":["_forward","Vec3","_qt","Quat","_matView","Mat4","_matProj","_matViewProj","_matViewProjInv","SpotLight","Light","_init","JSB","nativeSpotLight","_nativeObj","setAABB","_aabb","native","setFrustum","_frustum","setDirection","_dir","setPosition","_pos","_destroy","_setDirection","dir","set","position","size","_size","setSize","range","_range","setRange","_needUpdate","luminance","isHDR","legacyCC","director","root","pipeline","pipelineSceneData","_luminanceHDR","_luminanceLDR","value","luminanceHDR","luminanceLDR","setLuminanceHDR","setLuminanceLDR","direction","spotAngle","_spotAngle","val","_angle","Math","cos","setAngle","angle","aspect","_aspect","setAspect","aabb","frustum","constructor","PI","AABB","create","Frustum","_type","LightType","SPOT","initialize","update","_node","hasChangedFlags","getWorldPosition","transformQuat","getWorldRotation","normalize","x","y","z","getWorldRT","invert","perspective","multiply"],"mappings":"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"}