{"version":3,"sources":["file:///Users/disstian/Documents/CreatorProjects/engine3.3.0/cocos/core/pipeline/forward/forward-pipeline.ts"],"names":["PIPELINE_TYPE","ForwardPipeline","RenderTextureConfig","RenderPipeline","_postRenderPass","postRenderPass","initialize","info","_flows","length","shadowFlow","ShadowFlow","initInfo","push","forwardFlow","ForwardFlow","activate","swapchain","EDITOR","console","_macros","CC_PIPELINE_TYPE","_pipelineSceneData","PipelineSceneData","_activeRenderer","_ensureEnoughSize","cameras","newWidth","_width","newHeight","_height","i","window","Math","max","width","height","destroy","_destroyUBOs","_destroyQuadInputAssembler","rpIter","_renderPasses","values","rpRes","next","done","value","_commandBuffers","device","commandBuffer","shadowMapSampler","globalDSManager","pointSampler","_descriptorSet","bindSampler","UNIFORM_SHADOWMAP_BINDING","bindTexture","builtinResMgr","get","getGFXTexture","UNIFORM_SPOT_LIGHTING_MAP_TEXTURE_BINDING","update","getBuffer","UBOGlobal","BINDING","UBOShadow","UBOCamera","getTexture","serializable"],"mappings":"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"}