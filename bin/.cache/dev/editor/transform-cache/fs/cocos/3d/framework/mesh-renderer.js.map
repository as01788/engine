{"version":3,"sources":["file:///Users/disstian/Documents/CreatorProjects/engine3.3.0/cocos/3d/framework/mesh-renderer.ts"],"names":["ModelShadowCastingMode","OFF","ON","ModelShadowReceivingMode","ModelLightmapSettings","bakeable","_bakeable","val","castShadow","_castShadow","receiveShadow","_receiveShadow","lightmapSize","_lightmapSize","serializable","Vec4","editable","MeshRenderer","Mesh","mesh","struct","morph","subMeshMorphs","some","subMeshMorph","executeInEditMode","RenderableComponent","shadowCastingMode","_shadowCastingMode","_updateCastShadow","_shadowReceivingMode","_updateReceiveShadow","_mesh","old","initialize","_initSubMeshShapesWeights","_watchMorphInMesh","_onMeshChanged","_updateModels","enabledInHierarchy","_attachToScene","model","_model","enableMorph","_enableMorph","value","constructor","_subMeshShapesWeights","_modelType","_morphInstance","scene","Model","onLoad","_validateShapeWeights","onRestore","onEnable","onDisable","_detachFromScene","onDestroy","legacyCC","director","root","destroyModel","_models","length","destroy","getWeight","subMeshIndex","shapeIndex","subMeshShapesWeights","shapeWeights","setWeights","weights","slice","_uploadSubMeshShapesWeights","setWeight","weight","setInstancedAttribute","name","attributes","views","instancedAttributes","i","set","_updateLightmap","lightmap","uOff","vOff","uScale","vScale","lightmapSettings","texture","uvParam","x","y","z","w","_onUpdateLightingmap","node","transform","_createModel","createBoundingShape","minPosition","maxPosition","_updateModelParams","preferMorphOverPlain","modelType","MorphModel","createModel","visFlags","visibility","push","setMorphRendering","renderScene","_getRenderScene","addModel","removeModel","hasChangedFlags","TransformBit","POSITION","isDynamicBatching","_isBatchingEnabled","meshCount","renderingSubMeshes","renderingMesh","material","getRenderMaterial","isValid","subMeshData","initSubModel","_getBuiltinMaterial","enabled","updateLightingmap","_onMaterialModified","idx","inited","_onRebuildPSO","setSubModelMaterial","_clearMaterials","subModels","builtinResMgr","get","_onVisibilityChange","_materials","mat","p","passes","pass","batchingScheme","morphRendering","createInstance","nSubMeshes","primitives","iSubMesh","commonWeights","map","targets","Array","fill","every","shapeCount","ShadowCastingMode","ShadowReceivingMode","disallowAnimation"],"mappings":";;;;;;;AA8BA;;AAIA;;AACA;;AACA;;AACA;;AAEA;;AACA;;AACA;;AACA;;AAEA;;AACA;;;;;;;;;;AAEA;AACA;AACA;AACA;AACA,MAAMA,sBAAsB,GAAG,kBAAK;AAChC;AACJ;AACA;AACA;AACIC,EAAAA,GAAG,EAAE,CAL2B;;AAMhC;AACJ;AACA;AACA;AACIC,EAAAA,EAAE,EAAE;AAV4B,CAAL,CAA/B;AAaA;AACA;AACA;AACA;;AACA,MAAMC,wBAAwB,GAAG,kBAAK;AAClC;AACJ;AACA;AACA;AACIF,EAAAA,GAAG,EAAE,CAL6B;;AAMlC;AACJ;AACA;AACA;AACIC,EAAAA,EAAE,EAAE;AAV8B,CAAL,CAAjC;AAaA;AACA;AACA;AACA;;IAEME,qB,WADL,oBAAQ,0BAAR,C,UAUI,iCAAqB,gBAArB,C,oCAVL,MACMA,qBADN,CAC4B;AAAA;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAcxB;AACJ;AACA;AACA;AAEgB,MAARC,QAAQ,GAAI;AACZ,WAAO,KAAKC,SAAZ;AACH;;AAEW,MAARD,QAAQ,CAAEE,GAAF,EAAO;AACf,SAAKD,SAAL,GAAiBC,GAAjB;AACH;AAED;AACJ;AACA;AACA;;;AAEkB,MAAVC,UAAU,GAAI;AACd,WAAO,KAAKC,WAAZ;AACH;;AAEa,MAAVD,UAAU,CAAED,GAAF,EAAO;AACjB,SAAKE,WAAL,GAAmBF,GAAnB;AACH;AAED;AACJ;AACA;AACA;;;AAEqB,MAAbG,aAAa,GAAI;AACjB,WAAO,KAAKC,cAAZ;AACH;;AAEgB,MAAbD,aAAa,CAAEH,GAAF,EAAO;AACpB,SAAKI,cAAL,GAAsBJ,GAAtB;AACH;AAED;AACJ;AACA;AACA;;;AAEoB,MAAZK,YAAY,GAAI;AAChB,WAAO,KAAKC,aAAZ;AACH;;AAEe,MAAZD,YAAY,CAAEL,GAAF,EAAO;AACnB,SAAKM,aAAL,GAAqBN,GAArB;AACH;;AAhEuB,C,kFACvBO,mB;;;;;WACgC,I;;4EAChCA,mB;;;;;WACsB,IAAIC,YAAJ,E;;8EACtBD,mB;;;;;WACqB,K;;gFACrBA,mB;;;;;WACuB,K;;;;;;;WAEG,K;;kFAC1BA,mB;;;;;WACyB,E;;8DAMzBE,e,mJAaAA,e,wJAaAA,e,0JAaAA,e;AAUL;AACA;AACA;AACA;;IAMaC,Y,YALZ,oBAAQ,iBAAR,C,UACA,iBAAK,sBAAL,C,UACA,2BAAe,GAAf,C,UACA,iBAAK,mBAAL,C,UA2BI,iBAAKjB,sBAAL,C,UACA,oBAAQ,iCAAR,C,UAeA,iBAAKG,wBAAL,C,WACA,oBAAQ,mCAAR,C,WAiBA,iBAAKe,UAAL,C,WACA,oBAAQ,iBAAR,C,WAyBA,oBAAQ,YAA8B;AACnC,SAAO,CAAC,EACJ,KAAKC,IAAL,IACG,KAAKA,IAAL,CAAUC,MAAV,CAAiBC,KADpB,IAEG,KAAKF,IAAL,CAAUC,MAAV,CAAiBC,KAAjB,CAAuBC,aAAvB,CAAqCC,IAArC,CAA2CC,YAAD,IAAkB,CAAC,CAACA,YAA9D,CAHC,CAAR;AAKH,CANA,C,sEAtFJC,wB,2CAJD,MAKaR,YALb,SAKkCS,wCALlC,CAKsD;AAkBlD;;AAGA;AACJ;AACA;AACA;AAIyB,MAAjBC,iBAAiB,GAAI;AACrB,WAAO,KAAKC,kBAAZ;AACH;;AAEoB,MAAjBD,iBAAiB,CAAEpB,GAAF,EAAO;AACxB,SAAKqB,kBAAL,GAA0BrB,GAA1B;;AACA,SAAKsB,iBAAL;AACH;AAED;AACJ;AACA;AACA;;;AAIqB,MAAbnB,aAAa,GAAI;AACjB,WAAO,KAAKoB,oBAAZ;AACH;;AAEgB,MAAbpB,aAAa,CAAEH,GAAF,EAAO;AACpB,SAAKuB,oBAAL,GAA4BvB,GAA5B;;AACA,SAAKwB,oBAAL;AACH;AAED;AACJ;AACA;AACA;AACA;AACA;;;AAGY,MAAJZ,IAAI,GAAI;AACR,WAAO,KAAKa,KAAZ;AACH;;AAEO,MAAJb,IAAI,CAAEZ,GAAF,EAAO;AACX,UAAM0B,GAAG,GAAG,KAAKD,KAAjB;AACA,UAAMb,IAAI,GAAG,KAAKa,KAAL,GAAazB,GAA1B;AACAY,IAAAA,IAAI,SAAJ,IAAAA,IAAI,WAAJ,YAAAA,IAAI,CAAEe,UAAN;;AACA,SAAKC,yBAAL;;AACA,SAAKC,iBAAL;;AACA,SAAKC,cAAL,CAAoBJ,GAApB;;AACA,SAAKK,aAAL;;AACA,QAAI,KAAKC,kBAAT,EAA6B;AACzB,WAAKC,cAAL;AACH;;AACD,SAAKX,iBAAL;;AACA,SAAKE,oBAAL;AACH;;AAEQ,MAALU,KAAK,GAAI;AACT,WAAO,KAAKC,MAAZ;AACH,GAlFiD,CAoFlD;;;AASe,MAAXC,WAAW,GAAI;AACf,WAAO,KAAKC,YAAZ;AACH;;AAEc,MAAXD,WAAW,CAAEE,KAAF,EAAS;AACpB,SAAKD,YAAL,GAAoBC,KAApB;AACH;;AAWDC,EAAAA,WAAW,GAAI;AACX;;AADW;;AAAA;;AAAA;;AAAA;;AAAA,SA3FPC,qBA2FO,GA3F6B,EA2F7B;AAAA,SATLC,UASK;AAAA,SAPLN,MAOK,GAPwB,IAOxB;AAAA,SALPO,cAKO,GALyC,IAKzC;;AAAA;;AAEX,SAAKD,UAAL,GAAkBE,cAAMC,KAAxB;AACH;;AAEMC,EAAAA,MAAM,GAAI;AACb,QAAI,KAAKpB,KAAT,EAAgB;AAAE,WAAKA,KAAL,CAAWE,UAAX;AAA0B;;AAC5C,QAAI,CAAC,KAAKmB,qBAAL,EAAL,EAAmC;AAC/B,WAAKlB,yBAAL;AACH;;AACD,SAAKC,iBAAL;;AACA,SAAKE,aAAL;;AACA,SAAKT,iBAAL;;AACA,SAAKE,oBAAL;AACH,GA5HiD,CA8HlD;;;AACOuB,EAAAA,SAAS,GAAI;AAChB,SAAKhB,aAAL;;AACA,SAAKT,iBAAL;;AACA,SAAKE,oBAAL;AACH;;AAEMwB,EAAAA,QAAQ,GAAI;AACf,QAAI,CAAC,KAAKb,MAAV,EAAkB;AACd,WAAKJ,aAAL;AACH;;AACD,SAAKT,iBAAL;;AACA,SAAKE,oBAAL;;AACA,SAAKS,cAAL;AACH;;AAEMgB,EAAAA,SAAS,GAAI;AAChB,QAAI,KAAKd,MAAT,EAAiB;AACb,WAAKe,gBAAL;AACH;AACJ;;AAEMC,EAAAA,SAAS,GAAI;AAChB,QAAI,KAAKhB,MAAT,EAAiB;AACbiB,8BAASC,QAAT,CAAkBC,IAAlB,CAAuBC,YAAvB,CAAoC,KAAKpB,MAAzC;;AACA,WAAKA,MAAL,GAAc,IAAd;AACA,WAAKqB,OAAL,CAAaC,MAAb,GAAsB,CAAtB;AACH;;AACD,QAAI,KAAKf,cAAT,EAAyB;AACrB,WAAKA,cAAL,CAAoBgB,OAApB;AACH;AACJ;AAED;AACJ;AACA;AACA;AACA;AACA;AACA;;;AACWC,EAAAA,SAAS,CAAEC,YAAF,EAAwBC,UAAxB,EAA4C;AACxD,UAAM;AAAErB,MAAAA,qBAAqB,EAAEsB;AAAzB,QAAkD,IAAxD;AACA,+BAAaF,YAAY,GAAGE,oBAAoB,CAACL,MAAjD;AACA,UAAMM,YAAY,GAAG,KAAKvB,qBAAL,CAA2BoB,YAA3B,CAArB;AACA,+BAAaC,UAAU,GAAGE,YAAY,CAACN,MAAvC;AACA,WAAOM,YAAY,CAACF,UAAD,CAAnB;AACH;AAED;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACWG,EAAAA,UAAU,CAAEC,OAAF,EAAqBL,YAArB,EAA2C;AACxD,UAAM;AAAEpB,MAAAA,qBAAqB,EAAEsB;AAAzB,QAAkD,IAAxD;;AACA,QAAIF,YAAY,IAAIE,oBAAoB,CAACL,MAAzC,EAAiD;AAC7C;AACH;;AACD,UAAMM,YAAY,GAAGD,oBAAoB,CAACF,YAAD,CAAzC;;AACA,QAAIG,YAAY,CAACN,MAAb,KAAwBQ,OAAO,CAACR,MAApC,EAA4C;AACxC;AACH;;AACDK,IAAAA,oBAAoB,CAACF,YAAD,CAApB,GAAqCK,OAAO,CAACC,KAAR,CAAc,CAAd,CAArC;;AACA,SAAKC,2BAAL,CAAiCP,YAAjC;AACH;AAED;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACWQ,EAAAA,SAAS,CAAEC,MAAF,EAAkBT,YAAlB,EAAwCC,UAAxC,EAA4D;AACxE,UAAM;AAAErB,MAAAA,qBAAqB,EAAEsB;AAAzB,QAAkD,IAAxD;;AACA,QAAIF,YAAY,IAAIE,oBAAoB,CAACL,MAAzC,EAAiD;AAC7C;AACH;;AACD,UAAMM,YAAY,GAAGD,oBAAoB,CAACF,YAAD,CAAzC;;AACA,QAAIC,UAAU,IAAIE,YAAY,CAACN,MAA/B,EAAuC;AACnC;AACH;;AACDM,IAAAA,YAAY,CAACF,UAAD,CAAZ,GAA2BQ,MAA3B;;AACA,SAAKF,2BAAL,CAAiCP,YAAjC;AACH;;AAEMU,EAAAA,qBAAqB,CAAEC,IAAF,EAAgBjC,KAAhB,EAA0C;AAClE,QAAI,CAAC,KAAKJ,KAAV,EAAiB;AAAE;AAAS;;AAC5B,UAAM;AAAEsC,MAAAA,UAAF;AAAcC,MAAAA;AAAd,QAAwB,KAAKvC,KAAL,CAAWwC,mBAAzC;;AACA,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,UAAU,CAACf,MAA/B,EAAuCkB,CAAC,EAAxC,EAA4C;AACxC,UAAIH,UAAU,CAACG,CAAD,CAAV,CAAcJ,IAAd,KAAuBA,IAA3B,EAAiC;AAC7BE,QAAAA,KAAK,CAACE,CAAD,CAAL,CAASC,GAAT,CAAatC,KAAb;AACA;AACH;AACJ;AACJ;;AAEMuC,EAAAA,eAAe,CAAEC,QAAF,EAA4BC,IAA5B,EAA0CC,IAA1C,EAAwDC,MAAxD,EAAwEC,MAAxE,EAAwF;AAC1G,SAAKC,gBAAL,CAAsBC,OAAtB,GAAgCN,QAAhC;AACA,SAAKK,gBAAL,CAAsBE,OAAtB,CAA8BC,CAA9B,GAAkCP,IAAlC;AACA,SAAKI,gBAAL,CAAsBE,OAAtB,CAA8BE,CAA9B,GAAkCP,IAAlC;AACA,SAAKG,gBAAL,CAAsBE,OAAtB,CAA8BG,CAA9B,GAAkCP,MAAlC;AACA,SAAKE,gBAAL,CAAsBE,OAAtB,CAA8BI,CAA9B,GAAkCP,MAAlC;;AAEA,SAAKQ,oBAAL;AACH;;AAES3D,EAAAA,aAAa,GAAI;AACvB,QAAI,CAAC,KAAKC,kBAAN,IAA4B,CAAC,KAAKP,KAAtC,EAA6C;AACzC;AACH;;AAED,UAAMS,KAAK,GAAG,KAAKC,MAAnB;;AACA,QAAID,KAAJ,EAAW;AACPA,MAAAA,KAAK,CAACwB,OAAN;AACAxB,MAAAA,KAAK,CAACP,UAAN;AACAO,MAAAA,KAAK,CAACyD,IAAN,GAAazD,KAAK,CAAC0D,SAAN,GAAkB,KAAKD,IAApC;AACH,KAJD,MAIO;AACH,WAAKE,YAAL;AACH;;AAED,QAAI,KAAK1D,MAAT,EAAiB;AACb,WAAKA,MAAL,CAAY2D,mBAAZ,CAAgC,KAAKrE,KAAL,CAAWZ,MAAX,CAAkBkF,WAAlD,EAA+D,KAAKtE,KAAL,CAAWZ,MAAX,CAAkBmF,WAAjF;;AACA,WAAKC,kBAAL;;AACA,WAAKP,oBAAL;AACH;AACJ;;AAESG,EAAAA,YAAY,GAAI;AACtB,UAAMK,oBAAoB,GAAG,CAAC,CAAC,KAAKxD,cAApC,CADsB,CAEtB;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,UAAMyD,SAAS,GAAID,oBAAoB,IAAI,KAAKzD,UAAL,KAAoBE,cAAMC,KAAnD,GAA4DwD,sBAA5D,GAAyE,KAAK3D,UAAhG;;AACA,UAAMP,KAAK,GAAG,KAAKC,MAAL,GAAeiB,wBAASC,QAAT,CAAkBC,IAAnB,CAAiC+C,WAAjC,CAA6CF,SAA7C,CAA5B;;AACAjE,IAAAA,KAAK,CAACoE,QAAN,GAAiB,KAAKC,UAAtB;AACArE,IAAAA,KAAK,CAACyD,IAAN,GAAazD,KAAK,CAAC0D,SAAN,GAAkB,KAAKD,IAApC;AACA,SAAKnC,OAAL,CAAaC,MAAb,GAAsB,CAAtB;;AACA,SAAKD,OAAL,CAAagD,IAAb,CAAkB,KAAKrE,MAAvB;;AACA,QAAI,KAAKO,cAAL,IAAuBR,KAAK,YAAYkE,sBAA5C,EAAwD;AACpDlE,MAAAA,KAAK,CAACuE,iBAAN,CAAwB,KAAK/D,cAA7B;AACH;AACJ;;AAEST,EAAAA,cAAc,GAAI;AACxB,QAAI,CAAC,KAAK0D,IAAL,CAAUhD,KAAX,IAAoB,CAAC,KAAKR,MAA9B,EAAsC;AAClC;AACH;;AACD,UAAMuE,WAAW,GAAG,KAAKC,eAAL,EAApB;;AACA,QAAI,KAAKxE,MAAL,CAAYQ,KAAZ,KAAsB,IAA1B,EAAgC;AAC5B,WAAKO,gBAAL;AACH;;AACDwD,IAAAA,WAAW,CAACE,QAAZ,CAAqB,KAAKzE,MAA1B;AACH;;AAESe,EAAAA,gBAAgB,GAAI;AAC1B,QAAI,KAAKf,MAAL,IAAe,KAAKA,MAAL,CAAYQ,KAA/B,EAAsC;AAClC,WAAKR,MAAL,CAAYQ,KAAZ,CAAkBkE,WAAlB,CAA8B,KAAK1E,MAAnC;AACH;AACJ;;AAES8D,EAAAA,kBAAkB,GAAI;AAC5B,QAAI,CAAC,KAAKxE,KAAN,IAAe,CAAC,KAAKU,MAAzB,EAAiC;AAAE;AAAS;;AAC5C,SAAKwD,IAAL,CAAUmB,eAAV,IAA6BC,uBAAaC,QAA1C;AACA,SAAK7E,MAAL,CAAYyD,SAAZ,CAAsBkB,eAAtB,IAAyCC,uBAAaC,QAAtD;AACA,SAAK7E,MAAL,CAAY8E,iBAAZ,GAAgC,KAAKC,kBAAL,EAAhC;AACA,UAAMC,SAAS,GAAG,KAAK1F,KAAL,GAAa,KAAKA,KAAL,CAAW2F,kBAAX,CAA8B3D,MAA3C,GAAoD,CAAtE;AACA,UAAM4D,aAAa,GAAG,KAAK5F,KAAL,CAAW2F,kBAAjC;;AACA,QAAIC,aAAJ,EAAmB;AACf,WAAK,IAAI1C,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGwC,SAApB,EAA+B,EAAExC,CAAjC,EAAoC;AAChC,YAAI2C,QAAQ,GAAG,KAAKC,iBAAL,CAAuB5C,CAAvB,CAAf;;AACA,YAAI2C,QAAQ,IAAI,CAACA,QAAQ,CAACE,OAA1B,EAAmC;AAC/BF,UAAAA,QAAQ,GAAG,IAAX;AACH;;AACD,cAAMG,WAAW,GAAGJ,aAAa,CAAC1C,CAAD,CAAjC;;AACA,YAAI8C,WAAJ,EAAiB;AACb,eAAKtF,MAAL,CAAYuF,YAAZ,CAAyB/C,CAAzB,EAA4B8C,WAA5B,EAAyCH,QAAQ,IAAI,KAAKK,mBAAL,EAArD;AACH;AACJ;AACJ;;AACD,SAAKxF,MAAL,CAAYyF,OAAZ,GAAsB,IAAtB;AACH;;AAESlC,EAAAA,oBAAoB,GAAI;AAC9B,QAAI,KAAKxD,KAAL,KAAe,IAAnB,EAAyB;AACrB,WAAKA,KAAL,CAAW2F,iBAAX,CAA6B,KAAK1C,gBAAL,CAAsBC,OAAnD,EAA4D,KAAKD,gBAAL,CAAsBE,OAAlF;AACH;;AAED,SAAKf,qBAAL,CAA2B,sBAA3B,EAAmD,CAC/C,KAAKa,gBAAL,CAAsBE,OAAtB,CAA8BC,CADiB,EAE/C,KAAKH,gBAAL,CAAsBE,OAAtB,CAA8BE,CAFiB,EAG/C,KAAKJ,gBAAL,CAAsBE,OAAtB,CAA8BG,CAHiB,EAI/C,KAAKL,gBAAL,CAAsBE,OAAtB,CAA8BI,CAJiB,CAAnD;AAMH;;AAESqC,EAAAA,mBAAmB,CAAEC,GAAF,EAAeT,QAAf,EAA0C;AACnE,QAAI,CAAC,KAAKnF,MAAN,IAAgB,CAAC,KAAKA,MAAL,CAAY6F,MAAjC,EAAyC;AAAE;AAAS;;AACpD,SAAKC,aAAL,CAAmBF,GAAnB,EAAwBT,QAAQ,IAAI,KAAKK,mBAAL,EAApC;AACH;;AAESM,EAAAA,aAAa,CAAEF,GAAF,EAAeT,QAAf,EAAmC;AACtD,QAAI,CAAC,KAAKnF,MAAN,IAAgB,CAAC,KAAKA,MAAL,CAAY6F,MAAjC,EAAyC;AAAE;AAAS;;AACpD,SAAK7F,MAAL,CAAY8E,iBAAZ,GAAgC,KAAKC,kBAAL,EAAhC;;AACA,SAAK/E,MAAL,CAAY+F,mBAAZ,CAAgCH,GAAhC,EAAqCT,QAArC;;AACA,SAAK5B,oBAAL;AACH;;AAES5D,EAAAA,cAAc,CAAEJ,GAAF,EAAoB,CAC3C;;AAESyG,EAAAA,eAAe,GAAI;AACzB,QAAI,CAAC,KAAKhG,MAAV,EAAkB;AAAE;AAAS;;AAC7B,UAAMiG,SAAS,GAAG,KAAKjG,MAAL,CAAYiG,SAA9B;;AACA,SAAK,IAAIzD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGyD,SAAS,CAAC3E,MAA9B,EAAsC,EAAEkB,CAAxC,EAA2C;AACvC,WAAKmD,mBAAL,CAAyBnD,CAAzB,EAA4B,IAA5B;AACH;AACJ;;AAESgD,EAAAA,mBAAmB,GAAI;AAC7B;AACA,WAAOU,sBAAcC,GAAd,CAA4B,kBAA5B,CAAP;AACH;;AAESC,EAAAA,mBAAmB,CAAEvI,GAAF,EAAe;AACxC,QAAI,CAAC,KAAKmC,MAAV,EAAkB;AAAE;AAAS;;AAC7B,SAAKA,MAAL,CAAYmE,QAAZ,GAAuBtG,GAAvB;AACH;;AAESsB,EAAAA,iBAAiB,GAAI;AAC3B,QAAI,CAAC,KAAKa,MAAV,EAAkB;AAAE;AAAS;;AAC7B,QAAI,KAAKd,kBAAL,KAA4B5B,sBAAsB,CAACC,GAAvD,EAA4D;AACxD,WAAKyC,MAAL,CAAYlC,UAAZ,GAAyB,KAAzB;AACH,KAFD,MAEO;AACH,iCACI,KAAKoB,kBAAL,KAA4B5B,sBAAsB,CAACE,EADvD,EAEK,qBAAoB,KAAK0B,kBAAmB,oBAFjD;AAIA,WAAKc,MAAL,CAAYlC,UAAZ,GAAyB,IAAzB;AACH;AACJ;;AAESuB,EAAAA,oBAAoB,GAAI;AAC9B,QAAI,CAAC,KAAKW,MAAV,EAAkB;AAAE;AAAS;;AAC7B,QAAI,KAAKZ,oBAAL,KAA8B3B,wBAAwB,CAACF,GAA3D,EAAgE;AAC5D,WAAKyC,MAAL,CAAYhC,aAAZ,GAA4B,KAA5B;AACH,KAFD,MAEO;AACH,WAAKgC,MAAL,CAAYhC,aAAZ,GAA4B,IAA5B;AACH;AACJ;;AAES+G,EAAAA,kBAAkB,GAAI;AAC5B,SAAK,IAAIvC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAK6D,UAAL,CAAgB/E,MAApC,EAA4C,EAAEkB,CAA9C,EAAiD;AAC7C,YAAM8D,GAAG,GAAG,KAAKD,UAAL,CAAgB7D,CAAhB,CAAZ;;AACA,UAAI,CAAC8D,GAAL,EAAU;AAAE;AAAW;;AACvB,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,GAAG,CAACE,MAAJ,CAAWlF,MAA/B,EAAuC,EAAEiF,CAAzC,EAA4C;AACxC,cAAME,IAAI,GAAGH,GAAG,CAACE,MAAJ,CAAWD,CAAX,CAAb;;AACA,YAAIE,IAAI,CAACC,cAAT,EAAyB;AAAE,iBAAO,IAAP;AAAc;AAC5C;AACJ;;AACD,WAAO,KAAP;AACH;;AAEOhH,EAAAA,iBAAiB,GAAI;AACzB,QAAI,KAAKa,cAAT,EAAyB;AACrB,WAAKA,cAAL,CAAoBgB,OAApB;;AACA,WAAKhB,cAAL,GAAsB,IAAtB;AACH;;AAED,QAAI,CAAC,KAAKL,YAAV,EAAwB;AACpB;AACH;;AAED,QAAI,CAAC,KAAKZ,KAAN,IACG,CAAC,KAAKA,KAAL,CAAWZ,MAAX,CAAkBC,KADtB,IAEG,CAAC,KAAKW,KAAL,CAAWqH,cAFnB,EAEmC;AAC/B;AACH;;AAED,SAAKpG,cAAL,GAAsB,KAAKjB,KAAL,CAAWqH,cAAX,CAA0BC,cAA1B,EAAtB;AACA,UAAMC,UAAU,GAAG,KAAKvH,KAAL,CAAWZ,MAAX,CAAkBoI,UAAlB,CAA6BxF,MAAhD;;AACA,SAAK,IAAIyF,QAAQ,GAAG,CAApB,EAAuBA,QAAQ,GAAGF,UAAlC,EAA8C,EAAEE,QAAhD,EAA0D;AACtD,WAAK/E,2BAAL,CAAiC+E,QAAjC;AACH;;AAED,QAAI,KAAK/G,MAAL,IAAe,KAAKA,MAAL,YAAuBiE,sBAA1C,EAAsD;AAClD,WAAKjE,MAAL,CAAYsE,iBAAZ,CAA8B,KAAK/D,cAAnC;AACH;AACJ;;AAEOd,EAAAA,yBAAyB,GAAI;AACjC,UAAM;AAAEH,MAAAA,KAAK,EAAEb;AAAT,QAAkB,IAAxB;AAEA,SAAK4B,qBAAL,CAA2BiB,MAA3B,GAAoC,CAApC;;AAEA,QAAI,CAAC7C,IAAL,EAAW;AACP;AACH;;AAED,UAAME,KAAK,GAAGF,IAAI,CAACC,MAAL,CAAYC,KAA1B;;AACA,QAAI,CAACA,KAAL,EAAY;AACR;AACH;;AAED,UAAMqI,aAAa,GAAGrI,KAAK,CAACmD,OAA5B;AACA,SAAKzB,qBAAL,GAA6B1B,KAAK,CAACC,aAAN,CAAoBqI,GAApB,CAAyBnI,YAAD,IAAkB;AACnE,UAAI,CAACA,YAAL,EAAmB;AACf,eAAO,EAAP;AACH,OAFD,MAEO,IAAIA,YAAY,CAACgD,OAAjB,EAA0B;AAC7B,eAAOhD,YAAY,CAACgD,OAAb,CAAqBC,KAArB,CAA2B,CAA3B,CAAP;AACH,OAFM,MAEA,IAAIiF,aAAJ,EAAmB;AACtB,mCAAaA,aAAa,CAAC1F,MAAd,KAAyBxC,YAAY,CAACoI,OAAb,CAAqB5F,MAA3D;AACA,eAAO0F,aAAa,CAACjF,KAAd,CAAoB,CAApB,CAAP;AACH,OAHM,MAGA;AACH,eAAO,IAAIoF,KAAJ,CAAkBrI,YAAY,CAACoI,OAAb,CAAqB5F,MAAvC,EAA+C8F,IAA/C,CAAoD,GAApD,CAAP;AACH;AACJ,KAX4B,CAA7B;AAYH;;AAEOzG,EAAAA,qBAAqB,GAAI;AAC7B,UAAM;AACFrB,MAAAA,KAAK,EAAEb,IADL;AAEF4B,MAAAA,qBAAqB,EAAEsB;AAFrB,QAGF,IAHJ;;AAKA,QAAI,CAAClD,IAAD,IAAS,CAACA,IAAI,CAACC,MAAL,CAAYC,KAA1B,EAAiC;AAC7B,aAAOgD,oBAAoB,CAACL,MAArB,KAAgC,CAAvC;AACH;;AAED,UAAM;AAAE3C,MAAAA;AAAF,QAAYF,IAAI,CAACC,MAAvB;;AACA,QAAIC,KAAK,CAACC,aAAN,CAAoB0C,MAApB,KAA+BK,oBAAoB,CAACL,MAAxD,EAAgE;AAC5D,aAAO,KAAP;AACH;;AAED,WAAOK,oBAAoB,CAAC0F,KAArB,CACH,CAAC;AAAE/F,MAAAA,MAAM,EAAEgG;AAAV,KAAD,EAAyB7F,YAAzB;AAAA;;AAAA,aAA0C,oDAAC9C,KAAK,CAACC,aAAN,CAAoB6C,YAApB,CAAD,2DAAC,uBAAmCyF,OAAnC,CAA2C5F,MAA5C,yEAAsD,CAAtD,MAA6DgG,UAAvG;AAAA,KADG,CAAP;AAGH;;AAEOtF,EAAAA,2BAA2B,CAAEP,YAAF,EAAwB;AAAA;;AACvD,iCAAKlB,cAAL,8EAAqBsB,UAArB,CAAgCJ,YAAhC,EAA8C,KAAKpB,qBAAL,CAA2BoB,YAA3B,CAA9C;AACH;;AAneiD,C,UACpC8F,iB,GAAoBjK,sB,UACpBkK,mB,GAAsB/J,wB,6FAEnCW,mB,EACAE,e,EACAmJ,wB;;;;;WACyB,IAAI/J,qBAAJ,E;;0EAEzBU,mB;;;;;WAC8B,I;;uFAE9BA,mB;;;;;WAC8Bd,sBAAsB,CAACC,G;;0FAErDa,mB;;;;;WACgCX,wBAAwB,CAACD,E;;qFAWzDiK,wB,8KAgBAA,wB,wTAiDAA,wB,wKAeArJ,mB;;;;;WACsB,I"}