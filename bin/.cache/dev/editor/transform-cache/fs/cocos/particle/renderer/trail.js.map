{"version":3,"sources":["file:///Users/disstian/Documents/CreatorProjects/engine3.3.0/cocos/particle/renderer/trail.ts"],"names":["PRE_TRIANGLE_INDEX","NEXT_TRIANGLE_INDEX","DIRECTION_THRESHOLD","Math","cos","_temp_trailEle","position","Vec3","velocity","_temp_quat","Quat","_temp_xform","Mat4","_temp_vec3","_temp_vec3_1","_temp_color","Color","TrailSegment","constructor","maxTrailElementNum","start","end","trailElements","push","lifetime","width","direction","color","getElement","idx","length","addElement","splice","newEleLoc","iterateElement","target","f","p","dt","i","count","clear","TrailModule","TrailMode","CurveRange","Space","TextureMode","GradientRange","enable","_enable","val","_trailModel","_particleSystem","processor","updateTrailMaterial","_createModel","rebuild","enabled","onEnable","onDisable","minParticleDistance","_minParticleDistance","_minSquaredDistance","space","_space","ps","_vertSize","_trailNum","_trailLifetime","vbOffset","ibOffset","_trailSegments","_particleTrail","_iaInfo","_iaInfoBuffer","_subMeshData","_vertAttrs","_vbF32","_vbUint32","_iBuffer","_needTransform","_material","IndirectBuffer","DrawInfo","Attribute","AttributeName","ATTR_POSITION","Format","RGB32F","ATTR_TEX_COORD","RGBA32F","ATTR_TEX_COORD1","ATTR_COLOR","RGBA8","a","FormatInfos","format","size","Map","onInit","burstCount","psTime","startLifetime","getMax","psRate","rateOverTime","duration","len","bursts","b","getMaxCount","ceil","lifeTime","Pool","obj","_attachToScene","_detachFromScene","scene","_getRenderScene","addModel","removeModel","destroy","destroySubMeshData","director","root","destroyModel","play","trailIter","values","trail","next","done","value","updateRenderData","updateMaterial","getMaterialInstance","_defaultTrailMat","setSubModelMaterial","update","evaluate","_time","World","_simulationSpace","Local","node","getWorldMatrix","getWorldRotation","animate","scaledDt","loopCount","lastLoop","trailDelay","get","alloc","set","lastSeg","transformMat4","copy","_updateTrailElement","squaredDistance","widthFromParticle","x","widthRatio","trailNum","lastSecondTrail","subtract","lastThirdTrail","equals","ZERO","normalize","_checkDirectionReverse","colorFromParticle","colorOvertime","removeParticle","free","delete","keys","trailSeg","indexOffset","textCoordSeg","startSegEle","_fillVertexBuffer","colorOverTrail","segEle","j","trailModel","invalidateChildren","TransformBit","POSITION","y","z","updateIA","subModels","subModel","inputAssembler","vertexBuffers","indexBuffer","drawInfos","firstIndex","indexCount","beforeRender","legacyCC","createModel","Model","device","vertexBuffer","createBuffer","BufferInfo","BufferUsageBit","VERTEX","TRANSFER_DST","MemoryUsageBit","HOST","DEVICE","vBuffer","ArrayBuffer","Float32Array","Uint32Array","INDEX","max","Uint16Array","BYTES_PER_ELEMENT","INDIRECT","DRAW_INFO_SIZE","vertexCount","RenderingSubMesh","PrimitiveMode","TRIANGLE_LIST","transform","visFlags","visibility","initSubModel","module","trailEle","multiply","remainingLifetime","colorModifer","xTexCoord","trailEleIdx","indexSet","_val","currElement","prevElement","dot","serializable","Particles","Stretch"],"mappings":"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"}