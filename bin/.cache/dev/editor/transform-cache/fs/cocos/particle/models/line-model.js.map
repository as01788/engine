{"version":3,"sources":["file:///Users/disstian/Documents/CreatorProjects/engine3.3.0/cocos/particle/models/line-model.ts"],"names":["_vertex_attrs","Attribute","AttributeName","ATTR_POSITION","Format","RGB32F","ATTR_TEX_COORD","RGBA32F","ATTR_TEX_COORD1","ATTR_COLOR","RGBA8","_temp_v1","Vec3","_temp_v2","LineModel","scene","Model","constructor","_capacity","_vertSize","_vBuffer","_vertAttrsFloatCount","_vdataF32","_vdataUint32","_iaInfo","_iaInfoBuffer","_subMeshData","_vertCount","_indexCount","_material","type","ModelType","LINE","IndirectBuffer","DrawInfo","_device","createBuffer","BufferInfo","BufferUsageBit","INDIRECT","MemoryUsageBit","DEVICE","DRAW_INFO_SIZE","setCapacity","capacity","a","offset","FormatInfos","format","size","createSubMeshData","Float32Array","Uint32Array","updateMaterial","mat","setSubModelMaterial","destroySubMeshData","vertexBuffer","VERTEX","TRANSFER_DST","vBuffer","ArrayBuffer","update","indices","Uint16Array","dst","i","baseIdx","indexBuffer","INDEX","BYTES_PER_ELEMENT","drawInfos","vertexCount","indexCount","RenderingSubMesh","PrimitiveMode","TRIANGLE_LIST","initSubModel","addLineVertexData","positions","width","color","length","subtract","x","y","z","evaluate","_val","seg","updateIA","Math","max","count","ia","_subModels","inputAssembler","vertexBuffers","firstIndex","destroy"],"mappings":"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"}