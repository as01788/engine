{"version":3,"sources":["file:///Users/disstian/Documents/CreatorProjects/engine3.3.0/cocos/dragon-bones/CCFactory.ts"],"names":["CCFactory","BaseFactory","getInstance","_factory","constructor","id","uuid","_slots","eventManager","CCArmatureDisplay","_dragonBones","DragonBones","EDITOR","director","getScheduler","game","on","Game","EVENT_RESTART","onRestart","initUpdate","dt","Scheduler","enableForTarget","scheduleUpdate","System","Priority","HIGH","update","advanceTime","getDragonBonesDataByRawData","rawData","dataParser","ArrayBuffer","_binaryParser","_dataParser","parseDragonBonesData","buildArmatureDisplay","armatureName","dragonBonesName","skinName","textureAtlasName","armature","buildArmature","_display","createArmatureNode","comp","node","Node","display","getComponent","addComponent","name","_armatureName","_dragonAsset","dragonAsset","_dragonAtlasAsset","dragonAtlasAsset","_init","_buildTextureAtlasData","textureAtlasData","textureAtlas","renderTexture","BaseObject","borrowObject","CCTextureAtlasData","_sortSlots","slots","sortedSlots","i","l","length","slot","zOrder","_zOrder","inserted","j","splice","unshift","_buildArmature","dataPackage","Armature","_skinData","skin","_animation","Animation","_armature","animations","_isChildArmature","init","_buildSlot","slotData","displays","CCSlot","getDragonBonesDataByUUID","_dragonBonesDataMap","indexOf","removeDragonBonesDataByUUID","disposeData","undefined","bufferObject"],"mappings":"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"}