{"version":3,"sources":["file:///Users/disstian/Documents/CreatorProjects/engine3.3.0/cocos/2d/renderer/batcher-2d-gpu.ts"],"names":["_dsInfo","DescriptorSetInfo","m4_1","Mat4","Batcher2D","currBufferBatch","_currMeshBuffer","acquireBufferBatch","buffer","batches","_batches","attributes","VertexFormat","vfmtPosUvColor","strideBytes","getAttributeStride","vertexFormatBytes","_requireBufferBatch","registerCustomBuffer","callback","batch","MeshBuffer","_bufferBatchPool","add","initialize","_recreateMeshBuffer","bind","buffers","_customMeshBuffers","get","set","push","unRegisterCustomBuffer","i","length","splice","idx","data","indexOf","reset","removeAt","currStaticRoot","value","_currStaticRoot","currIsStatic","_currIsStatic","constructor","_root","device","_screens","_drawBatchPool","RecyclePool","_meshBuffers","Map","_meshBufferUseCount","_emptyMaterial","Material","_currScene","_currMaterial","_currTexture","_currSampler","_currComponent","_currTransform","_currTextureHash","_currSamplerHash","_currBlendTargetHash","_currLayer","_currDepthStencilStateStage","_descriptorSetCache","DescriptorSetCache","_dummyIA","_localUBOManager","_currTypeIsGPU","_reloadBatchDirty","CachedArray","Pool","DrawBatch2DGPU","CommonQuadIA","UILocalUBOManger","_currBatch","alloc","legacyCC","director","on","Director","EVENT_AFTER_SCENE_LAUNCH","destroy","array","size","keys","forEach","obj","clear","StencilManager","sharedManager","addScreen","comp","sort","_screenSort","getFirstRenderCamera","node","scene","renderScene","cameras","camera","visibility","layer","removeScreen","sortScreens","update","releaseAllByBuffer","screens","screen","enabledInHierarchy","_recursiveScreenNode","batchPriority","model","subModels","j","priority","drawCalls","descriptorSet","getDescriptorSet","addBatch","uploadBuffers","key","bb","customs","updateBuffer","isStatic","DrawBatch2D","drawcallPool","freeArray","free","_commitCompByGPU","frame","assembler","transform","renderComp","texture","samp","textureHash","samplerHash","getGFXTexture","getGFXSampler","getHash","hash","_getRenderScene","mat","getRenderMaterial","stencilStage","stage","blendTargetHash","blendHash","depthStencilStateStage","autoMergeBatchesByGPU","capacityDirty","autoMergeBatches","uiPros","_uiProps","hasChangedFlags","uiTransformComp","setRectDirty","localBuffer","fillBuffers","_resetRenderDirty","fillDrawCall","_commitComp","commitComp","_canDrawByFourVertex","commitModel","depthStencil","dssHash","Stage","ENABLED","DISABLED","getStencilStage","getStencilHash","stamp","getTotalFrames","updateTransform","updateUBOs","curDrawBatch","subModel","visFlags","bufferBatch","sampler","useLocalData","fillPasses","patches","inputAssembler","fillDrawCallAssembler","commitStaticBatch","concat","drawBatchList","finishMergeBatches","blendState","bsHash","getBlendState","customMaterial","_requireDrawBatch","ia","recordBatch","vertexStart","vertexOffset","indicesStart","indicesOffset","byteStart","byteOffset","sys","__isWebIOS14OrIPadOS14Env","forceMergeBatches","material","flushMaterial","walk","level","len","children","_preProcess","_static","child","_postProcess","opacityDirty","opacity","parent","render","uiComp","markColorDirty","color","a","applyOpacity","updateAssembler","postUpdateAssembler","_createMeshBuffer","vertexCount","indexCount","meshBufferUseCount","request","b","getSiblingIndex","_releaseDescriptorSetCache","releaseDescriptorSetCache","_rectDirty","LocalDescriptorSet","_descriptorSet","_transform","_textureHash","_samplerHash","_localBuffer","_transformUpdate","root","_localData","Float32Array","UBOLocal","COUNT","createBuffer","BufferInfo","BufferUsageBit","UNIFORM","TRANSFER_DST","MemoryUsageBit","HOST","DEVICE","SIZE","layout","passes","localSetLayout","createDescriptorSet","bindBuffer","BINDING","binding","ModelLocalBindings","SAMPLER_SPRITE","bindTexture","bindSampler","uploadLocalData","updateLocal","equals","_dirtyFlags","updateWorldTransform","worldMatrix","_mat","toArray","MAT_WORLD_OFFSET","inverseTranspose","JSB","det","determinant","factor","Math","sqrt","multiplyScalar","MAT_WORLD_IT_OFFSET","_dsCacheHashByTexture","_dsCacheHashByBuffer","_localDescriptorSetCache","_localCachePool","drawCall","caches","cache","localDs","bufferHash","has","localBufferView","bufferView","UBO_UI_LOCAL","delete","map","internal"],"mappings":"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"}