{"version":3,"sources":["file:///Users/disstian/Documents/CreatorProjects/engine3.3.0/cocos/2d/assembler/sprite/simple.ts"],"names":["vec3_temps","i","push","Vec3","simple","createData","sprite","renderData","requestRenderData","dataLength","vertexCount","indicesCount","vData","Float32Array","updateRenderData","frame","spriteFrame","dynamicAtlasManager","packToDynamicAtlas","UI_GPU_DRIVEN","_canDrawByFourVertex","_updateUVWithTrim","vertDirty","updateVertexData","uvDirty","updateUvs","updateWorldVerts","dataList","data","node","data0","data3","matrix","worldMatrix","a","m00","b","m01","c","m04","d","m05","justTranslate","tx","m12","ty","m13","vl","x","vr","vb","y","vt","vltx","vrtx","vbty","vtty","al","ar","bl","br","cb","ct","db","dt","cbtx","cttx","dbty","dtty","fillBuffers","renderer","hasChangedFlags","buffer","acquireBufferBatch","vertexOffset","byteOffset","indicesOffset","vertexId","bufferUnchanged","request","currBufferBatch","vBuf","iBuf","iData","set","index0","index1","index2","index3","uiTrans","_uiProps","uiTransformComp","cw","width","ch","height","appX","anchorX","appY","anchorY","l","r","t","trim","originSize","getOriginalSize","rect","getRect","ow","oh","rw","rh","offset","getOffset","scaleX","scaleY","trimLeft","trimRight","trimBottom","trimTop","uv","updateColor","colorOffset","color","colorR","colorG","g","colorB","colorA","opacity"],"mappings":"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"}