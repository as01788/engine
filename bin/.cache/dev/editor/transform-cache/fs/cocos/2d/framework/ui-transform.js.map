{"version":3,"sources":["file:///Users/disstian/Documents/CreatorProjects/engine3.3.0/cocos/2d/framework/ui-transform.ts"],"names":["_vec2a","Vec2","_vec2b","_vec3a","Vec3","_mat4_temp","Mat4","_matrix","_worldMatrix","_zeroMatrix","_rect","Rect","UITransform","disallowMultiple","executeInEditMode","Component","contentSize","_contentSize","value","equals","clone","EDITOR","Size","set","node","emit","NodeEventType","SIZE_CHANGED","_markRenderDataDirty","width","height","anchorPoint","_anchorPoint","ANCHOR_CHANGED","anchorX","x","anchorY","y","priority","_priority","getComponent","parent","insertChangeMap","visibility","camera","director","root","batcher2D","getFirstRenderCamera","cameraPriority","constructor","UI_GPU_DRIVEN","_rectDirty","_rectWithScale","_anchorCache","__preload","_uiProps","uiTransformComp","onLoad","onEnable","on","PARENT_CHANGED","_parentChanged","onDisable","off","onDestroy","setContentSize","size","locContentSize","undefined","setAnchorPoint","point","locAnchorPoint","isHit","w","h","cameraPt","testPt","nodeEventProcessor","eventProcessor","cameras","_getRenderScene","i","length","layer","getWorldRT","m12","m13","center","visibleRect","m00","m04","m01","m05","invert","transformMat4","getWorldMatrix","strictEquals","hit","maskList","j","temp","index","comp","_enabled","convertToNodeSpaceAR","worldPoint","out","convertToWorldSpaceAR","nodePoint","getBoundingBox","fromRTS","getRotation","getPosition","getScale","rect","getBoundingBoxToWorld","getBoundingBoxTo","parentMat","multiply","children","locChildren","child","active","uiTransform","childRect","union","getComputeAABB","worldMatrix","px","py","pz","worldPosition","z","l","AABB","uiComp","markForUpdateRenderData","renderData","vertDirty","checkAndUpdateRect","rot","scale","lenX","lenY","transformQuat","setRectDirty","transformBit","TransformBit","RS","key","uuid","priorityChangeNodeMap","has","_sortChildrenSibling","siblings","sort","a","b","aComp","bComp","ca","cb","diff","getSiblingIndex","_sortSiblings","forEach","ID","_updateSiblingIndex","clear","_cleanChangeMap","EventType","Map","serializable","Director","EVENT_AFTER_UPDATE","EVENT_BEFORE_SCENE_LAUNCH"],"mappings":"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"}