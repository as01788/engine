{"version":3,"sources":["file:///Users/disstian/Documents/CreatorProjects/engine3.3.0/cocos/2d/event/pointer-event-dispatcher.ts"],"names":["PointerEventDispatcher","constructor","_isListDirty","_inDispatchCount","_pointerEventProcessorList","_processorListToAdd","_processorListToRemove","input","on","Input","EventType","MOUSE_DOWN","dispatchEventMouse","MOUSE_MOVE","MOUSE_UP","MOUSE_WHEEL","TOUCH_START","dispatchEventTouch","TOUCH_MOVE","TOUCH_END","TOUCH_CANCEL","NodeEventProcessor","callbacksInvoker","DispatcherEventType","ADD_POINTER_EVENT_PROCESSOR","addPointerEventProcessor","REMOVE_POINTER_EVENT_PROCESSOR","removePointerEventProcessor","pointerEventProcessor","push","js","array","remove","eventMouse","_sortPointerEventProcessorList","pointerEventProcessorList","length","shouldDispatchToSystemEvent","i","isEnabled","shouldHandleEventMouse","_handleEventMouse","preventSwallow","type","pointerEvent2SystemEvent","_eventTarget","emit","_updatePointerEventProcessorList","eventTouch","touch","shouldHandleEventTouch","InputEventType","_handleEventTouch","claimedTouchIdList","getID","index","indexOf","removeAt","listToAdd","addLength","listToRemove","removeLength","node","trans","_uiProps","uiTransformComp","cachedCameraPriority","cameraPriority","sort","_sortByPriority","p1","p2","node1","node2","activeInHierarchy","n1","n2","ex","parent","_id","priority1","getSiblingIndex","priority2","pointerEventDispatcher"],"mappings":"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"}