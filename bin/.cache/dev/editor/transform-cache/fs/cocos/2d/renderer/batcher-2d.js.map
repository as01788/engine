{"version":3,"sources":["file:///Users/disstian/Documents/CreatorProjects/engine3.3.0/cocos/2d/renderer/batcher-2d.ts"],"names":["_dsInfo","DescriptorSetInfo","m4_1","Mat4","Batcher2D","currBufferBatch","_currMeshBuffer","acquireBufferBatch","buffer","batches","_batches","attributes","VertexFormat","vfmtPosUvColor","strideBytes","getAttributeStride","vertexFormatBytes","_requireBufferBatch","registerCustomBuffer","callback","batch","MeshBuffer","_bufferBatchPool","add","initialize","_recreateMeshBuffer","bind","buffers","_customMeshBuffers","get","set","push","unRegisterCustomBuffer","i","length","splice","idx","data","indexOf","reset","removeAt","currStaticRoot","value","_currStaticRoot","currIsStatic","_currIsStatic","constructor","_root","device","_screens","RecyclePool","obj","destroy","_drawBatchPool","_meshBuffers","Map","_meshBufferUseCount","_emptyMaterial","Material","_currScene","_currMaterial","_currTexture","_currSampler","_currComponent","_currTransform","_currTextureHash","_currSamplerHash","_currBlendTargetHash","_currLayer","_currDepthStencilStateStage","_currHash","_descriptorSetCache","DescriptorSetCache","CachedArray","Pool","DrawBatch2D","array","size","keys","forEach","clear","StencilManager","sharedManager","addScreen","comp","sort","_screenSort","getFirstRenderCamera","node","scene","renderScene","cameras","camera","visibility","layer","removeScreen","sortScreens","update","screens","screen","enabledInHierarchy","_recursiveScreenNode","batchPriority","model","subModels","j","priority","descriptorSet","getDescriptorSet","addBatch","uploadBuffers","key","bb","customs","isStatic","free","commitComp","frame","assembler","transform","renderComp","renderData","dataHash","mat","material","stencilStage","stage","depthStencilStateStage","autoMergeBatches","blendHash","getGFXTexture","getGFXSampler","textureHash","hash","_getRenderScene","getRenderMaterial","getHash","fillBuffers","commitModel","depthStencil","dssHash","Stage","ENABLED","DISABLED","getStencilStage","getStencilHash","stamp","legacyCC","director","getTotalFrames","updateTransform","updateUBOs","curDrawBatch","alloc","subModel","visFlags","bufferBatch","texture","sampler","useLocalData","fillPasses","patches","inputAssembler","commitStaticBatch","concat","drawBatchList","finishMergeBatches","ia","recordBatch","blendState","bsHash","getBlendState","customMaterial","_requireDrawBatch","samplerHash","vertexStart","vertexOffset","indicesStart","indicesOffset","byteStart","byteOffset","sys","__isWebIOS14OrIPadOS14Env","forceMergeBatches","flushMaterial","walk","level","len","children","_preProcess","_static","child","_postProcess","_uiProps","opacityDirty","opacity","parent","render","uiComp","markColorDirty","color","a","applyOpacity","uiTransformComp","updateAssembler","postUpdateAssembler","_createMeshBuffer","vertexCount","indexCount","meshBufferUseCount","request","b","getSiblingIndex","_releaseDescriptorSetCache","releaseDescriptorSetCache","LocalDescriptorSet","_descriptorSet","_transform","_textureHash","_samplerHash","_localBuffer","_transformUpdate","root","_localData","Float32Array","UBOLocal","COUNT","createBuffer","BufferInfo","BufferUsageBit","UNIFORM","TRANSFER_DST","MemoryUsageBit","HOST","DEVICE","SIZE","layout","passes","localSetLayout","createDescriptorSet","bindBuffer","BINDING","binding","ModelLocalBindings","SAMPLER_SPRITE","bindTexture","bindSampler","uploadLocalData","updateLocal","equals","hasChangedFlags","_dirtyFlags","updateWorldTransform","worldMatrix","_mat","toArray","MAT_WORLD_OFFSET","inverseTranspose","JSB","det","determinant","factor","Math","sqrt","multiplyScalar","MAT_WORLD_IT_OFFSET","_dsCacheHashByTexture","_localDescriptorSetCache","_localCachePool","caches","cache","localDs","has","delete","map","internal"],"mappings":"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"}