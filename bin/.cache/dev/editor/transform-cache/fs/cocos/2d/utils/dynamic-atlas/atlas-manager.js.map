{"version":3,"sources":["file:///Users/disstian/Documents/CreatorProjects/engine3.3.0/cocos/2d/utils/dynamic-atlas/atlas-manager.ts"],"names":["DynamicAtlasManager","_atlases","_atlasIndex","_maxAtlasCount","_textureSize","_maxFrameSize","_textureBleeding","_enabled","enabled","value","reset","legacyCC","director","on","Director","EVENT_BEFORE_SCENE_LAUNCH","beforeSceneLoad","off","maxAtlasCount","atlasCount","length","textureBleeding","enable","textureSize","maxFrameSize","newAtlas","atlas","Atlas","push","insertSpriteFrame","spriteFrame","EDITOR","_original","packable","sampler","texture","getSamplerInfo","minFilter","Filter","LINEAR","magFilter","mipFilter","NONE","frame","i","l","destroy","deleteAtlasSpriteFrame","js","array","fastRemove","_innerSpriteFrames","_texture","deleteAtlasTexture","deleteInnerTexture","isEmpty","splice","packToDynamicAtlas","comp","packedFrame","_setDynamicAtlasFrame","instance","dynamicAtlasManager","internal"],"mappings":"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"}