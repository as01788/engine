{"version":3,"sources":["file:///Users/disstian/Documents/CreatorProjects/engine3.3.0/cocos/physics/bullet/bullet-world.ts"],"names":["contactsPool","v3_0","CC_V3_0","v3_1","CC_V3_1","BulletWorld","setDefaultMaterial","v","setAllowSleep","bt","ccDiscreteDynamicsWorld_setAllowSleep","_world","setGravity","gravity","DynamicsWorld_setGravity","BulletCache","instance","BT_V3_0","updateNeedEmitEvents","ghosts","_needEmitEvents","i","length","ghost","shapes","ghostStruct","wrappedShapes","j","collider","needCollisionEvent","needTriggerEvent","bodies","body","bodyStruct","impl","constructor","_broadphase","_solver","_dispatcher","_needSyncAfterEvents","constraints","triggerArrayMat","ArrayCollisionMatrix","collisionArrayMat","contactsDic","TupleDictionary","oldContactsDic","DbvtBroadphase_new","CollisionDispatcher_new","SequentialImpulseConstraintSolver_new","ccDiscreteDynamicsWorld_new","destroy","CollisionWorld_del","DbvtBroadphase_del","CollisionDispatcher_del","SequentialImpulseConstraintSolver_del","step","deltaTime","timeSinceLastCalled","maxSubStep","undefined","DynamicsWorld_stepSimulation","syncSceneToPhysics","updateDirty","syncSceneToGhost","syncAfterEvents","raycast","worldRay","options","pool","results","computeHit","maxDistance","to","from","BT_V3_1","o","allHitsCB","ccAllRayCallback_static","ccAllRayCallback_reset","mask","queryTrigger","CollisionWorld_rayTest","RayCallback_hasHit","posArray","ccAllRayCallback_getHitPointWorld","normalArray","ccAllRayCallback_getHitNormalWorld","ptrArray","ccAllRayCallback_getCollisionShapePtrs","n","int_array_size","Vec3_array_at","shape","getWrapper","int_array_at","BulletShape","TYPE","r","add","push","_assign","Vec3","distance","raycastClosest","result","closeHitCB","ccClosestRayCallback_static","ccClosestRayCallback_reset","ccClosestRayCallback_getHitPointWorld","ccClosestRayCallback_getHitNormalWorld","ccClosestRayCallback_getCollisionShapePtr","getSharedBody","node","wrappedBody","BulletSharedBody","addSharedBody","sharedBody","indexOf","DynamicsWorld_addRigidBody","collisionFilterGroup","collisionFilterMask","removeSharedBody","DynamicsWorld_removeRigidBody","addGhostObject","CollisionWorld_addCollisionObject","removeGhostObject","CollisionWorld_removeCollisionObject","addConstraint","constraint","DynamicsWorld_addConstraint","enableCollision","index","removeConstraint","splice","DynamicsWorld_removeConstraint","emitEvents","gatherConatactData","dicL","getLength","apply","CollisionEventObject","contacts","key","getKeyByIndex","data","getDataByKey","shape0","shape1","set","id","collider0","collider1","isTrigger","get","TriggerEventObject","type","selfCollider","otherCollider","emit","body0","attachedRigidBody","body1","isSleeping","cq","c","pop","BulletContactData","oldDicL","reset","numManifolds","Dispatcher_getNumManifolds","manifold","Dispatcher_getManifoldByIndexInternal","numContacts","PersistentManifold_getNumContacts","manifoldPoint","PersistentManifold_getContactPoint","s0","ManifoldPoint_getShape0","s1","ManifoldPoint_getShape1","item"],"mappings":"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"}