{"version":3,"sources":["file:///Users/disstian/Documents/CreatorProjects/engine3.3.0/cocos/physics/framework/physics-system.ts"],"names":["legacyCC","internal","PhysicsGroup","PhysicsSystem","System","PHYSICS_NONE","selector","id","PHYSICS_BUILTIN","PHYSICS_CANNON","PHYSICS_BULLET","PHYSICS_PHYSX","instance","_instance","enable","_enable","value","allowSleep","_allowSleep","v","physicsWorld","setAllowSleep","maxSubSteps","_maxSubSteps","fixedTimeStep","_fixedTimeStep","gravity","_gravity","set","setGravity","sleepThreshold","_sleepThreshold","autoSimulation","_autoSimulation","defaultMaterial","_material","constructor","raycastClosestResult","PhysicsRayResult","raycastResults","collisionMatrix","CollisionMatrix","minVolumeSize","useNodeChains","_subStepCount","_accumulator","Vec3","PhysicsMaterial","raycastOptions","group","mask","queryTrigger","maxDistance","raycastResultPool","RecyclePool","on","EVENT_UPDATE","_updateMaterial","postUpdate","deltaTime","EDITOR","_executeInEditMode","runInEditor","syncSceneToPhysics","director","emit","Director","EVENT_BEFORE_PHYSICS","step","emitEvents","syncAfterEvents","EVENT_AFTER_PHYSICS","resetConfiguration","config","con","game","physics","copy","setValues","friction","rollingFriction","spinningFriction","restitution","i","parseInt","collisionGroups","cg","Array","forEach","name","index","Enum","update","setDefaultMaterial","resetAccumulator","time","raycast","worldRay","reset","length","raycastClosest","constructAndRegister","sys","registerSystem","ID","priority","once","EVENT_INIT"],"mappings":"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"}